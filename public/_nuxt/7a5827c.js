/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{395:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"]},396:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=String.fromCharCode;function o(e,t){t=null==t||t<0?e.length:Math.min(t,e.length);var r=0;239===e[0]&&187===e[1]&&191===e[2]&&(r=3);for(var o=[],i=0;r<t;i++){var a=e[r++],s=void 0,c=void 0,u=void 0;if(0===a)break;a<128?o[i]=n(a):a>=194&&a<224?(s=e[r++],o[i]=n(((31&a)<<6)+(63&s))):a>=224&&a<240?(s=e[r++],c=e[r++],o[i]=n(((15&a)<<12)+((63&s)<<6)+(63&c))):a>=240&&a<245&&(u=((7&a)<<18)+((63&(s=e[r++]))<<12)+((63&(c=e[r++]))<<6)+(63&e[r++])-65536,o[i]=n(55296+(u>>10),56320+(1023&u)))}return o.join("")}function i(e,t,r){r=null==r||r<0?e.length:Math.min(r,e.length);var o=0,i=1,a=0;254===e[0]&&255===e[1]?(t=!0,o=2):255===e[0]&&254===e[1]&&(t=!1,o=2),t&&(i=0,a=1);for(var s,c,u,l,h=[],d=0;o<r&&(s=e[o+i],c=e[o+a],o+=2,0!==(u=(s<<8)+c));d++)s<216||s>=224?h[d]=n(u):(l=(e[o+i]<<8)+e[o+a],o+=2,h[d]=n(u,l));return h.join("")}function a(e,t){t=null==t||t<0?e.length:Math.min(t,e.length);for(var r=[],o=0;o<t;o++)r.push(n(e[o]));return r.join("")}t.readBytesToUTF8=o,t.readBytesToUTF16=i,t.readBytesToISO8859=a,t.readBytesToString=function(e,t,r){return 0===t?a(e,r):3===t?o(e,r):1===t||2===t?i(e,void 0,r):null},t.getEndpointOfBytes=function(e,t,r){void 0===r&&(r=0);for(var n=0===t?function(t){return 0===e[t]}:function(t){return 0===e[t]&&0===e[t+1]},o=r;o<e.length&&!n(o);o++);return o},t.skipPaddingZeros=function(e,t){for(var r=t;0===e[r];r++)t++;return t}},397:function(e,t,r){"use strict";(function(e){var n=r(611),o=r(612),i=r(613);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=d(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r);e=s(e,n);var o=e.write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|p(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):d(e,t);if("Buffer"===t.type&&i(t.data))return d(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|p(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(n)return F(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,o){var i,a=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=r;i<s;i++)if(u(e,i)===u(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(r+c>s&&(r=s-c),i=r;i>=0;i--){for(var h=!0,d=0;d<c;d++)if(u(e,i+d)!==u(t,d)){h=!1;break}if(h)return i}return-1}function w(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function _(e,t,r,n){return K(F(t,e.length-r),e,r,n)}function b(e,t,r,n){return K(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function C(e,t,r,n){return b(e,t,r,n)}function E(e,t,r,n){return K(z(t),e,r,n)}function T(e,t,r,n){return K(function(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,a,s,c,u=e[o],l=null,h=u>239?4:u>223?3:u>191?2:1;if(o+h<=r)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=h}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var a=e[r];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(i,a),u=this.slice(n,o),l=e.slice(t,r),h=0;h<s;++h)if(u[h]!==l[h]){i=u[h],a=l[h];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return C(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function A(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=q(e[i]);return o}function P(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function M(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function D(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function U(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,n,i){return i||U(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,i){return i||U(e,0,r,8),o.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;r=new c(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},c.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);x(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a|0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);x(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a|0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=c.isBuffer(e)?e:F(new c(e,n).toString()),s=a.length;for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function z(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(35))},461:function(e,t,r){var n;"undefined"!=typeof self&&self,n=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="fb15")}({"01f9":function(e,t,r){"use strict";var n=r("2d00"),o=r("5ca1"),i=r("2aba"),a=r("32e9"),s=r("84f2"),c=r("41a0"),u=r("7f20"),l=r("38fd"),h=r("2b4c")("iterator"),d=!([].keys&&"next"in[].keys()),p="keys",f="values",g=function(){return this};e.exports=function(e,t,r,m,v,y,w){c(r,t,m);var _,b,C,E=function(e){if(!d&&e in I)return I[e];switch(e){case p:case f:return function(){return new r(this,e)}}return function(){return new r(this,e)}},T=t+" Iterator",S=v==f,k=!1,I=e.prototype,A=I[h]||I["@@iterator"]||v&&I[v],R=A||E(v),O=v?S?E("entries"):R:void 0,P="Array"==t&&I.entries||A;if(P&&(C=l(P.call(new e)))!==Object.prototype&&C.next&&(u(C,T,!0),n||"function"==typeof C[h]||a(C,h,g)),S&&A&&A.name!==f&&(k=!0,R=function(){return A.call(this)}),n&&!w||!d&&!k&&I[h]||a(I,h,R),s[t]=R,s[T]=g,v)if(_={values:S?R:E(f),keys:y?R:E(p),entries:O},w)for(b in _)b in I||i(I,b,_[b]);else o(o.P+o.F*(d||k),t,_);return _}},"02f4":function(e,t,r){var n=r("4588"),o=r("be13");e.exports=function(e){return function(t,r){var i,a,s=String(o(t)),c=n(r),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},"0390":function(e,t,r){"use strict";var n=r("02f4")(!0);e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},"0bfb":function(e,t,r){"use strict";var n=r("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0d58":function(e,t,r){var n=r("ce10"),o=r("e11e");e.exports=Object.keys||function(e){return n(e,o)}},1495:function(e,t,r){var n=r("86cc"),o=r("cb7c"),i=r("0d58");e.exports=r("9e1e")?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,c=0;s>c;)n.f(e,r=a[c++],t[r]);return e}},"214f":function(e,t,r){"use strict";r("b0c5");var n=r("2aba"),o=r("32e9"),i=r("79e5"),a=r("be13"),s=r("2b4c"),c=r("520a"),u=s("species"),l=!i(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),h=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var d=s(e),p=!i(function(){var t={};return t[d]=function(){return 7},7!=""[e](t)}),f=p?!i(function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[u]=function(){return r}),r[d](""),!t}):void 0;if(!p||!f||"replace"===e&&!l||"split"===e&&!h){var g=/./[d],m=r(a,d,""[e],function(e,t,r,n,o){return t.exec===c?p&&!o?{done:!0,value:g.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),v=m[0],y=m[1];n(String.prototype,e,v),o(RegExp.prototype,d,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},"230e":function(e,t,r){var n=r("d3f4"),o=r("7726").document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},"23c6":function(e,t,r){var n=r("2d95"),o=r("2b4c")("toStringTag"),i="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:i?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"2aba":function(e,t,r){var n=r("7726"),o=r("32e9"),i=r("69a8"),a=r("ca5a")("src"),s=r("fa5b"),c="toString",u=(""+s).split(c);r("8378").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,s){var c="function"==typeof r;c&&(i(r,"name")||o(r,"name",t)),e[t]!==r&&(c&&(i(r,a)||o(r,a,e[t]?""+e[t]:u.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:o(e,t,r):(delete e[t],o(e,t,r)))})(Function.prototype,c,function(){return"function"==typeof this&&this[a]||s.call(this)})},"2aeb":function(e,t,r){var n=r("cb7c"),o=r("1495"),i=r("e11e"),a=r("613b")("IE_PROTO"),s=function(){},c="prototype",u=function(){var e,t=r("230e")("iframe"),n=i.length;for(t.style.display="none",r("fab2").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u[c][i[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s[c]=n(e),r=new s,s[c]=null,r[a]=e):r=u(),void 0===t?r:o(r,t)}},"2b4c":function(e,t,r){var n=r("5537")("wks"),o=r("ca5a"),i=r("7726").Symbol,a="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=n},"2d00":function(e,t){e.exports=!1},"2d95":function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},"2fdb":function(e,t,r){"use strict";var n=r("5ca1"),o=r("d2c8"),i="includes";n(n.P+n.F*r("5147")(i),"String",{includes:function(e){return!!~o(this,e,i).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(e,t,r){var n=r("86cc"),o=r("4630");e.exports=r("9e1e")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},"38fd":function(e,t,r){var n=r("69a8"),o=r("4bf8"),i=r("613b")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},"41a0":function(e,t,r){"use strict";var n=r("2aeb"),o=r("4630"),i=r("7f20"),a={};r("32e9")(a,r("2b4c")("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+" Iterator")}},"456d":function(e,t,r){var n=r("4bf8"),o=r("0d58");r("5eda")("keys",function(){return function(e){return o(n(e))}})},4588:function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"4bf8":function(e,t,r){var n=r("be13");e.exports=function(e){return Object(n(e))}},5147:function(e,t,r){var n=r("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},"520a":function(e,t,r){"use strict";var n,o,i=r("0bfb"),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,u="lastIndex",l=(n=/a/,o=/b*/g,a.call(n,"a"),a.call(o,"a"),0!==n[u]||0!==o[u]),h=void 0!==/()??/.exec("")[1];(l||h)&&(c=function(e){var t,r,n,o,c=this;return h&&(r=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),l&&(t=c[u]),n=a.call(c,e),l&&n&&(c[u]=c.global?n.index+n[0].length:t),h&&n&&n.length>1&&s.call(n[0],r,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)}),n}),e.exports=c},"52a7":function(e,t){t.f={}.propertyIsEnumerable},5537:function(e,t,r){var n=r("8378"),o=r("7726"),i="__core-js_shared__",a=o[i]||(o[i]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r("2d00")?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(e,t,r){var n=r("7726"),o=r("8378"),i=r("32e9"),a=r("2aba"),s=r("9b43"),c="prototype",u=function(e,t,r){var l,h,d,p,f=e&u.F,g=e&u.G,m=e&u.S,v=e&u.P,y=e&u.B,w=g?n:m?n[t]||(n[t]={}):(n[t]||{})[c],_=g?o:o[t]||(o[t]={}),b=_[c]||(_[c]={});for(l in g&&(r=t),r)d=((h=!f&&w&&void 0!==w[l])?w:r)[l],p=y&&h?s(d,n):v&&"function"==typeof d?s(Function.call,d):d,w&&a(w,l,d,e&u.U),_[l]!=d&&i(_,l,p),v&&b[l]!=d&&(b[l]=d)};n.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},"5eda":function(e,t,r){var n=r("5ca1"),o=r("8378"),i=r("79e5");e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",a)}},"5f1b":function(e,t,r){"use strict";var n=r("23c6"),o=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var i=r.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},"613b":function(e,t,r){var n=r("5537")("keys"),o=r("ca5a");e.exports=function(e){return n[e]||(n[e]=o(e))}},"626a":function(e,t,r){var n=r("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},6762:function(e,t,r){"use strict";var n=r("5ca1"),o=r("c366")(!0);n(n.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")("includes")},6821:function(e,t,r){var n=r("626a"),o=r("be13");e.exports=function(e){return n(o(e))}},"69a8":function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},"6a99":function(e,t,r){var n=r("d3f4");e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},7333:function(e,t,r){"use strict";var n=r("0d58"),o=r("2621"),i=r("52a7"),a=r("4bf8"),s=r("626a"),c=Object.assign;e.exports=!c||r("79e5")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=c({},e)[r]||Object.keys(c({},t)).join("")!=n})?function(e,t){for(var r=a(e),c=arguments.length,u=1,l=o.f,h=i.f;c>u;)for(var d,p=s(arguments[u++]),f=l?n(p).concat(l(p)):n(p),g=f.length,m=0;g>m;)h.call(p,d=f[m++])&&(r[d]=p[d]);return r}:c},7726:function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},"77f1":function(e,t,r){var n=r("4588"),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=n(e))<0?o(e+t,0):i(e,t)}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"7f20":function(e,t,r){var n=r("86cc").f,o=r("69a8"),i=r("2b4c")("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},8378:function(e,t){var r=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=r)},"84f2":function(e,t){e.exports={}},"86cc":function(e,t,r){var n=r("cb7c"),o=r("c69a"),i=r("6a99"),a=Object.defineProperty;t.f=r("9e1e")?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},"9b43":function(e,t,r){var n=r("d8e8");e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,r){var n=r("2b4c")("unscopables"),o=Array.prototype;null==o[n]&&r("32e9")(o,n,{}),e.exports=function(e){o[n][e]=!0}},"9def":function(e,t,r){var n=r("4588"),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},"9e1e":function(e,t,r){e.exports=!r("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a352:function(t,r){t.exports=e},a481:function(e,t,r){"use strict";var n=r("cb7c"),o=r("4bf8"),i=r("9def"),a=r("4588"),s=r("0390"),c=r("5f1b"),u=Math.max,l=Math.min,h=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,f=function(e){return void 0===e?e:String(e)};r("214f")("replace",2,function(e,t,r,g){return[function(n,o){var i=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,i,o):r.call(String(i),n,o)},function(e,t){var o=g(r,e,this,t);if(o.done)return o.value;var h=n(e),d=String(this),p="function"==typeof t;p||(t=String(t));var v=h.global;if(v){var y=h.unicode;h.lastIndex=0}for(var w=[];;){var _=c(h,d);if(null===_)break;if(w.push(_),!v)break;""===String(_[0])&&(h.lastIndex=s(d,i(h.lastIndex),y))}for(var b="",C=0,E=0;E<w.length;E++){_=w[E];for(var T=String(_[0]),S=u(l(a(_.index),d.length),0),k=[],I=1;I<_.length;I++)k.push(f(_[I]));var A=_.groups;if(p){var R=[T].concat(k,S,d);void 0!==A&&R.push(A);var O=String(t.apply(void 0,R))}else O=m(T,d,S,k,A,t);S>=C&&(b+=d.slice(C,S)+O,C=S+T.length)}return b+d.slice(C)}];function m(e,t,n,i,a,s){var c=n+e.length,u=i.length,l=p;return void 0!==a&&(a=o(a),l=d),r.call(s,l,function(r,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(c);case"<":s=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return r;if(l>u){var d=h(l/10);return 0===d?r:d<=u?void 0===i[d-1]?o.charAt(1):i[d-1]+o.charAt(1):r}s=i[l-1]}return void 0===s?"":s})}})},aae3:function(e,t,r){var n=r("d3f4"),o=r("2d95"),i=r("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},ac6a:function(e,t,r){for(var n=r("cadf"),o=r("0d58"),i=r("2aba"),a=r("7726"),s=r("32e9"),c=r("84f2"),u=r("2b4c"),l=u("iterator"),h=u("toStringTag"),d=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=o(p),g=0;g<f.length;g++){var m,v=f[g],y=p[v],w=a[v],_=w&&w.prototype;if(_&&(_[l]||s(_,l,d),_[h]||s(_,h,v),c[v]=d,y))for(m in n)_[m]||i(_,m,n[m],!0)}},b0c5:function(e,t,r){"use strict";var n=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},be13:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},c366:function(e,t,r){var n=r("6821"),o=r("9def"),i=r("77f1");e.exports=function(e){return function(t,r,a){var s,c=n(t),u=o(c.length),l=i(a,u);if(e&&r!=r){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}}},c649:function(e,t,r){"use strict";(function(e){r.d(t,"c",function(){return u}),r.d(t,"a",function(){return s}),r.d(t,"b",function(){return i}),r.d(t,"d",function(){return c}),r("a481");var n,o,i="undefined"!=typeof window?window.console:e.console,a=/-(\w)/g,s=(n=function(e){return e.replace(a,function(e,t){return t?t.toUpperCase():""})},o=Object.create(null),function(e){return o[e]||(o[e]=n(e))});function c(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function u(e,t,r){var n=0===r?e.children[0]:e.children[r-1].nextSibling;e.insertBefore(t,n)}}).call(this,r("c8ba"))},c69a:function(e,t,r){e.exports=!r("9e1e")&&!r("79e5")(function(){return 7!=Object.defineProperty(r("230e")("div"),"a",{get:function(){return 7}}).a})},c8ba:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},ca5a:function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},cadf:function(e,t,r){"use strict";var n=r("9c6c"),o=r("d53b"),i=r("84f2"),a=r("6821");e.exports=r("01f9")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},cb7c:function(e,t,r){var n=r("d3f4");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},ce10:function(e,t,r){var n=r("69a8"),o=r("6821"),i=r("c366")(!1),a=r("613b")("IE_PROTO");e.exports=function(e,t){var r,s=o(e),c=0,u=[];for(r in s)r!=a&&n(s,r)&&u.push(r);for(;t.length>c;)n(s,r=t[c++])&&(~i(u,r)||u.push(r));return u}},d2c8:function(e,t,r){var n=r("aae3"),o=r("be13");e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(e))}},d3f4:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},d53b:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},e11e:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(e,t,r){"use strict";var n=r("5ca1"),o=r("9def"),i=r("d2c8"),a="startsWith",s=""[a];n(n.P+n.F*r("5147")(a),"String",{startsWith:function(e){var t=i(this,e,a),r=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return s?s.call(t,n,r):t.slice(r,r+n.length)===n}})},f6fd:function(e,t){!function(e){var t="currentScript",r=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(n){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(e in r)if(r[e].src==t||"interactive"==r[e].readyState)return r[e];return null}}})}(document)},f751:function(e,t,r){var n=r("5ca1");n(n.S+n.F,"Object",{assign:r("7333")})},fa5b:function(e,t,r){e.exports=r("5537")("native-function-to-string",Function.toString)},fab2:function(e,t,r){var n=r("7726").document;e.exports=n&&n.documentElement},fb15:function(e,t,r){"use strict";var n;function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.r(t),"undefined"!=typeof window&&(r("f6fd"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(r.p=n[1])),r("f751"),r("f559"),r("ac6a"),r("cadf"),r("456d"),r("6762"),r("2fdb");var c=r("a352"),u=r.n(c),l=r("c649");function h(e,t){var r=this;this.$nextTick(function(){return r.$emit(e.toLowerCase(),t)})}function d(e){var t=this;return function(r){null!==t.realList&&t["onDrag"+e](r),h.call(t,e,r)}}function p(e){return["transition-group","TransitionGroup"].includes(e)}function f(e,t,r){return e[r]||(t[r]?t[r]():void 0)}var g=["Start","Add","Remove","Update","End"],m=["Choose","Unchoose","Sort","Filter","Clone"],v=["Move"].concat(g,m).map(function(e){return"on"+e}),y=null,w={name:"draggable",inheritAttrs:!1,props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(e){var t=this.$slots.default;this.transitionMode=function(e){if(!e||1!==e.length)return!1;var t=a(e,1)[0].componentOptions;return!!t&&p(t.tag)}(t);var r=function(e,t,r){var n=0,o=0,i=f(t,r,"header");i&&(n=i.length,e=e?[].concat(s(i),s(e)):s(i));var a=f(t,r,"footer");return a&&(o=a.length,e=e?[].concat(s(e),s(a)):s(a)),{children:e,headerOffset:n,footerOffset:o}}(t,this.$slots,this.$scopedSlots),n=r.children,o=r.headerOffset,i=r.footerOffset;this.headerOffset=o,this.footerOffset=i;var c=function(e,t){var r=null,n=function(e,t){r=function(e,t,r){return void 0===r||((e=e||{})[t]=r),e}(r,e,t)};if(n("attrs",Object.keys(e).filter(function(e){return"id"===e||e.startsWith("data-")}).reduce(function(t,r){return t[r]=e[r],t},{})),!t)return r;var o=t.on,i=t.props,a=t.attrs;return n("on",o),n("props",i),Object.assign(r.attrs,a),r}(this.$attrs,this.componentData);return e(this.getTag(),c,n)},created:function(){null!==this.list&&null!==this.value&&l.b.error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&l.b.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&l.b.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var t={};g.forEach(function(r){t["on"+r]=d.call(e,r)}),m.forEach(function(r){t["on"+r]=h.bind(e,r)});var r=Object.keys(this.$attrs).reduce(function(t,r){return t[Object(l.a)(r)]=e.$attrs[r],t},{}),n=Object.assign({},this.options,r,t,{onMove:function(t,r){return e.onDragMove(t,r)}});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new u.a(this.rootContainer,n),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){this.updateOptions(e)},deep:!0},$attrs:{handler:function(e){this.updateOptions(e)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var e=this._vnode.fnOptions;return e&&e.functional},getTag:function(){return this.tag||this.element},updateOptions:function(e){for(var t in e){var r=Object(l.a)(t);-1===v.indexOf(r)&&this._sortable.option(r,e[t])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=function(e,t,r,n){if(!e)return[];var o=e.map(function(e){return e.elm}),i=t.length-n,a=s(t).map(function(e,t){return t>=i?o.length:o.indexOf(e)});return r?a.filter(function(e){return-1!==e}):a}(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode,e.footerOffset)})},getUnderlyingVm:function(e){var t=function(e,t){return e.map(function(e){return e.elm}).indexOf(t)}(this.getChildrenNodes()||[],e);return-1===t?null:{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&p(t.$options._componentTag)?t.$parent:!("realList"in t)&&1===t.$children.length&&"realList"in t.$children[0]?t.$children[0]:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=s(this.value);e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,s(e))};this.alterList(t)},updatePosition:function(e,t){var r=function(r){return r.splice(t,0,r.splice(e,1)[0])};this.alterList(r)},getRelatedContextFromMoveEvent:function(e){var t=e.to,r=e.related,n=this.getUnderlyingPotencialDraggableComponent(t);if(!n)return{component:n};var o=n.realList,i={list:o,component:n};if(t!==r&&o&&n.getUnderlyingVm){var a=n.getUnderlyingVm(r);if(a)return Object.assign(a,i)}return i},getVmIndex:function(e){var t=this.visibleIndexes,r=t.length;return e>r-1?r:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[e].data=null;var t=this.getComponent();t.children=[],t.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),y=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){Object(l.d)(e.item);var r=this.getVmIndex(e.newIndex);this.spliceList(r,0,t),this.computeIndexes();var n={element:t,newIndex:r};this.emitChanges({added:n})}},onDragRemove:function(e){if(Object(l.c)(this.rootContainer,e.item,e.oldIndex),"clone"!==e.pullMode){var t=this.context.index;this.spliceList(t,1);var r={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:r})}else Object(l.d)(e.clone)},onDragUpdate:function(e){Object(l.d)(e.item),Object(l.c)(e.from,e.item,e.oldIndex);var t=this.context.index,r=this.getVmIndex(e.newIndex);this.updatePosition(t,r);var n={element:this.context.element,oldIndex:t,newIndex:r};this.emitChanges({moved:n})},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var r=s(t.to.children).filter(function(e){return"none"!==e.style.display}),n=r.indexOf(t.related),o=e.component.getVmIndex(n);return-1===r.indexOf(y)&&t.willInsertAfter?o+1:o},onDragMove:function(e,t){var r=this.move;if(!r||!this.realList)return!0;var n=this.getRelatedContextFromMoveEvent(e),o=this.context,i=this.computeFutureIndex(n,e);return Object.assign(o,{futureIndex:i}),r(Object.assign({},e,{relatedContext:n,draggedContext:o}),t)},onDragEnd:function(){this.computeIndexes(),y=null}}};"undefined"!=typeof window&&"Vue"in window&&window.Vue.component("draggable",w);var _=w;t.default=_}}).default},e.exports=n(r(671))},462:function(e,t,r){var n=r(673);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r(85).default)("5a0acbfe",n,!0,{sourceMap:!1})},463:function(e,t,r){var n=r(675);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r(85).default)("5598f939",n,!0,{sourceMap:!1})},464:function(e,t,r){var n=r(677);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r(85).default)("15426a80",n,!0,{sourceMap:!1})},465:function(e,t,r){var n=r(680);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r(85).default)("1c5d6c79",n,!0,{sourceMap:!1})},466:function(e,t,r){var n=r(682);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r(85).default)("72984198",n,!0,{sourceMap:!1})},467:function(e,t,r){var n=r(684);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r(85).default)("0d993d46",n,!0,{sourceMap:!1})},468:function(e,t,r){var n=r(686);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r(85).default)("576dfce1",n,!0,{sourceMap:!1})},471:function(e,t,r){(function(r){var n,o,i;o=[],void 0===(i="function"==typeof(n=function(){"use strict";function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){c(n.response,t,r)},n.onerror=function(){},n.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r&&r.global===r?r:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,r){var s=a.URL||a.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?i(c):o(c.href)?n(e,t,r):i(c,c.target="_blank")):(c.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(c.href)},4e4),setTimeout(function(){i(c)},0))}:"msSaveOrOpenBlob"in navigator?function(e,r,a){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),r);else if(o(e))n(e,r,a);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){i(s)})}}:function(e,t,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,r);var i="application/octet-stream"===e.type,c=/constructor/i.test(a.HTMLElement)||a.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&c||s)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},l.readAsDataURL(e)}else{var h=a.URL||a.webkitURL,d=h.createObjectURL(e);o?o.location=d:location.href=d,o=null,setTimeout(function(){h.revokeObjectURL(d)},4e4)}});a.saveAs=c.saveAs=c,e.exports=c})?n.apply(t,o):n)||(e.exports=i)}).call(this,r(35))},584:function(e,t,r){!function(e){"use strict";var t,r,n=function(e){return t?Promise.resolve(t):(r||(r=function(e){return new Promise(function(r,n){window.onGapiLoad=function(){window.gapi.load("auth2",function(){try{t=window.gapi.auth2.init(Object.assign({},e))}catch(e){n({err:"client_id missing or is incorrect, or if you added extra params maybe they are written incorrectly, did you add it to the component or plugin?"})}r(t)})}})}(e)),r)},o=function(e,t){return e?e[t]():Promise.reject({err:"Script not loaded correctly, did you added the plugin or the client_id to the component?"})},i={load:function(e){return Promise.all([n(e),new Promise(function(e,t){if(!document.getElementById("auth2_script_id")){var r=document.createElement("script");r.setAttribute("src","https://apis.google.com/js/platform.js?onload=onGapiLoad"),r.setAttribute("async",!0),r.setAttribute("defer","defer"),r.setAttribute("id","auth2_script_id"),document.head.appendChild(r)}e()})]).then(function(e){return e[0]})},signIn:function(){return o(t,"signIn")},signOut:function(){return o(t,"signOut")},isSignedIn:function(){return o(t.isSignedIn,"get")},currentUser:function(){return o(t.currentUser,"get")},grantOfflineAccess:function(){return o(t,"grantOfflineAccess")}},a=0,s=function(e,t,r,n,o,i,a,s,c,u){"boolean"!=typeof a&&(c=s,s=a,a=!1);var l,h="function"==typeof r?r.options:r;if(e&&e.render&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0,o&&(h.functional=!0)),n&&(h._scopeId=n),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},h._ssrRegister=l):t&&(l=a?function(){t.call(this,u(this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),l)if(h.functional){var d=h.render;h.render=function(e,t){return l.call(t),d(e,t)}}else{var p=h.beforeCreate;h.beforeCreate=p?[].concat(p,l):[l]}return r}({render:function(){var e=this.$createElement,t=this._self._c||e;return this.renderParams&&!this.logoutButton?t("div",{attrs:{id:this.id},on:{click:this.handleClick}}):t("button",{attrs:{id:this.id},on:{click:this.handleClick}},[this._t("default")],2)},staticRenderFns:[]},void 0,{name:"GoogleLogin",props:{params:{type:Object,required:!0},onCurrentUser:{type:Function,default:function(){}},onSuccess:{type:Function,default:function(){}},onFailure:{type:Function,default:function(){}},logoutButton:{type:Boolean,default:!1},renderParams:{type:Object,required:!1}},beforeCreate:function(){this.id="google-signin-btn-".concat(a++)},methods:{handleClick:function(){var e=this,t=this.logoutButton?"signOut":"signIn";i[t]().then(function(t){return e.onSuccess(t)}).catch(function(t){return e.onFailure(t)})}},mounted:function(){var e=this;i.load(this.params).then(function(){e.renderParams&&!1===e.logoutButton&&window.gapi.signin2.render(e.id,e.renderParams),i.isSignedIn()&&e.onCurrentUser(i.currentUser())}).catch(function(e){})}},void 0,!1,void 0,void 0,void 0),c={install:function(e,t){e.GoogleAuth=i.load(t)}};e.GoogleLogin=s,e.LoaderPlugin=c,e.default=s,Object.defineProperty(e,"__esModule",{value:!0})}(t)},585:function(e,t,r){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=37)}([function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(30)("wks"),o=r(34),i=r(0).Symbol,a="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=n},function(e,t,r){var n=r(6);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(13),o=r(29);e.exports=r(5)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){e.exports=!r(23)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports={}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(8);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(0),o=r(3),i=r(10),a=r(4),s=function(e,t,r){var c,u,l,h=e&s.F,d=e&s.G,p=e&s.S,f=e&s.P,g=e&s.B,m=e&s.W,v=d?o:o[t]||(o[t]={}),y=v.prototype,w=d?n:p?n[t]:(n[t]||{}).prototype;for(c in d&&(r=t),r)(u=!h&&w&&void 0!==w[c])&&c in v||(l=u?w[c]:r[c],v[c]=d&&"function"!=typeof w[c]?r[c]:g&&u?i(l,n):m&&w[c]==l?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):f&&"function"==typeof l?i(Function.call,l):l,f&&((v.virtual||(v.virtual={}))[c]=l,e&s.R&&y&&!y[c]&&a(y,c,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(2),o=r(45),i=r(65),a=Object.defineProperty;t.f=r(5)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(6),o=r(0).document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=o(t),this.reject=o(r)}var o=r(8);e.exports.f=function(e){return new n(e)}},function(e,t,r){var n=r(13).f,o=r(12),i=r(1)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,r){var n=r(30)("keys"),o=r(34);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(47),o=r(14);e.exports=function(e){return n(o(e))}},function(e,t,r){var n=r(9),o=r(1)("toStringTag"),i="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),o))?r:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(0).document;e.exports=n&&n.documentElement},function(e,t,r){"use strict";var n=r(26),o=r(11),i=r(60),a=r(4),s=r(12),c=r(7),u=r(50),l=r(17),h=r(56),d=r(1)("iterator"),p=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,r,g,m,v,y){u(r,t,g);var w,_,b,C=function(e){if(!p&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},E=t+" Iterator",T="values"==m,S=!1,k=e.prototype,I=k[d]||k["@@iterator"]||m&&k[m],A=I||C(m),R=m?T?C("entries"):A:void 0,O="Array"==t&&k.entries||I;if(O&&(b=h(O.call(new e)))!==Object.prototype&&b.next&&(l(b,E,!0),n||s(b,d)||a(b,d,f)),T&&I&&"values"!==I.name&&(S=!0,A=function(){return I.call(this)}),n&&!y||!p&&!S&&k[d]||a(k,d,A),c[t]=A,c[E]=f,m)if(w={values:T?A:C("values"),keys:v?A:C("keys"),entries:R},y)for(_ in w)_ in k||i(k,_,w[_]);else o(o.P+o.F*(p||S),t,w);return w}},function(e,t){e.exports=!0},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(2),o=r(6),i=r(16);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(0),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,r){var n=r(2),o=r(8),i=r(1)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[i])?t:o(r)}},function(e,t,r){var n,o,i,a=r(10),s=r(46),c=r(24),u=r(15),l=r(0),h=l.process,d=l.setImmediate,p=l.clearImmediate,f=l.MessageChannel,g=l.Dispatch,m=0,v={},y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},w=function(e){y.call(e.data)};d&&p||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return v[++m]=function(){s("function"==typeof e?e:Function(e),t)},n(m),m},p=function(e){delete v[e]},"process"==r(9)(h)?n=function(e){h.nextTick(a(y,e,1))}:g&&g.now?n=function(e){g.now(a(y,e,1))}:f?(i=(o=new f).port2,o.port1.onmessage=w,n=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",w,!1)):n="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:p}},function(e,t,r){var n=r(19),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){function n(e){r(79)}var o=r(77)(r(38),r(78),n,"data-v-0af1f3c3",null);e.exports=o.exports},function(e,t,r){"use strict";function n(e,t){return new c.a(function(r){window.fbAsyncInit=function(){FB.init({appId:e,xfbml:!1,version:t,cookie:!0}),FB.AppEvents.logPageView(),r("SDK Loaded!")},function(e,t,r){var n=e.getElementsByTagName(t)[0];if(!e.getElementById(r)){var o=e.createElement(t);o.id=r,o.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(o,n)}}(document,"script","facebook-jssdk")})}function o(){return new c.a(function(e){window.FB.getLoginStatus(function(t){e(t)})})}function i(e){return new c.a(function(t){window.FB.login(function(e){return t(e)},e)})}function a(){return new c.a(function(e){window.FB.logout(function(t){return e(t)})})}t.c=n,t.d=o,t.b=i,t.a=a;var s=r(39),c=r.n(s)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"facebookLoginPlugin",function(){return i});var n=r(35),o=r.n(n),i={install:function(e,t){e.component(o.a.name,o.a)}};t.default=o.a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(36),o=r(76),i=r.n(o);t.default={name:"facebook-login",data:function(){return{isWorking:!1,isConnected:!1,icon:i.a}},computed:{getButtonText:function(){switch(this.isConnected){case!0:return this.logoutLabel;case!1:return this.loginLabel;default:return"this is default"}}},methods:{buttonClicked:function(){this.$emit("click"),this.isConnected?this.logout():this.login()},logout:function(){var e=this;this.isWorking=!0,r.i(n.a)().then(function(t){e.isWorking=!1,e.isConnected=!1,e.$emit("logout",t)})},login:function(){var e=this;this.isWorking=!0,r.i(n.b)(this.loginOptions).then(function(t){"connected"===t.status?e.isConnected=!0:e.isConnected=!1,e.isWorking=!1,e.$emit("login",{response:t,FB:window.FB})})}},props:{appId:{type:String,required:!0},version:{type:String,default:"v2.10"},logoutLabel:{type:String,default:"Log out from Facebook"},loginLabel:{type:String,default:"Log In To Facebook"},loginOptions:{type:Object,default:function(){return{scope:"email"}}}},mounted:function(){var e=this;this.isWorking=!0,r.i(n.c)(this.appId,this.version).then(function(e){}).then(function(){return r.i(n.d)()}).then(function(t){"connected"===t.status&&(e.isConnected=!0),e.isWorking=!1,e.$emit("get-initial-status",t),e.$emit("sdk-loaded",{isConnected:e.isConnected,FB:window.FB})})}}},function(e,t,r){e.exports={default:r(40),__esModule:!0}},function(e,t,r){r(68),r(70),r(73),r(69),r(71),r(72),e.exports=r(3).Promise},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(20),o=r(33),i=r(63);e.exports=function(e){return function(t,r,a){var s,c=n(t),u=o(c.length),l=i(a,u);if(e&&r!=r){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}}},function(e,t,r){var n=r(10),o=r(49),i=r(48),a=r(2),s=r(33),c=r(66),u={},l={};t=e.exports=function(e,t,r,h,d){var p,f,g,m,v=d?function(){return e}:c(e),y=n(r,h,t?2:1),w=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(i(v)){for(p=s(e.length);p>w;w++)if((m=t?y(a(f=e[w])[0],f[1]):y(e[w]))===u||m===l)return m}else for(g=v.call(e);!(f=g.next()).done;)if((m=o(g,y,f.value,t))===u||m===l)return m},t.BREAK=u,t.RETURN=l},function(e,t,r){e.exports=!r(5)&&!r(23)(function(){return 7!=Object.defineProperty(r(15)("div"),"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(9);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(7),o=r(1)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},function(e,t,r){var n=r(2);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,r){"use strict";var n=r(54),o=r(29),i=r(17),a={};r(4)(a,r(1)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+" Iterator")}},function(e,t,r){var n=r(1)("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){var n=r(0),o=r(32).set,i=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,c="process"==r(9)(a);e.exports=function(){var e,t,r,u=function(){var n,o;for(c&&(n=a.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(c)r=function(){a.nextTick(u)};else if(i){var l=!0,h=document.createTextNode("");new i(u).observe(h,{characterData:!0}),r=function(){h.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();r=function(){d.then(u)}}else r=function(){o.call(n,u)};return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},function(e,t,r){var n=r(2),o=r(55),i=r(22),a=r(18)("IE_PROTO"),s=function(){},c=function(){var e,t=r(15)("iframe"),n=i.length;for(t.style.display="none",r(24).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c.prototype[i[n]];return c()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=c(),void 0===t?r:o(r,t)}},function(e,t,r){var n=r(13),o=r(2),i=r(58);e.exports=r(5)?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,c=0;s>c;)n.f(e,r=a[c++],t[r]);return e}},function(e,t,r){var n=r(12),o=r(64),i=r(18)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(12),o=r(20),i=r(43)(!1),a=r(18)("IE_PROTO");e.exports=function(e,t){var r,s=o(e),c=0,u=[];for(r in s)r!=a&&n(s,r)&&u.push(r);for(;t.length>c;)n(s,r=t[c++])&&(~i(u,r)||u.push(r));return u}},function(e,t,r){var n=r(57),o=r(22);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t,r){var n=r(4);e.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},function(e,t,r){e.exports=r(4)},function(e,t,r){"use strict";var n=r(0),o=r(3),i=r(13),a=r(5),s=r(1)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(19),o=r(14);e.exports=function(e){return function(t,r){var i,a,s=String(o(t)),c=n(r),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},function(e,t,r){var n=r(19),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=n(e))<0?o(e+t,0):i(e,t)}},function(e,t,r){var n=r(14);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(6);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(21),o=r(1)("iterator"),i=r(7);e.exports=r(3).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[n(e)]}},function(e,t,r){"use strict";var n=r(41),o=r(52),i=r(7),a=r(20);e.exports=r(25)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(e,t){},function(e,t,r){"use strict";var n,o,i,a,s=r(26),c=r(0),u=r(10),l=r(21),h=r(11),d=r(6),p=r(8),f=r(42),g=r(44),m=r(31),v=r(32).set,y=r(53)(),w=r(16),_=r(27),b=r(28),C=c.TypeError,E=c.process,T=c.Promise,S="process"==l(E),k=function(){},I=o=w.f,A=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[r(1)("species")]=function(e){e(k,k)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t}catch(e){}}(),R=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},O=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,o=1==e._s,i=0;r.length>i;)!function(t){var r,i,a=o?t.ok:t.fail,s=t.resolve,c=t.reject,u=t.domain;try{a?(o||(2==e._h&&x(e),e._h=1),!0===a?r=n:(u&&u.enter(),r=a(n),u&&u.exit()),r===t.promise?c(C("Promise-chain cycle")):(i=R(r))?i.call(r,s,c):s(r)):c(n)}catch(e){c(e)}}(r[i++]);e._c=[],e._n=!1,t&&!e._h&&P(e)})}},P=function(e){v.call(c,function(){var t,r,n,o=e._v,i=M(e);if(i&&(t=_(function(){S?E.emit("unhandledRejection",o,e):(r=c.onunhandledrejection)?r({promise:e,reason:o}):(n=c.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=S||M(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},M=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if((t=r[n++]).fail||!M(t.promise))return!1;return!0},x=function(e){v.call(c,function(){var t;S?E.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),O(t,!0))},D=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw C("Promise can't be resolved itself");(t=R(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,u(D,n,1),u(N,n,1))}catch(e){N.call(n,e)}}):(r._v=e,r._s=1,O(r,!1))}catch(e){N.call({_w:r,_d:!1},e)}}};A||(T=function(e){f(this,T,"Promise","_h"),p(e),n.call(this);try{e(u(D,this,1),u(N,this,1))}catch(e){N.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(59)(T.prototype,{then:function(e,t){var r=I(m(this,T));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=S?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&O(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=u(D,e,1),this.reject=u(N,e,1)},w.f=I=function(e){return e===T||e===a?new i(e):o(e)}),h(h.G+h.W+h.F*!A,{Promise:T}),r(17)(T,"Promise"),r(61)("Promise"),a=r(3).Promise,h(h.S+h.F*!A,"Promise",{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(s||!A),"Promise",{resolve:function(e){return b(s&&this===a?T:this,e)}}),h(h.S+h.F*!(A&&r(51)(function(e){T.all(e).catch(k)})),"Promise",{all:function(e){var t=this,r=I(t),n=r.resolve,o=r.reject,i=_(function(){var r=[],i=0,a=1;g(e,!1,function(e){var s=i++,c=!1;r.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,r[s]=e,--a||n(r))},o)}),--a||n(r)});return i.e&&o(i.v),r.promise},race:function(e){var t=this,r=I(t),n=r.reject,o=_(function(){g(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},function(e,t,r){"use strict";var n=r(62)(!0);r(25)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){"use strict";var n=r(11),o=r(3),i=r(0),a=r(31),s=r(28);n(n.P+n.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(11),o=r(16),i=r(27);n(n.S,"Promise",{try:function(e){var t=o.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){r(67);for(var n=r(0),o=r(4),i=r(7),a=r(1)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var u=s[c],l=n[u],h=l&&l.prototype;h&&!h[a]&&o(h,a,u),i[u]=i.Array}},function(e,t,r){(e.exports=r(75)(!1)).push([e.i,"\nbutton[data-v-0af1f3c3] {\n  position: relative;\n  padding: 0 15px 0px 46px;\n  border: none;\n  line-height: 34px;\n  font-size: 16px;\n  color: #FFF;\n  min-width: 225px;\n  background-image: linear-gradient(#4C69BA, #3B55A0);\n}\n.spinner[data-v-0af1f3c3] {\n  box-sizing: border-box;\n  width: 30px;\n  height: 90%;\n  border-radius: 50%;\n  border: 5px solid #f3f3f3;\n  border-top: 5px solid #3498db;\n  -webkit-animation: spin-data-v-0af1f3c3 2s linear infinite;\n          animation: spin-data-v-0af1f3c3 2s linear infinite;\n  position: absolute;\n  left: 5px;\n}\nimg[data-v-0af1f3c3] {\n  position: absolute;\n  top: 3px;\n  left: 10px;\n  width: 30px;\n}\n@-webkit-keyframes spin {\n0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n}\n100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n}\n}\n@keyframes spin-data-v-0af1f3c3 {\n0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n}\n100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n}\n}\n",""])},function(e,t){function r(e,t){var r=e[1]||"",o=e[3];if(!o)return r;if(t&&"function"==typeof btoa){var i=n(o);return[r].concat(o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"})).concat([i]).join("\n")}return[r].join("\n")}function n(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=r(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(n[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmZmYyZjIyZi04ZDdlLTQzNjEtYjM2Zi02NGFiYmI2Nzg3ZDUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTREMzBERkE2NjFBMTFFNDk5OEZFQ0REMkU5OTk0QTQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTREMzBERjk2NjFBMTFFNDk5OEZFQ0REMkU5OTk0QTQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNGZlZTRmMS0wMGNjLTRlZTEtYTY5MS00MjJmOGUxY2VmYjciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ZmZmMmYyMmYtOGQ3ZS00MzYxLWIzNmYtNjRhYmJiNjc4N2Q1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+F7pueQAAAKpJREFUeNpi+P//PwM2jA0AxZWBeA4QP/2PCl5j6CfWYKCYJRB//o8boOhnxOU6RkZGZENZgNQNIFZmwA0YkTksDMQBOyyGvgfic0D8BZsGYg3WQeP/AGItoK9eIPkKRQETkQYLofHvIxuKDRBrMDr4RUgBuQYTBDhTBSjYSDDnGhBr08LFd2kVFPdoZfBdbFmVYJYG8hvQsu8FQubQLFWMGjxq8HAwGCDAAM8dwEI+7fo0AAAAAElFTkSuQmCC"},function(e,t){e.exports=function(e,t,r,n,o){var i,a=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(i=e,a=e.default);var c,u="function"==typeof a?a.options:a;if(t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns),n&&(u._scopeId=n),o?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=c):r&&(c=r),c){var l=u.functional,h=l?u.render:u.beforeCreate;l?u.render=function(e,t){return c.call(t),h(e,t)}:u.beforeCreate=h?[].concat(h,c):[c]}return{esModule:i,exports:a,options:u}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("button",{on:{click:e.buttonClicked}},[e.isWorking?r("div",{staticClass:"spinner"}):e._e(),e._v(" "),e.isWorking?e._e():r("img",{attrs:{src:e.icon}}),e._v(" "+e._s(e.getButtonText)+"\n  ")])])},staticRenderFns:[]}},function(e,t,r){var n=r(74);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),r(80)("05ca2c48",n,!0)},function(e,t,r){function n(e){for(var t=0;t<e.length;t++){var r=e[t],n=l[r.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](r.parts[o]);for(;o<r.parts.length;o++)n.parts.push(i(r.parts[o]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(i(r.parts[o]));l[r.id]={id:r.id,refs:1,parts:a}}}}function o(){var e=document.createElement("style");return e.type="text/css",h.appendChild(e),e}function i(e){var t,r,n=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(n){if(f)return g;n.parentNode.removeChild(n)}if(m){var i=p++;n=d||(d=o()),t=a.bind(null,n,i,!1),r=a.bind(null,n,i,!0)}else n=o(),t=s.bind(null,n),r=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else r()}}function a(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=v(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function s(e,t){var r=t.css,n=t.media,o=t.sourceMap;if(n&&e.setAttribute("media",n),o&&(r+="\n/*# sourceURL="+o.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=r(81),l={},h=c&&(document.head||document.getElementsByTagName("head")[0]),d=null,p=0,f=!1,g=function(){},m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,r){f=r;var o=u(e,t);return n(o),function(t){for(var r=[],i=0;i<o.length;i++){var a=o[i];(s=l[a.id]).refs--,r.push(s)}for(t?n(o=u(e,t)):o=[],i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete l[s.id]}}}};var v=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o],a=i[0],s={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};n[a]?n[a].parts.push(s):r.push(n[a]={id:a,parts:[s]})}return r}}])},586:function(e,t,r){e.exports=function(){"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function r(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function n(e){var t=r(e,"string");return"symbol"==typeof t?t:t+""}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return l(e)||h(e)||d(e)||f()}function l(e){if(Array.isArray(e))return p(e)}function h(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g="undefined"!=typeof window&&void 0!==window.document,m=g?window:{},v=!(!g||!m.document.documentElement)&&"ontouchstart"in m.document.documentElement,y=!!g&&"PointerEvent"in m,w="cropper",_="all",b="crop",C="move",E="zoom",T="e",S="w",k="s",I="n",A="ne",R="nw",O="se",P="sw",M="".concat(w,"-crop"),x="".concat(w,"-disabled"),N="".concat(w,"-hidden"),D="".concat(w,"-hide"),U="".concat(w,"-invisible"),L="".concat(w,"-modal"),B="".concat(w,"-move"),H="".concat(w,"Action"),q="".concat(w,"Preview"),F="crop",z="move",K="none",j="crop",G="cropend",Y="cropmove",W="cropstart",Q="dblclick",V=v?"touchstart":"mousedown",X=v?"touchmove":"mousemove",J=v?"touchend touchcancel":"mouseup",Z=y?"pointerdown":V,$=y?"pointermove":X,ee=y?"pointerup pointercancel":J,te="ready",re="resize",ne="wheel",oe="zoom",ie="image/jpeg",ae=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,se=/^data:/,ce=/^data:image\/jpeg;base64,/,ue=/^img|canvas$/i,le=200,he=100,de={viewMode:0,dragMode:F,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:le,minContainerHeight:he,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},pe='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',fe=Number.isNaN||m.isNaN;function ge(e){return"number"==typeof e&&!fe(e)}var me=function(e){return e>0&&e<1/0};function ve(e){return void 0===e}function ye(e){return"object"===o(e)&&null!==e}var we=Object.prototype.hasOwnProperty;function _e(e){if(!ye(e))return!1;try{var t=e.constructor,r=t.prototype;return t&&r&&we.call(r,"isPrototypeOf")}catch(e){return!1}}function be(e){return"function"==typeof e}var Ce=Array.prototype.slice;function Ee(e){return Array.from?Array.from(e):Ce.call(e)}function Te(e,t){return e&&be(t)&&(Array.isArray(e)||ge(e.length)?Ee(e).forEach(function(r,n){t.call(e,r,n,e)}):ye(e)&&Object.keys(e).forEach(function(r){t.call(e,e[r],r,e)})),e}var Se=Object.assign||function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ye(e)&&r.length>0&&r.forEach(function(t){ye(t)&&Object.keys(t).forEach(function(r){e[r]=t[r]})}),e},ke=/\.\d*(?:0|9){12}\d*$/;function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return ke.test(e)?Math.round(e*t)/t:e}var Ae=/^width|height|left|top|marginLeft|marginTop$/;function Re(e,t){var r=e.style;Te(t,function(e,t){Ae.test(t)&&ge(e)&&(e="".concat(e,"px")),r[t]=e})}function Oe(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function Pe(e,t){if(t)if(ge(e.length))Te(e,function(e){Pe(e,t)});else if(e.classList)e.classList.add(t);else{var r=e.className.trim();r?r.indexOf(t)<0&&(e.className="".concat(r," ").concat(t)):e.className=t}}function Me(e,t){t&&(ge(e.length)?Te(e,function(e){Me(e,t)}):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function xe(e,t,r){t&&(ge(e.length)?Te(e,function(e){xe(e,t,r)}):r?Pe(e,t):Me(e,t))}var Ne=/([a-z\d])([A-Z])/g;function De(e){return e.replace(Ne,"$1-$2").toLowerCase()}function Ue(e,t){return ye(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(De(t)))}function Le(e,t,r){ye(r)?e[t]=r:e.dataset?e.dataset[t]=r:e.setAttribute("data-".concat(De(t)),r)}function Be(e,t){if(ye(e[t]))try{delete e[t]}catch(r){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(r){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(De(t)))}var He=/\s\s*/,qe=function(){var e=!1;if(g){var t=!1,r=function(){},n=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});m.addEventListener("test",r,n),m.removeEventListener("test",r,n)}return e}();function Fe(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r;t.trim().split(He).forEach(function(t){if(!qe){var i=e.listeners;i&&i[t]&&i[t][r]&&(o=i[t][r],delete i[t][r],0===Object.keys(i[t]).length&&delete i[t],0===Object.keys(i).length&&delete e.listeners)}e.removeEventListener(t,o,n)})}function ze(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r;t.trim().split(He).forEach(function(t){if(n.once&&!qe){var i=e.listeners,a=void 0===i?{}:i;o=function(){delete a[t][r],e.removeEventListener(t,o,n);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];r.apply(e,s)},a[t]||(a[t]={}),a[t][r]&&e.removeEventListener(t,a[t][r],n),a[t][r]=o,e.listeners=a}e.addEventListener(t,o,n)})}function Ke(e,t,r){var n;return be(Event)&&be(CustomEvent)?n=new CustomEvent(t,{detail:r,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,r),e.dispatchEvent(n)}function je(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ge=m.location,Ye=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function We(e){var t=e.match(Ye);return null!==t&&(t[1]!==Ge.protocol||t[2]!==Ge.hostname||t[3]!==Ge.port)}function Qe(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function Ve(e){var t=e.rotate,r=e.scaleX,n=e.scaleY,o=e.translateX,i=e.translateY,a=[];ge(o)&&0!==o&&a.push("translateX(".concat(o,"px)")),ge(i)&&0!==i&&a.push("translateY(".concat(i,"px)")),ge(t)&&0!==t&&a.push("rotate(".concat(t,"deg)")),ge(r)&&1!==r&&a.push("scaleX(".concat(r,")")),ge(n)&&1!==n&&a.push("scaleY(".concat(n,")"));var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Xe(e){var r=t({},e),n=0;return Te(e,function(e,t){delete r[t],Te(r,function(t){var r=Math.abs(e.startX-t.startX),o=Math.abs(e.startY-t.startY),i=Math.abs(e.endX-t.endX),a=Math.abs(e.endY-t.endY),s=Math.sqrt(r*r+o*o),c=(Math.sqrt(i*i+a*a)-s)/s;Math.abs(c)>Math.abs(n)&&(n=c)})}),n}function Je(e,r){var n=e.pageX,o=e.pageY,i={endX:n,endY:o};return r?i:t({startX:n,startY:o},i)}function Ze(e){var t=0,r=0,n=0;return Te(e,function(e){var o=e.startX,i=e.startY;t+=o,r+=i,n+=1}),{pageX:t/=n,pageY:r/=n}}function $e(e){var t=e.aspectRatio,r=e.height,n=e.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",i=me(n),a=me(r);if(i&&a){var s=r*t;"contain"===o&&s>n||"cover"===o&&s<n?r=n/t:n=r*t}else i?r=n/t:a&&(n=r*t);return{width:n,height:r}}function et(e){var t=e.width,r=e.height,n=e.degree;if(90==(n=Math.abs(n)%180))return{width:r,height:t};var o=n%90*Math.PI/180,i=Math.sin(o),a=Math.cos(o),s=t*a+r*i,c=t*i+r*a;return n>90?{width:c,height:s}:{width:s,height:c}}function tt(e,t,r,n){var o=t.aspectRatio,i=t.naturalWidth,a=t.naturalHeight,s=t.rotate,c=void 0===s?0:s,l=t.scaleX,h=void 0===l?1:l,d=t.scaleY,p=void 0===d?1:d,f=r.aspectRatio,g=r.naturalWidth,m=r.naturalHeight,v=n.fillColor,y=void 0===v?"transparent":v,w=n.imageSmoothingEnabled,_=void 0===w||w,b=n.imageSmoothingQuality,C=void 0===b?"low":b,E=n.maxWidth,T=void 0===E?1/0:E,S=n.maxHeight,k=void 0===S?1/0:S,I=n.minWidth,A=void 0===I?0:I,R=n.minHeight,O=void 0===R?0:R,P=document.createElement("canvas"),M=P.getContext("2d"),x=$e({aspectRatio:f,width:T,height:k}),N=$e({aspectRatio:f,width:A,height:O},"cover"),D=Math.min(x.width,Math.max(N.width,g)),U=Math.min(x.height,Math.max(N.height,m)),L=$e({aspectRatio:o,width:T,height:k}),B=$e({aspectRatio:o,width:A,height:O},"cover"),H=Math.min(L.width,Math.max(B.width,i)),q=Math.min(L.height,Math.max(B.height,a)),F=[-H/2,-q/2,H,q];return P.width=Ie(D),P.height=Ie(U),M.fillStyle=y,M.fillRect(0,0,D,U),M.save(),M.translate(D/2,U/2),M.rotate(c*Math.PI/180),M.scale(h,p),M.imageSmoothingEnabled=_,M.imageSmoothingQuality=C,M.drawImage.apply(M,[e].concat(u(F.map(function(e){return Math.floor(Ie(e))})))),M.restore(),P}var rt=String.fromCharCode;function nt(e,t,r){var n="";r+=t;for(var o=t;o<r;o+=1)n+=rt(e.getUint8(o));return n}var ot=/^data:.*,/;function it(e){var t=e.replace(ot,""),r=atob(t),n=new ArrayBuffer(r.length),o=new Uint8Array(n);return Te(o,function(e,t){o[t]=r.charCodeAt(t)}),n}function at(e,t){for(var r=[],n=8192,o=new Uint8Array(e);o.length>0;)r.push(rt.apply(null,Ee(o.subarray(0,n)))),o=o.subarray(n);return"data:".concat(t,";base64,").concat(btoa(r.join("")))}function st(e){var t,r=new DataView(e);try{var n,o,i;if(255===r.getUint8(0)&&216===r.getUint8(1))for(var a=r.byteLength,s=2;s+1<a;){if(255===r.getUint8(s)&&225===r.getUint8(s+1)){o=s;break}s+=1}if(o){var c=o+10;if("Exif"===nt(r,o+4,4)){var u=r.getUint16(c);if(((n=18761===u)||19789===u)&&42===r.getUint16(c+2,n)){var l=r.getUint32(c+4,n);l>=8&&(i=c+l)}}}if(i){var h,d,p=r.getUint16(i,n);for(d=0;d<p;d+=1)if(h=i+12*d+2,274===r.getUint16(h,n)){h+=8,t=r.getUint16(h,n),r.setUint16(h,1,n);break}}}catch(e){t=1}return t}function ct(e){var t=0,r=1,n=1;switch(e){case 2:r=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,r=-1;break;case 8:t=-90}return{rotate:t,scaleX:r,scaleY:n}}var ut={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,r=this.container,n=this.cropper,o=Number(t.minContainerWidth),i=Number(t.minContainerHeight);Pe(n,N),Me(e,N);var a={width:Math.max(r.offsetWidth,o>=0?o:le),height:Math.max(r.offsetHeight,i>=0?i:he)};this.containerData=a,Re(n,{width:a.width,height:a.height}),Pe(e,N),Me(n,N)},initCanvas:function(){var e=this.containerData,t=this.imageData,r=this.options.viewMode,n=Math.abs(t.rotate)%180==90,o=n?t.naturalHeight:t.naturalWidth,i=n?t.naturalWidth:t.naturalHeight,a=o/i,s=e.width,c=e.height;e.height*a>e.width?3===r?s=e.height*a:c=e.width/a:3===r?c=e.width/a:s=e.height*a;var u={aspectRatio:a,naturalWidth:o,naturalHeight:i,width:s,height:c};this.canvasData=u,this.limited=1===r||2===r,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(e.width-u.width)/2,u.top=(e.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=Se({},u)},limitCanvas:function(e,t){var r=this.options,n=this.containerData,o=this.canvasData,i=this.cropBoxData,a=r.viewMode,s=o.aspectRatio,c=this.cropped&&i;if(e){var u=Number(r.minCanvasWidth)||0,l=Number(r.minCanvasHeight)||0;a>1?(u=Math.max(u,n.width),l=Math.max(l,n.height),3===a&&(l*s>u?u=l*s:l=u/s)):a>0&&(u?u=Math.max(u,c?i.width:0):l?l=Math.max(l,c?i.height:0):c&&(u=i.width,(l=i.height)*s>u?u=l*s:l=u/s));var h=$e({aspectRatio:s,width:u,height:l});u=h.width,l=h.height,o.minWidth=u,o.minHeight=l,o.maxWidth=1/0,o.maxHeight=1/0}if(t)if(a>(c?0:1)){var d=n.width-o.width,p=n.height-o.height;o.minLeft=Math.min(0,d),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,d),o.maxTop=Math.max(0,p),c&&this.limited&&(o.minLeft=Math.min(i.left,i.left+(i.width-o.width)),o.minTop=Math.min(i.top,i.top+(i.height-o.height)),o.maxLeft=i.left,o.maxTop=i.top,2===a&&(o.width>=n.width&&(o.minLeft=Math.min(0,d),o.maxLeft=Math.max(0,d)),o.height>=n.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=n.width,o.maxTop=n.height},renderCanvas:function(e,t){var r=this.canvasData,n=this.imageData;if(t){var o=et({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),i=o.width,a=o.height,s=r.width*(i/r.naturalWidth),c=r.height*(a/r.naturalHeight);r.left-=(s-r.width)/2,r.top-=(c-r.height)/2,r.width=s,r.height=c,r.aspectRatio=i/a,r.naturalWidth=i,r.naturalHeight=a,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,Re(this.canvas,Se({width:r.width,height:r.height},Ve({translateX:r.left,translateY:r.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,r=this.imageData,n=r.naturalWidth*(t.width/t.naturalWidth),o=r.naturalHeight*(t.height/t.naturalHeight);Se(r,{width:n,height:o,left:(t.width-n)/2,top:(t.height-o)/2}),Re(this.image,Se({width:r.width,height:r.height},Ve(Se({translateX:r.left,translateY:r.top},r)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,r=e.aspectRatio||e.initialAspectRatio,n=Number(e.autoCropArea)||.8,o={width:t.width,height:t.height};r&&(t.height*r>t.width?o.height=o.width/r:o.width=o.height*r),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*n),o.height=Math.max(o.minHeight,o.height*n),o.left=t.left+(t.width-o.width)/2,o.top=t.top+(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=Se({},o)},limitCropBox:function(e,t){var r=this.options,n=this.containerData,o=this.canvasData,i=this.cropBoxData,a=this.limited,s=r.aspectRatio;if(e){var c=Number(r.minCropBoxWidth)||0,u=Number(r.minCropBoxHeight)||0,l=a?Math.min(n.width,o.width,o.width+o.left,n.width-o.left):n.width,h=a?Math.min(n.height,o.height,o.height+o.top,n.height-o.top):n.height;c=Math.min(c,n.width),u=Math.min(u,n.height),s&&(c&&u?u*s>c?u=c/s:c=u*s:c?u=c/s:u&&(c=u*s),h*s>l?h=l/s:l=h*s),i.minWidth=Math.min(c,l),i.minHeight=Math.min(u,h),i.maxWidth=l,i.maxHeight=h}t&&(a?(i.minLeft=Math.max(0,o.left),i.minTop=Math.max(0,o.top),i.maxLeft=Math.min(n.width,o.left+o.width)-i.width,i.maxTop=Math.min(n.height,o.top+o.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=n.width-i.width,i.maxTop=n.height-i.height))},renderCropBox:function(){var e=this.options,t=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,e.movable&&e.cropBoxMovable&&Le(this.face,H,r.width>=t.width&&r.height>=t.height?C:_),Re(this.cropBox,Se({width:r.width,height:r.height},Ve({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ke(this.element,j,this.getData())}},lt={initPreview:function(){var e=this.element,t=this.crossOrigin,r=this.options.preview,n=t?this.crossOriginUrl:this.url,o=e.alt||"The image to preview",i=document.createElement("img");if(t&&(i.crossOrigin=t),i.src=n,i.alt=o,this.viewBox.appendChild(i),this.viewBoxImage=i,r){var a=r;"string"==typeof r?a=e.ownerDocument.querySelectorAll(r):r.querySelector&&(a=[r]),this.previews=a,Te(a,function(e){var r=document.createElement("img");Le(e,q,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(r.crossOrigin=t),r.src=n,r.alt=o,r.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(r)})}},resetPreview:function(){Te(this.previews,function(e){var t=Ue(e,q);Re(e,{width:t.width,height:t.height}),e.innerHTML=t.html,Be(e,q)})},preview:function(){var e=this.imageData,t=this.canvasData,r=this.cropBoxData,n=r.width,o=r.height,i=e.width,a=e.height,s=r.left-t.left-e.left,c=r.top-t.top-e.top;this.cropped&&!this.disabled&&(Re(this.viewBoxImage,Se({width:i,height:a},Ve(Se({translateX:-s,translateY:-c},e)))),Te(this.previews,function(t){var r=Ue(t,q),u=r.width,l=r.height,h=u,d=l,p=1;n&&(d=o*(p=u/n)),o&&d>l&&(h=n*(p=l/o),d=l),Re(t,{width:h,height:d}),Re(t.getElementsByTagName("img")[0],Se({width:i*p,height:a*p},Ve(Se({translateX:-s*p,translateY:-c*p},e))))}))}},ht={bind:function(){var e=this.element,t=this.options,r=this.cropper;be(t.cropstart)&&ze(e,W,t.cropstart),be(t.cropmove)&&ze(e,Y,t.cropmove),be(t.cropend)&&ze(e,G,t.cropend),be(t.crop)&&ze(e,j,t.crop),be(t.zoom)&&ze(e,oe,t.zoom),ze(r,Z,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&ze(r,ne,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&ze(r,Q,this.onDblclick=this.dblclick.bind(this)),ze(e.ownerDocument,$,this.onCropMove=this.cropMove.bind(this)),ze(e.ownerDocument,ee,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&ze(window,re,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,r=this.cropper;be(t.cropstart)&&Fe(e,W,t.cropstart),be(t.cropmove)&&Fe(e,Y,t.cropmove),be(t.cropend)&&Fe(e,G,t.cropend),be(t.crop)&&Fe(e,j,t.crop),be(t.zoom)&&Fe(e,oe,t.zoom),Fe(r,Z,this.onCropStart),t.zoomable&&t.zoomOnWheel&&Fe(r,ne,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Fe(r,Q,this.onDblclick),Fe(e.ownerDocument,$,this.onCropMove),Fe(e.ownerDocument,ee,this.onCropEnd),t.responsive&&Fe(window,re,this.onResize)}},dt={resize:function(){if(!this.disabled){var e,t,r=this.options,n=this.container,o=this.containerData,i=n.offsetWidth/o.width,a=n.offsetHeight/o.height,s=Math.abs(i-1)>Math.abs(a-1)?i:a;1!==s&&(r.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),r.restore&&(this.setCanvasData(Te(e,function(t,r){e[r]=t*s})),this.setCropBoxData(Te(t,function(e,r){t[r]=e*s}))))}},dblclick:function(){this.disabled||this.options.dragMode===K||this.setDragMode(Oe(this.dragBox,M)?z:F)},wheel:function(e){var t=this,r=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?n=e.deltaY>0?1:-1:e.wheelDelta?n=-e.wheelDelta/120:e.detail&&(n=e.detail>0?1:-1),this.zoom(-n*r,e)))},cropStart:function(e){var t=e.buttons,r=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(ge(t)&&1!==t||ge(r)&&0!==r||e.ctrlKey))){var n,o=this.options,i=this.pointers;e.changedTouches?Te(e.changedTouches,function(e){i[e.identifier]=Je(e)}):i[e.pointerId||0]=Je(e),n=Object.keys(i).length>1&&o.zoomable&&o.zoomOnTouch?E:Ue(e.target,H),ae.test(n)&&!1!==Ke(this.element,W,{originalEvent:e,action:n})&&(e.preventDefault(),this.action=n,this.cropping=!1,n===b&&(this.cropping=!0,Pe(this.dragBox,L)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var r=this.pointers;e.preventDefault(),!1!==Ke(this.element,Y,{originalEvent:e,action:t})&&(e.changedTouches?Te(e.changedTouches,function(e){Se(r[e.identifier]||{},Je(e,!0))}):Se(r[e.pointerId||0]||{},Je(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,r=this.pointers;e.changedTouches?Te(e.changedTouches,function(e){delete r[e.identifier]}):delete r[e.pointerId||0],t&&(e.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,xe(this.dragBox,L,this.cropped&&this.options.modal)),Ke(this.element,G,{originalEvent:e,action:t}))}}},pt={change:function(e){var t,r=this.options,n=this.canvasData,o=this.containerData,i=this.cropBoxData,a=this.pointers,s=this.action,c=r.aspectRatio,u=i.left,l=i.top,h=i.width,d=i.height,p=u+h,f=l+d,g=0,m=0,v=o.width,y=o.height,w=!0;!c&&e.shiftKey&&(c=h&&d?h/d:1),this.limited&&(g=i.minLeft,m=i.minTop,v=g+Math.min(o.width,n.width,n.left+n.width),y=m+Math.min(o.height,n.height,n.top+n.height));var M=a[Object.keys(a)[0]],x={x:M.endX-M.startX,y:M.endY-M.startY},D=function(e){switch(e){case T:p+x.x>v&&(x.x=v-p);break;case S:u+x.x<g&&(x.x=g-u);break;case I:l+x.y<m&&(x.y=m-l);break;case k:f+x.y>y&&(x.y=y-f)}};switch(s){case _:u+=x.x,l+=x.y;break;case T:if(x.x>=0&&(p>=v||c&&(l<=m||f>=y))){w=!1;break}D(T),(h+=x.x)<0&&(s=S,u-=h=-h),c&&(d=h/c,l+=(i.height-d)/2);break;case I:if(x.y<=0&&(l<=m||c&&(u<=g||p>=v))){w=!1;break}D(I),d-=x.y,l+=x.y,d<0&&(s=k,l-=d=-d),c&&(h=d*c,u+=(i.width-h)/2);break;case S:if(x.x<=0&&(u<=g||c&&(l<=m||f>=y))){w=!1;break}D(S),h-=x.x,u+=x.x,h<0&&(s=T,u-=h=-h),c&&(d=h/c,l+=(i.height-d)/2);break;case k:if(x.y>=0&&(f>=y||c&&(u<=g||p>=v))){w=!1;break}D(k),(d+=x.y)<0&&(s=I,l-=d=-d),c&&(h=d*c,u+=(i.width-h)/2);break;case A:if(c){if(x.y<=0&&(l<=m||p>=v)){w=!1;break}D(I),d-=x.y,l+=x.y,h=d*c}else D(I),D(T),x.x>=0?p<v?h+=x.x:x.y<=0&&l<=m&&(w=!1):h+=x.x,x.y<=0?l>m&&(d-=x.y,l+=x.y):(d-=x.y,l+=x.y);h<0&&d<0?(s=P,l-=d=-d,u-=h=-h):h<0?(s=R,u-=h=-h):d<0&&(s=O,l-=d=-d);break;case R:if(c){if(x.y<=0&&(l<=m||u<=g)){w=!1;break}D(I),d-=x.y,l+=x.y,h=d*c,u+=i.width-h}else D(I),D(S),x.x<=0?u>g?(h-=x.x,u+=x.x):x.y<=0&&l<=m&&(w=!1):(h-=x.x,u+=x.x),x.y<=0?l>m&&(d-=x.y,l+=x.y):(d-=x.y,l+=x.y);h<0&&d<0?(s=O,l-=d=-d,u-=h=-h):h<0?(s=A,u-=h=-h):d<0&&(s=P,l-=d=-d);break;case P:if(c){if(x.x<=0&&(u<=g||f>=y)){w=!1;break}D(S),h-=x.x,u+=x.x,d=h/c}else D(k),D(S),x.x<=0?u>g?(h-=x.x,u+=x.x):x.y>=0&&f>=y&&(w=!1):(h-=x.x,u+=x.x),x.y>=0?f<y&&(d+=x.y):d+=x.y;h<0&&d<0?(s=A,l-=d=-d,u-=h=-h):h<0?(s=O,u-=h=-h):d<0&&(s=R,l-=d=-d);break;case O:if(c){if(x.x>=0&&(p>=v||f>=y)){w=!1;break}D(T),d=(h+=x.x)/c}else D(k),D(T),x.x>=0?p<v?h+=x.x:x.y>=0&&f>=y&&(w=!1):h+=x.x,x.y>=0?f<y&&(d+=x.y):d+=x.y;h<0&&d<0?(s=R,l-=d=-d,u-=h=-h):h<0?(s=P,u-=h=-h):d<0&&(s=A,l-=d=-d);break;case C:this.move(x.x,x.y),w=!1;break;case E:this.zoom(Xe(a),e),w=!1;break;case b:if(!x.x||!x.y){w=!1;break}t=je(this.cropper),u=M.startX-t.left,l=M.startY-t.top,h=i.minWidth,d=i.minHeight,x.x>0?s=x.y>0?O:A:x.x<0&&(u-=h,s=x.y>0?P:R),x.y<0&&(l-=d),this.cropped||(Me(this.cropBox,N),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}w&&(i.width=h,i.height=d,i.left=u,i.top=l,this.action=s,this.renderCropBox()),Te(a,function(e){e.startX=e.endX,e.startY=e.endY})}},ft={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Pe(this.dragBox,L),Me(this.cropBox,N),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Se({},this.initialImageData),this.canvasData=Se({},this.initialCanvasData),this.cropBoxData=Se({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Se(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Me(this.dragBox,L),Pe(this.cropBox,N)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Te(this.previews,function(t){t.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Me(this.cropper,x)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Pe(this.cropper,x)),this},destroy:function(){var e=this.element;return e[w]?(e[w]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=this.canvasData,n=r.left,o=r.top;return this.moveTo(ve(e)?e:n+Number(e),ve(t)?t:o+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=this.canvasData,n=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(ge(e)&&(r.left=e,n=!0),ge(t)&&(r.top=t,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(e,t){var r=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(r.width*e/r.naturalWidth,null,t)},zoomTo:function(e,t,r){var n=this.options,o=this.canvasData,i=o.width,a=o.height,s=o.naturalWidth,c=o.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&n.zoomable){var u=s*e,l=c*e;if(!1===Ke(this.element,oe,{ratio:e,oldRatio:i/s,originalEvent:r}))return this;if(r){var h=this.pointers,d=je(this.cropper),p=h&&Object.keys(h).length?Ze(h):{pageX:r.pageX,pageY:r.pageY};o.left-=(u-i)*((p.pageX-d.left-o.left)/i),o.top-=(l-a)*((p.pageY-d.top-o.top)/a)}else _e(t)&&ge(t.x)&&ge(t.y)?(o.left-=(u-i)*((t.x-o.left)/i),o.top-=(l-a)*((t.y-o.top)/a)):(o.left-=(u-i)/2,o.top-=(l-a)/2);o.width=u,o.height=l,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return ge(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,ge(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(ge(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=this.imageData,n=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(ge(e)&&(r.scaleX=e,n=!0),ge(t)&&(r.scaleY=t,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.options,n=this.imageData,o=this.canvasData,i=this.cropBoxData;if(this.ready&&this.cropped){e={x:i.left-o.left,y:i.top-o.top,width:i.width,height:i.height};var a=n.width/n.naturalWidth;if(Te(e,function(t,r){e[r]=t/a}),t){var s=Math.round(e.y+e.height),c=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=c-e.x,e.height=s-e.y}}else e={x:0,y:0,width:0,height:0};return r.rotatable&&(e.rotate=n.rotate||0),r.scalable&&(e.scaleX=n.scaleX||1,e.scaleY=n.scaleY||1),e},setData:function(e){var t=this.options,r=this.imageData,n=this.canvasData,o={};if(this.ready&&!this.disabled&&_e(e)){var i=!1;t.rotatable&&ge(e.rotate)&&e.rotate!==r.rotate&&(r.rotate=e.rotate,i=!0),t.scalable&&(ge(e.scaleX)&&e.scaleX!==r.scaleX&&(r.scaleX=e.scaleX,i=!0),ge(e.scaleY)&&e.scaleY!==r.scaleY&&(r.scaleY=e.scaleY,i=!0)),i&&this.renderCanvas(!0,!0);var a=r.width/r.naturalWidth;ge(e.x)&&(o.left=e.x*a+n.left),ge(e.y)&&(o.top=e.y*a+n.top),ge(e.width)&&(o.width=e.width*a),ge(e.height)&&(o.height=e.height*a),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?Se({},this.containerData):{}},getImageData:function(){return this.sized?Se({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&Te(["left","top","width","height","naturalWidth","naturalHeight"],function(r){t[r]=e[r]}),t},setCanvasData:function(e){var t=this.canvasData,r=t.aspectRatio;return this.ready&&!this.disabled&&_e(e)&&(ge(e.left)&&(t.left=e.left),ge(e.top)&&(t.top=e.top),ge(e.width)?(t.width=e.width,t.height=e.width/r):ge(e.height)&&(t.height=e.height,t.width=e.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,r,n=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&_e(e)&&(ge(e.left)&&(n.left=e.left),ge(e.top)&&(n.top=e.top),ge(e.width)&&e.width!==n.width&&(t=!0,n.width=e.width),ge(e.height)&&e.height!==n.height&&(r=!0,n.height=e.height),o&&(t?n.height=n.width/o:r&&(n.width=n.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,r=tt(this.image,this.imageData,t,e);if(!this.cropped)return r;var n=this.getData(e.rounded),o=n.x,i=n.y,a=n.width,s=n.height,c=r.width/Math.floor(t.naturalWidth);1!==c&&(o*=c,i*=c,a*=c,s*=c);var l=a/s,h=$e({aspectRatio:l,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),d=$e({aspectRatio:l,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=$e({aspectRatio:l,width:e.width||(1!==c?r.width:a),height:e.height||(1!==c?r.height:s)}),f=p.width,g=p.height;f=Math.min(h.width,Math.max(d.width,f)),g=Math.min(h.height,Math.max(d.height,g));var m=document.createElement("canvas"),v=m.getContext("2d");m.width=Ie(f),m.height=Ie(g),v.fillStyle=e.fillColor||"transparent",v.fillRect(0,0,f,g);var y=e.imageSmoothingEnabled,w=void 0===y||y,_=e.imageSmoothingQuality;v.imageSmoothingEnabled=w,_&&(v.imageSmoothingQuality=_);var b,C,E,T,S,k,I=r.width,A=r.height,R=o,O=i;R<=-a||R>I?(R=0,b=0,E=0,S=0):R<=0?(E=-R,R=0,S=b=Math.min(I,a+R)):R<=I&&(E=0,S=b=Math.min(a,I-R)),b<=0||O<=-s||O>A?(O=0,C=0,T=0,k=0):O<=0?(T=-O,O=0,k=C=Math.min(A,s+O)):O<=A&&(T=0,k=C=Math.min(s,A-O));var P=[R,O,b,C];if(S>0&&k>0){var M=f/a;P.push(E*M,T*M,S*M,k*M)}return v.drawImage.apply(v,[r].concat(u(P.map(function(e){return Math.floor(Ie(e))})))),m},setAspectRatio:function(e){var t=this.options;return this.disabled||ve(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,r=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var o=e===F,i=t.movable&&e===z;e=o||i?e:K,t.dragMode=e,Le(r,H,e),xe(r,M,o),xe(r,B,i),t.cropBoxMovable||(Le(n,H,e),xe(n,M,o),xe(n,B,i))}return this}},gt=m.Cropper,mt=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(this,e),!t||!ue.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=Se({},de,_e(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return s(e,[{key:"init",value:function(){var e,t=this.element,r=t.tagName.toLowerCase();if(!t[w]){if(t[w]=this,"img"===r){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===r&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var r=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(se.test(e))ce.test(e)?this.read(it(e)):this.clone();else{var o=new XMLHttpRequest,i=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=i,o.onerror=i,o.ontimeout=i,o.onprogress=function(){o.getResponseHeader("content-type")!==ie&&o.abort()},o.onload=function(){t.read(o.response)},o.onloadend=function(){t.reloading=!1,t.xhr=null},n.checkCrossOrigin&&We(e)&&r.crossOrigin&&(e=Qe(e)),o.open("GET",e,!0),o.responseType="arraybuffer",o.withCredentials="use-credentials"===r.crossOrigin,o.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,r=this.imageData,n=st(e),o=0,i=1,a=1;if(n>1){this.url=at(e,ie);var s=ct(n);o=s.rotate,i=s.scaleX,a=s.scaleY}t.rotatable&&(r.rotate=o),t.scalable&&(r.scaleX=i,r.scaleY=a),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,r=e.crossOrigin,n=t;this.options.checkCrossOrigin&&We(t)&&(r||(r="anonymous"),n=Qe(t)),this.crossOrigin=r,this.crossOriginUrl=n;var o=document.createElement("img");r&&(o.crossOrigin=r),o.src=n||t,o.alt=e.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),Pe(o,D),e.parentNode.insertBefore(o,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var r=m.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(m.navigator.userAgent),n=function(t,r){Se(e.imageData,{naturalWidth:t,naturalHeight:r,aspectRatio:t/r}),e.initialImageData=Se({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||r){var o=document.createElement("img"),i=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){n(o.width,o.height),r||i.removeChild(o)},o.src=t.src,r||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",i.appendChild(o))}else n(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,r=this.image,n=e.parentNode,o=document.createElement("div");o.innerHTML=pe;var i=o.querySelector(".".concat(w,"-container")),a=i.querySelector(".".concat(w,"-canvas")),s=i.querySelector(".".concat(w,"-drag-box")),c=i.querySelector(".".concat(w,"-crop-box")),u=c.querySelector(".".concat(w,"-face"));this.container=n,this.cropper=i,this.canvas=a,this.dragBox=s,this.cropBox=c,this.viewBox=i.querySelector(".".concat(w,"-view-box")),this.face=u,a.appendChild(r),Pe(e,N),n.insertBefore(i,e.nextSibling),Me(r,D),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,Pe(c,N),t.guides||Pe(c.getElementsByClassName("".concat(w,"-dashed")),N),t.center||Pe(c.getElementsByClassName("".concat(w,"-center")),N),t.background&&Pe(i,"".concat(w,"-bg")),t.highlight||Pe(u,U),t.cropBoxMovable&&(Pe(u,B),Le(u,H,_)),t.cropBoxResizable||(Pe(c.getElementsByClassName("".concat(w,"-line")),N),Pe(c.getElementsByClassName("".concat(w,"-point")),N)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),be(t.ready)&&ze(e,te,t.ready,{once:!0}),Ke(e,te)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var e=this.cropper.parentNode;e&&e.removeChild(this.cropper),Me(this.element,N)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=gt,e}},{key:"setDefaults",value:function(e){Se(de,_e(e)&&e)}}])}();return Se(mt.prototype,ut,lt,ht,dt,pt,ft),mt}()},587:function(e,t,r){var n=r(588);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r(85).default)("8f215f56",n,!0,{sourceMap:!1})},588:function(e,t,r){var n=r(84)(function(e){return e[1]});n.push([e.i,'/*!\n * Cropper.js v1.6.2\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2024-04-21T07:43:02.731Z\n */.cropper-container{direction:ltr;font-size:0;line-height:0;position:relative;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.cropper-container img{backface-visibility:hidden;display:block;height:100%;image-orientation:0deg;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.cropper-canvas,.cropper-crop-box,.cropper-drag-box,.cropper-modal,.cropper-wrap-box{bottom:0;left:0;position:absolute;right:0;top:0}.cropper-canvas,.cropper-wrap-box{overflow:hidden}.cropper-drag-box{background-color:#fff;opacity:0}.cropper-modal{background-color:#000;opacity:.5}.cropper-view-box{display:block;height:100%;outline:1px solid #39f;outline-color:rgba(51,153,255,.75);overflow:hidden;width:100%}.cropper-dashed{border:0 dashed #eee;display:block;opacity:.5;position:absolute}.cropper-dashed.dashed-h{border-bottom-width:1px;border-top-width:1px;height:33.33333%;left:0;top:33.33333%;width:100%}.cropper-dashed.dashed-v{border-left-width:1px;border-right-width:1px;height:100%;left:33.33333%;top:0;width:33.33333%}.cropper-center{display:block;height:0;left:50%;opacity:.75;position:absolute;top:50%;width:0}.cropper-center:after,.cropper-center:before{background-color:#eee;content:" ";display:block;position:absolute}.cropper-center:before{height:1px;left:-3px;top:0;width:7px}.cropper-center:after{height:7px;left:0;top:-3px;width:1px}.cropper-face,.cropper-line,.cropper-point{display:block;height:100%;opacity:.1;position:absolute;width:100%}.cropper-face{background-color:#fff;left:0;top:0}.cropper-line{background-color:#39f}.cropper-line.line-e{cursor:ew-resize;right:-3px;top:0;width:5px}.cropper-line.line-n{cursor:ns-resize;height:5px;left:0;top:-3px}.cropper-line.line-w{cursor:ew-resize;left:-3px;top:0;width:5px}.cropper-line.line-s{bottom:-3px;cursor:ns-resize;height:5px;left:0}.cropper-point{background-color:#39f;height:5px;opacity:.75;width:5px}.cropper-point.point-e{cursor:ew-resize;margin-top:-3px;right:-3px;top:50%}.cropper-point.point-n{cursor:ns-resize;left:50%;margin-left:-3px;top:-3px}.cropper-point.point-w{cursor:ew-resize;left:-3px;margin-top:-3px;top:50%}.cropper-point.point-s{bottom:-3px;cursor:s-resize;left:50%;margin-left:-3px}.cropper-point.point-ne{cursor:nesw-resize;right:-3px;top:-3px}.cropper-point.point-nw{cursor:nwse-resize;left:-3px;top:-3px}.cropper-point.point-sw{bottom:-3px;cursor:nesw-resize;left:-3px}.cropper-point.point-se{bottom:-3px;cursor:nwse-resize;height:20px;opacity:1;right:-3px;width:20px}@media (min-width:768px){.cropper-point.point-se{height:15px;width:15px}}@media (min-width:992px){.cropper-point.point-se{height:10px;width:10px}}@media (min-width:1200px){.cropper-point.point-se{height:5px;opacity:.75;width:5px}}.cropper-point.point-se:before{background-color:#39f;bottom:-50%;content:" ";display:block;height:200%;opacity:0;position:absolute;right:-50%;width:200%}.cropper-invisible{opacity:0}.cropper-bg{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC")}.cropper-hide{display:block;height:0;position:absolute;width:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}',""]),n.locals={},e.exports=n},603:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFileToBuffer=function(e){var t,r,n=new FileReader,o=new Promise(function(e,n){t=e,r=n});return n.onload=function(){return t(new Uint8Array(n.result))},n.onerror=function(e){return r(e)},n.readAsArrayBuffer(e),o},t.fetchFileAsBuffer=function(e){if(!e)throw new Error("Argument should be valid url string.");var t,r,n=new Promise(function(e,n){t=e,r=n}),o=new XMLHttpRequest;return o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){o.response?t(new Uint8Array(o.response)):r("Empty response or other exceptions.")},o.onerror=function(e){return r(e)},o.send(),n}},604:function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var i=r(605);t.parseV1Tag=i.default;var a=r(606);t.parseV2Tag=a.default,r(609).default(),t.parse=function(e){var t=i.default(e),r=a.default(e);if(!r&&!t)return!1;var s={version:!1},c=r||s,u=c.version,l=o(c,["version"]),h=t||s,d=h.version,p=o(h,["version"]),f=n({version:{v1:d,v2:u}},p,l);return p.comments&&(f.comments=[{value:p.comments}].concat(l&&l.comments?l.comments:[])),f}},605:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(395),o=r(396);t.default=function(e){if(!e||e.length<128)return!1;e=e.slice(e.length-128);var t={version:{major:1,minor:0}};if("TAG"!==o.readBytesToUTF8(e,3))return!1;var r=/(^[\s0]+|[\s0]+$)/;return t.title=o.readBytesToUTF8(e.slice(3),30).replace(r,""),t.artist=o.readBytesToUTF8(e.slice(33),30).replace(r,""),t.album=o.readBytesToUTF8(e.slice(63),30).replace(r,""),t.year=o.readBytesToUTF8(e.slice(93),4).replace(r,""),0===e[125]?(t.comments=o.readBytesToUTF8(e.slice(97),28).replace(r,""),t.version.minor=1,t.track=e[126]):t.comments=o.readBytesToUTF8(e.slice(97),30).replace(r,""),t.genre=n.default[e[127]]||"",t}},606:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(607),o=r(395),i=r(608),a=r(396);function s(e){return 2097152*(127&e[0])+16384*(127&e[1])+128*(127&e[2])+(127&e[3])}function c(e){return e.length<4?0:16777216*e[0]+65536*e[1]+256*e[2]+e[3]}function u(e,t,r){var s={id:null,tag:null,value:null},c={id:a.readBytesToUTF8(e,4),type:null,size:r,flags:[e[8],e[9]]};if(c.type=c.id[0],s.id=c.id,0!==c.flags[1])return s;if(!(c.id in n.default))return s;s.tag=n.default[c.id];var u=0,l=0,h=0,d=0;if("T"===c.type){if(u=e[10],"TXXX"===c.id){l=11,h=a.getEndpointOfBytes(e,u,l)-l;var p={description:a.readBytesToString(e.slice(l),u,h),value:""};l+=h+1,l=a.skipPaddingZeros(e,l),p.value=a.readBytesToString(e.slice(l),u),s.value=p}else if(s.value=a.readBytesToString(e.slice(11),u),"TCON"===c.id&&null!==s.value)if("("===s.value[0]){var f=s.value.match(/\(\d+\)/g);f&&(s.value=f.map(function(e){return o.default[+e.slice(1,-1)]}).join(","))}else{var g=parseInt(s.value,10);isNaN(g)||(s.value=o.default[g])}}else if("W"===c.type)"WXXX"===c.id&&0===e[10]?s.value=a.readBytesToISO8859(e.slice(11)):s.value=a.readBytesToISO8859(e.slice(10));else if("COMM"===c.id||"USLT"===c.id){u=e[10],l=14,h=0;var m=a.readBytesToISO8859(e.slice(11),3);h=a.getEndpointOfBytes(e,u,l)-l;var v=a.readBytesToString(e.slice(l),u,h);l=a.skipPaddingZeros(e,l+h+1),s.value={language:m,description:v,value:a.readBytesToString(e.slice(l),u)}}else if("APIC"===c.id){u=e[10];var y={type:null,mime:null,description:null,data:null};for(l=11,h=a.getEndpointOfBytes(e,0,l)-l,y.mime=a.readBytesToString(e.slice(l),0,h),y.type=i.default[e[l+h+1]]||"other",l+=h+2,h=0,d=l;;d++)if(0===e[d]){h=d-l;break}y.description=0===h?null:a.readBytesToString(e.slice(l),u,h),l=a.skipPaddingZeros(e,l+h+1),y.data=e.slice(l),s.value=y}else if("IPLS"===c.id)u=e[10],s.value=a.readBytesToString(e.slice(11),u);else if("OWNE"===c.id){u=e[10],l=11,h=a.getEndpointOfBytes(e,u,l);var w=a.readBytesToISO8859(e.slice(l),h);l+=h+1;var _=a.readBytesToISO8859(e.slice(l),8);l+=8,s.value={pricePayed:w,dateOfPurch:_,seller:a.readBytesToString(e.slice(l),u)}}return s}t.default=function(e){if(!e||e.length<20)return!1;var t=function(e){if(!e||e.length<10)return!1;var t=a.readBytesToUTF8(e,3);if("ID3"!==t)return!1;var r=e[5],n={major:2,minor:e[3],revision:e[4],flags:{unsync:!!(128&r),xheader:!!(64&r),experimental:!!(32&r)}};return{version:n}}(e.slice(0,10));if(!t)return!1;var r=t.version.flags;if(r.unsync)throw new Error("no support for unsynchronisation");var o=10;r.xheader&&(o+=s(e.slice(10,14)));var i=s(e.slice(6,10));return function(e,t){var r=0,o=t.version;for(;r<e.length;){var i=c(e.slice(r+4));if(0===i)break;var a=e.slice(r,r+10+i);if(!a.length)break;var s=u(a,o.minor,i);s.tag&&("array"===n.FrameTypeValueMap[s.id]?t[s.tag]?t[s.tag].push(s.value):t[s.tag]=[s.value]:t[s.tag]=s.value),r+=a.length}}(e.slice(o,i+o),t),t},t.calcTagSize=s,t.calcFrameSize=c},607:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={TALB:"album",TBPM:"bpm",TCOM:"composer",TCON:"genre",TCOP:"copyright",TDEN:"encoding-time",TDLY:"playlist-delay",TDOR:"original-release-time",TDRC:"recording-time",TDRL:"release-time",TDTG:"tagging-time",TENC:"encoder",TEXT:"writer",TFLT:"file-type",TIPL:"involved-people",TIT1:"content-group",TIT2:"title",TIT3:"subtitle",TKEY:"initial-key",TLAN:"language",TLEN:"length",TMCL:"credits",TMED:"media-type",TMOO:"mood",TOAL:"original-album",TOFN:"original-filename",TOLY:"original-writer",TOPE:"original-artist",TOWN:"owner",TPE1:"artist",TPE2:"band",TPE3:"conductor",TPE4:"remixer",TPOS:"set-part",TPRO:"produced-notice",TPUB:"publisher",TRCK:"track",TRSN:"radio-name",TRSO:"radio-owner",TSOA:"album-sort",TSOP:"performer-sort",TSOT:"title-sort",TSRC:"isrc",TSSE:"encoder-settings",TSST:"set-subtitle",TXXX:"user-defined-text-information",TYER:"year",WCOM:"url-commercial",WCOP:"url-legal",WOAF:"url-file",WOAR:"url-artist",WOAS:"url-source",WORS:"url-radio",WPAY:"url-payment",WPUB:"url-publisher",WAF:"url-file",WAR:"url-artist",WAS:"url-source",WCM:"url-commercial",WCP:"url-copyright",WPB:"url-publisher",COMM:"comments",USLT:"lyrics",APIC:"image",PIC:"image",IPLS:"involved-people-list",OWNE:"ownership"},t.FrameTypeValueMap={TXXX:"array",COMM:"array",USLT:"array"}},608:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","lyricist-writer","recording-location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"]},609:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){"function"!=typeof Uint8Array||Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice})}},611:function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=c(e),a=n[0],s=n[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),l=0,h=s>0?a-4:a;for(r=0;r<h;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===s&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],a=16383,s=0,c=r-o;s<c;s+=a)i.push(l(e,s,s+a>c?c:s+a));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=a[s],o[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function l(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(u(n));return o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},612:function(e,t){t.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,c=(1<<s)-1,u=c>>1,l=-7,h=r?o-1:0,d=r?-1:1,p=e[t+h];for(h+=d,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+e[t+h],h+=d,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+e[t+h],h+=d,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=u}return(p?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,h=l>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(t*c-1)*Math.pow(2,o),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,o),a=0));o>=8;e[r+p]=255&s,p+=f,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[r+p]=255&a,p+=f,a/=256,u-=8);e[r+p-f]|=128*g}},613:function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},671:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.r(t),r.d(t,"MultiDrag",function(){return wt}),r.d(t,"Sortable",function(){return qe}),r.d(t,"Swap",function(){return ct});function u(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var l=u(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),h=u(/Edge/i),d=u(/firefox/i),p=u(/safari/i)&&!u(/chrome/i)&&!u(/android/i),f=u(/iP(ad|od|hone)/i),g=u(/chrome/i)&&u(/android/i),m={capture:!1,passive:!1};function v(e,t,r){e.addEventListener(t,r,!l&&m)}function y(e,t,r){e.removeEventListener(t,r,!l&&m)}function w(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function _(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function b(e,t,r,n){if(e){r=r||document;do{if(null!=t&&(">"===t[0]?e.parentNode===r&&w(e,t):w(e,t))||n&&e===r)return e;if(e===r)break}while(e=_(e))}return null}var C,E=/\s+/g;function T(e,t,r){if(e&&t)if(e.classList)e.classList[r?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(E," ").replace(" "+t+" "," ");e.className=(n+(r?" "+t:"")).replace(E," ")}}function S(e,t,r){var n=e&&e.style;if(n){if(void 0===r)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle),void 0===t?r:r[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=r+("string"==typeof r?"":"px")}}function k(e,t){var r="";if("string"==typeof e)r=e;else do{var n=S(e,"transform");n&&"none"!==n&&(r=n+" "+r)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(r)}function I(e,t,r){if(e){var n=e.getElementsByTagName(t),o=0,i=n.length;if(r)for(;o<i;o++)r(n[o],o);return n}return[]}function A(){var e=document.scrollingElement;return e||document.documentElement}function R(e,t,r,n,o){if(e.getBoundingClientRect||e===window){var i,a,s,c,u,h,d;if(e!==window&&e!==A()?(a=(i=e.getBoundingClientRect()).top,s=i.left,c=i.bottom,u=i.right,h=i.height,d=i.width):(a=0,s=0,c=window.innerHeight,u=window.innerWidth,h=window.innerHeight,d=window.innerWidth),(t||r)&&e!==window&&(o=o||e.parentNode,!l))do{if(o&&o.getBoundingClientRect&&("none"!==S(o,"transform")||r&&"static"!==S(o,"position"))){var p=o.getBoundingClientRect();a-=p.top+parseInt(S(o,"border-top-width")),s-=p.left+parseInt(S(o,"border-left-width")),c=a+i.height,u=s+i.width;break}}while(o=o.parentNode);if(n&&e!==window){var f=k(o||e),g=f&&f.a,m=f&&f.d;f&&(c=(a/=m)+(h/=m),u=(s/=g)+(d/=g))}return{top:a,left:s,bottom:c,right:u,width:d,height:h}}}function O(e,t,r){for(var n=D(e,!0),o=R(e)[t];n;){var i=R(n)[r];if(!("top"===r||"left"===r?o>=i:o<=i))return n;if(n===A())break;n=D(n,!1)}return!1}function P(e,t,r){for(var n=0,o=0,i=e.children;o<i.length;){if("none"!==i[o].style.display&&i[o]!==qe.ghost&&i[o]!==qe.dragged&&b(i[o],r.draggable,e,!1)){if(n===t)return i[o];n++}o++}return null}function M(e,t){for(var r=e.lastElementChild;r&&(r===qe.ghost||"none"===S(r,"display")||t&&!w(r,t));)r=r.previousElementSibling;return r||null}function x(e,t){var r=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===qe.clone||t&&!w(e,t)||r++;return r}function N(e){var t=0,r=0,n=A();if(e)do{var o=k(e),i=o.a,a=o.d;t+=e.scrollLeft*i,r+=e.scrollTop*a}while(e!==n&&(e=e.parentNode));return[t,r]}function D(e,t){if(!e||!e.getBoundingClientRect)return A();var r=e,n=!1;do{if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var o=S(r);if(r.clientWidth<r.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||r.clientHeight<r.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!r.getBoundingClientRect||r===document.body)return A();if(n||t)return r;n=!0}}}while(r=r.parentNode);return A()}function U(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function L(e,t){return function(){if(!C){var r=arguments;1===r.length?e.call(this,r[0]):e.apply(this,r),C=setTimeout(function(){C=void 0},t)}}}function B(e,t,r){e.scrollLeft+=t,e.scrollTop+=r}function H(e){var t=window.Polymer,r=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):r?r(e).clone(!0)[0]:e.cloneNode(!0)}function q(e,t){S(e,"position","absolute"),S(e,"top",t.top),S(e,"left",t.left),S(e,"width",t.width),S(e,"height",t.height)}function F(e){S(e,"position",""),S(e,"top",""),S(e,"left",""),S(e,"width",""),S(e,"height","")}var z="Sortable"+(new Date).getTime();function K(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach(function(e){if("none"!==S(e,"display")&&e!==qe.ghost){t.push({target:e,rect:R(e)});var r=a({},t[t.length-1].rect);if(e.thisAnimationDuration){var n=k(e,!0);n&&(r.top-=n.f,r.left-=n.e)}e.fromRect=r}})},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var r in e)if(e.hasOwnProperty(r))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[r][n])return Number(r);return-1}(t,{target:e}),1)},animateAll:function(r){var n=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof r&&r());var o=!1,i=0;t.forEach(function(e){var t=0,r=e.target,a=r.fromRect,s=R(r),c=r.prevFromRect,u=r.prevToRect,l=e.rect,h=k(r,!0);h&&(s.top-=h.f,s.left-=h.e),r.toRect=s,r.thisAnimationDuration&&U(c,s)&&!U(a,s)&&(l.top-s.top)/(l.left-s.left)===(a.top-s.top)/(a.left-s.left)&&(t=function(e,t,r,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-r.top,2)+Math.pow(t.left-r.left,2))*n.animation}(l,c,u,n.options)),U(s,a)||(r.prevFromRect=a,r.prevToRect=s,t||(t=n.options.animation),n.animate(r,l,s,t)),t&&(o=!0,i=Math.max(i,t),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout(function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null},t),r.thisAnimationDuration=t)}),clearTimeout(e),o?e=setTimeout(function(){"function"==typeof r&&r()},i):"function"==typeof r&&r(),t=[]},animate:function(e,t,r,n){if(n){S(e,"transition",""),S(e,"transform","");var o=k(this.el),i=o&&o.a,a=o&&o.d,s=(t.left-r.left)/(i||1),c=(t.top-r.top)/(a||1);e.animatingX=!!s,e.animatingY=!!c,S(e,"transform","translate3d("+s+"px,"+c+"px,0)"),function(e){e.offsetWidth}(e),S(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),S(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){S(e,"transition",""),S(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},n)}}}}var j=[],G={initializeByDefault:!0},Y={mount:function(e){for(var t in G)G.hasOwnProperty(t)&&!(t in e)&&(e[t]=G[t]);j.push(e)},pluginEvent:function(e,t,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var o=e+"Global";j.forEach(function(n){t[n.pluginName]&&(t[n.pluginName][o]&&t[n.pluginName][o](a({sortable:t},r)),t.options[n.pluginName]&&t[n.pluginName][e]&&t[n.pluginName][e](a({sortable:t},r)))})},initializePlugins:function(e,t,r,n){for(var o in j.forEach(function(n){var o=n.pluginName;if(e.options[o]||n.initializeByDefault){var a=new n(e,t,e.options);a.sortable=e,a.options=e.options,e[o]=a,i(r,a.defaults)}}),e.options)if(e.options.hasOwnProperty(o)){var a=this.modifyOption(e,o,e.options[o]);void 0!==a&&(e.options[o]=a)}},getEventProperties:function(e,t){var r={};return j.forEach(function(n){"function"==typeof n.eventProperties&&i(r,n.eventProperties.call(t[n.pluginName],e))}),r},modifyOption:function(e,t,r){var n;return j.forEach(function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(n=o.optionListeners[t].call(e[o.pluginName],r))}),n}};function W(e){var t=e.sortable,r=e.rootEl,n=e.name,o=e.targetEl,i=e.cloneEl,s=e.toEl,c=e.fromEl,u=e.oldIndex,d=e.newIndex,p=e.oldDraggableIndex,f=e.newDraggableIndex,g=e.originalEvent,m=e.putSortable,v=e.extraEventProperties;if(t=t||r&&r[z]){var y,w=t.options,_="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||l||h?(y=document.createEvent("Event")).initEvent(n,!0,!0):y=new CustomEvent(n,{bubbles:!0,cancelable:!0}),y.to=s||r,y.from=c||r,y.item=o||r,y.clone=i,y.oldIndex=u,y.newIndex=d,y.oldDraggableIndex=p,y.newDraggableIndex=f,y.originalEvent=g,y.pullMode=m?m.lastPutMode:void 0;var b=a({},v,Y.getEventProperties(n,t));for(var C in b)y[C]=b[C];r&&r.dispatchEvent(y),w[_]&&w[_].call(t,y)}}var Q=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.evt,o=s(r,["evt"]);Y.pluginEvent.bind(qe)(e,t,a({dragEl:X,parentEl:J,ghostEl:Z,rootEl:$,nextEl:ee,lastDownEl:te,cloneEl:re,cloneHidden:ne,dragStarted:me,putSortable:ue,activeSortable:qe.active,originalEvent:n,oldIndex:oe,oldDraggableIndex:ae,newIndex:ie,newDraggableIndex:se,hideGhostForTarget:Ue,unhideGhostForTarget:Le,cloneNowHidden:function(){ne=!0},cloneNowShown:function(){ne=!1},dispatchSortableEvent:function(e){V({sortable:t,name:e,originalEvent:n})}},o))};function V(e){W(a({putSortable:ue,cloneEl:re,targetEl:X,rootEl:$,oldIndex:oe,oldDraggableIndex:ae,newIndex:ie,newDraggableIndex:se},e))}var X,J,Z,$,ee,te,re,ne,oe,ie,ae,se,ce,ue,le,he,de,pe,fe,ge,me,ve,ye,we,_e,be=!1,Ce=!1,Ee=[],Te=!1,Se=!1,ke=[],Ie=!1,Ae=[],Re="undefined"!=typeof document,Oe=f,Pe=h||l?"cssFloat":"float",Me=Re&&!g&&!f&&"draggable"in document.createElement("div"),xe=function(){if(Re){if(l)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ne=function(e,t){var r=S(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=P(e,0,t),i=P(e,1,t),a=o&&S(o),s=i&&S(i),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+R(o).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+R(i).width;if("flex"===r.display)return"column"===r.flexDirection||"column-reverse"===r.flexDirection?"vertical":"horizontal";if("grid"===r.display)return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&"none"!==a.float){var l="left"===a.float?"left":"right";return!i||"both"!==s.clear&&s.clear!==l?"horizontal":"vertical"}return o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||c>=n&&"none"===r[Pe]||i&&"none"===r[Pe]&&c+u>n)?"vertical":"horizontal"},De=function(e){function t(e,r){return function(n,o,i,a){var s=n.options.group.name&&o.options.group.name&&n.options.group.name===o.options.group.name;if(null==e&&(r||s))return!0;if(null==e||!1===e)return!1;if(r&&"clone"===e)return e;if("function"==typeof e)return t(e(n,o,i,a),r)(n,o,i,a);var c=(r?n:o).options.group.name;return!0===e||"string"==typeof e&&e===c||e.join&&e.indexOf(c)>-1}}var r={},o=e.group;o&&"object"==n(o)||(o={name:o}),r.name=o.name,r.checkPull=t(o.pull,!0),r.checkPut=t(o.put),r.revertClone=o.revertClone,e.group=r},Ue=function(){!xe&&Z&&S(Z,"display","none")},Le=function(){!xe&&Z&&S(Z,"display","")};Re&&document.addEventListener("click",function(e){if(Ce)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ce=!1,!1},!0);var Be=function(e){if(X){e=e.touches?e.touches[0]:e;var t=(o=e.clientX,i=e.clientY,Ee.some(function(e){if(!M(e)){var t=R(e),r=e[z].options.emptyInsertThreshold,n=o>=t.left-r&&o<=t.right+r,s=i>=t.top-r&&i<=t.bottom+r;return r&&n&&s?a=e:void 0}}),a);if(t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[z]._onDragOver(r)}}var o,i,a},He=function(e){X&&X.parentNode[z]._isOutsideThisEl(e.target)};function qe(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=i({},t),e[z]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ne(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==qe.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var n in Y.initializePlugins(this,e,r),r)!(n in t)&&(t[n]=r[n]);for(var o in De(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&Me,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?v(e,"pointerdown",this._onTapStart):(v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),Ee.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),i(this,K())}function Fe(e,t,r,n,o,i,a,s){var c,u,d=e[z],p=d.options.onMove;return!window.CustomEvent||l||h?(c=document.createEvent("Event")).initEvent("move",!0,!0):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=t,c.from=e,c.dragged=r,c.draggedRect=n,c.related=o||t,c.relatedRect=i||R(t),c.willInsertAfter=s,c.originalEvent=a,e.dispatchEvent(c),p&&(u=p.call(d,c,a)),u}function ze(e){e.draggable=!1}function Ke(){Ie=!1}function je(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,r=t.length,n=0;r--;)n+=t.charCodeAt(r);return n.toString(36)}function Ge(e){return setTimeout(e,0)}function Ye(e){return clearTimeout(e)}qe.prototype={constructor:qe,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ve=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,X):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,n=this.options,o=n.preventOnFilter,i=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,u=n.filter;if(function(e){Ae.length=0;var t=e.getElementsByTagName("input"),r=t.length;for(;r--;){var n=t[r];n.checked&&Ae.push(n)}}(r),!X&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||n.disabled||c.isContentEditable||(s=b(s,n.draggable,r,!1))&&s.animated||te===s)){if(oe=x(s),ae=x(s,n.draggable),"function"==typeof u){if(u.call(this,e,s,this))return V({sortable:t,rootEl:c,name:"filter",targetEl:s,toEl:r,fromEl:r}),Q("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(u&&(u=u.split(",").some(function(n){if(n=b(c,n.trim(),r,!1))return V({sortable:t,rootEl:n,name:"filter",targetEl:s,fromEl:r,toEl:r}),Q("filter",t,{evt:e}),!0})))return void(o&&e.cancelable&&e.preventDefault());n.handle&&!b(c,n.handle,r,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,r){var n,o=this,i=o.el,a=o.options,s=i.ownerDocument;if(r&&!X&&r.parentNode===i){var c=R(r);if($=i,J=(X=r).parentNode,ee=X.nextSibling,te=r,ce=a.group,qe.dragged=X,le={target:X,clientX:(t||e).clientX,clientY:(t||e).clientY},fe=le.clientX-c.left,ge=le.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,X.style["will-change"]="all",n=function(){Q("delayEnded",o,{evt:e}),qe.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!d&&o.nativeDraggable&&(X.draggable=!0),o._triggerDragStart(e,t),V({sortable:o,name:"choose",originalEvent:e}),T(X,a.chosenClass,!0))},a.ignore.split(",").forEach(function(e){I(X,e.trim(),ze)}),v(s,"dragover",Be),v(s,"mousemove",Be),v(s,"touchmove",Be),v(s,"mouseup",o._onDrop),v(s,"touchend",o._onDrop),v(s,"touchcancel",o._onDrop),d&&this.nativeDraggable&&(this.options.touchStartThreshold=4,X.draggable=!0),Q("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(h||l))n();else{if(qe.eventCanceled)return void this._onDrop();v(s,"mouseup",o._disableDelayedDrag),v(s,"touchend",o._disableDelayedDrag),v(s,"touchcancel",o._disableDelayedDrag),v(s,"mousemove",o._delayedDragTouchMoveHandler),v(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&v(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){X&&ze(X),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;y(e,"mouseup",this._disableDelayedDrag),y(e,"touchend",this._disableDelayedDrag),y(e,"touchcancel",this._disableDelayedDrag),y(e,"mousemove",this._delayedDragTouchMoveHandler),y(e,"touchmove",this._delayedDragTouchMoveHandler),y(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?v(document,"pointermove",this._onTouchMove):v(document,t?"touchmove":"mousemove",this._onTouchMove):(v(X,"dragend",this),v($,"dragstart",this._onDragStart));try{document.selection?Ge(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(be=!1,$&&X){Q("dragStarted",this,{evt:t}),this.nativeDraggable&&v(document,"dragover",He);var r=this.options;!e&&T(X,r.dragClass,!1),T(X,r.ghostClass,!0),qe.active=this,e&&this._appendGhost(),V({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(he){this._lastX=he.clientX,this._lastY=he.clientY,Ue();for(var e=document.elementFromPoint(he.clientX,he.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(he.clientX,he.clientY))!==t;)t=e;if(X.parentNode[z]._isOutsideThisEl(e),t)do{if(t[z]){if(t[z]._onDragOver({clientX:he.clientX,clientY:he.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Le()}},_onTouchMove:function(e){if(le){var t=this.options,r=t.fallbackTolerance,n=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=Z&&k(Z,!0),a=Z&&i&&i.a,s=Z&&i&&i.d,c=Oe&&_e&&N(_e),u=(o.clientX-le.clientX+n.x)/(a||1)+(c?c[0]-ke[0]:0)/(a||1),l=(o.clientY-le.clientY+n.y)/(s||1)+(c?c[1]-ke[1]:0)/(s||1);if(!qe.active&&!be){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Z){i?(i.e+=u-(de||0),i.f+=l-(pe||0)):i={a:1,b:0,c:0,d:1,e:u,f:l};var h="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");S(Z,"webkitTransform",h),S(Z,"mozTransform",h),S(Z,"msTransform",h),S(Z,"transform",h),de=u,pe=l,he=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Z){var e=this.options.fallbackOnBody?document.body:$,t=R(X,!0,Oe,!0,e),r=this.options;if(Oe){for(_e=e;"static"===S(_e,"position")&&"none"===S(_e,"transform")&&_e!==document;)_e=_e.parentNode;_e!==document.body&&_e!==document.documentElement?(_e===document&&(_e=A()),t.top+=_e.scrollTop,t.left+=_e.scrollLeft):_e=A(),ke=N(_e)}T(Z=X.cloneNode(!0),r.ghostClass,!1),T(Z,r.fallbackClass,!0),T(Z,r.dragClass,!0),S(Z,"transition",""),S(Z,"transform",""),S(Z,"box-sizing","border-box"),S(Z,"margin",0),S(Z,"top",t.top),S(Z,"left",t.left),S(Z,"width",t.width),S(Z,"height",t.height),S(Z,"opacity","0.8"),S(Z,"position",Oe?"absolute":"fixed"),S(Z,"zIndex","100000"),S(Z,"pointerEvents","none"),qe.ghost=Z,e.appendChild(Z),S(Z,"transform-origin",fe/parseInt(Z.style.width)*100+"% "+ge/parseInt(Z.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,n=e.dataTransfer,o=r.options;Q("dragStart",this,{evt:e}),qe.eventCanceled?this._onDrop():(Q("setupClone",this),qe.eventCanceled||((re=H(X)).draggable=!1,re.style["will-change"]="",this._hideClone(),T(re,this.options.chosenClass,!1),qe.clone=re),r.cloneId=Ge(function(){Q("clone",r),qe.eventCanceled||(r.options.removeCloneOnHide||$.insertBefore(re,X),r._hideClone(),V({sortable:r,name:"clone"}))}),!t&&T(X,o.dragClass,!0),t?(Ce=!0,r._loopId=setInterval(r._emulateDragOver,50)):(y(document,"mouseup",r._onDrop),y(document,"touchend",r._onDrop),y(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(r,n,X)),v(document,"drop",r),S(X,"transform","translateZ(0)")),be=!0,r._dragStartId=Ge(r._dragStarted.bind(r,t,e)),v(document,"selectstart",r),me=!0,p&&S(document.body,"user-select","none"))},_onDragOver:function(e){var t,r,n,o,i=this.el,s=e.target,c=this.options,u=c.group,l=qe.active,h=ce===u,d=c.sort,p=ue||l,f=this,g=!1;if(!Ie){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=b(s,c.draggable,i,!0),U("dragOver"),qe.eventCanceled)return g;if(X.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return H(!1);if(Ce=!1,l&&!c.disabled&&(h?d||(n=!$.contains(X)):ue===this||(this.lastPutMode=ce.checkPull(this,l,X,e))&&u.checkPut(this,l,X,e))){if(o="vertical"===this._getDirection(e,s),t=R(X),U("dragOverValid"),qe.eventCanceled)return g;if(n)return J=$,L(),this._hideClone(),U("revert"),qe.eventCanceled||(ee?$.insertBefore(X,ee):$.appendChild(X)),H(!0);var m=M(i,c.draggable);if(!m||function(e,t,r){var n=R(M(r.el,r.options.draggable)),o=10;return t?e.clientX>n.right+o||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+o}(e,o,this)&&!m.animated){if(m===X)return H(!1);if(m&&i===e.target&&(s=m),s&&(r=R(s)),!1!==Fe($,i,X,t,s,r,e,!!s))return L(),i.appendChild(X),J=i,q(),H(!0)}else if(s.parentNode===i){r=R(s);var v,y,w,_=X.parentNode!==i,C=!function(e,t,r){var n=r?e.left:e.top,o=r?e.right:e.bottom,i=r?e.width:e.height,a=r?t.left:t.top,s=r?t.right:t.bottom,c=r?t.width:t.height;return n===a||o===s||n+i/2===a+c/2}(X.animated&&X.toRect||t,s.animated&&s.toRect||r,o),E=o?"top":"left",k=O(s,"top","top")||O(X,"top","top"),I=k?k.scrollTop:void 0;if(ve!==s&&(y=r[E],Te=!1,Se=!C&&c.invertSwap||_),v=function(e,t,r,n,o,i,a,s){var c=n?e.clientY:e.clientX,u=n?r.height:r.width,l=n?r.top:r.left,h=n?r.bottom:r.right,d=!1;if(!a)if(s&&we<u*o){if(!Te&&(1===ye?c>l+u*i/2:c<h-u*i/2)&&(Te=!0),Te)d=!0;else if(1===ye?c<l+we:c>h-we)return-ye}else if(c>l+u*(1-o)/2&&c<h-u*(1-o)/2)return function(e){return x(X)<x(e)?1:-1}(t);if((d=d||a)&&(c<l+u*i/2||c>h-u*i/2))return c>l+u/2?1:-1;return 0}(e,s,r,o,C?1:c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,Se,ve===s),0!==v){var A=x(X);do{A-=v,w=J.children[A]}while(w&&("none"===S(w,"display")||w===Z))}if(0===v||w===s)return H(!1);ve=s,ye=v;var P=s.nextElementSibling,N=!1,D=Fe($,i,X,t,s,r,e,N=1===v);if(!1!==D)return 1!==D&&-1!==D||(N=1===D),Ie=!0,setTimeout(Ke,30),L(),N&&!P?i.appendChild(X):s.parentNode.insertBefore(X,N?P:s),k&&B(k,0,I-k.scrollTop),J=X.parentNode,void 0===y||Se||(we=Math.abs(y-R(s)[E])),q(),H(!0)}if(i.contains(X))return H(!1)}return!1}function U(c,u){Q(c,f,a({evt:e,isOwner:h,axis:o?"vertical":"horizontal",revert:n,dragRect:t,targetRect:r,canSort:d,fromSortable:p,target:s,completed:H,onMove:function(r,n){return Fe($,i,X,t,r,R(r),e,n)},changed:q},u))}function L(){U("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function H(t){return U("dragOverCompleted",{insertion:t}),t&&(h?l._hideClone():l._showClone(f),f!==p&&(T(X,ue?ue.options.ghostClass:l.options.ghostClass,!1),T(X,c.ghostClass,!0)),ue!==f&&f!==qe.active?ue=f:f===qe.active&&ue&&(ue=null),p===f&&(f._ignoreWhileAnimating=s),f.animateAll(function(){U("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(s===X&&!X.animated||s===i&&!s.animated)&&(ve=null),c.dragoverBubble||e.rootEl||s===document||(X.parentNode[z]._isOutsideThisEl(e.target),!t&&Be(e)),!c.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function q(){ie=x(X),se=x(X,c.draggable),V({sortable:f,name:"change",toEl:i,newIndex:ie,newDraggableIndex:se,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){y(document,"mousemove",this._onTouchMove),y(document,"touchmove",this._onTouchMove),y(document,"pointermove",this._onTouchMove),y(document,"dragover",Be),y(document,"mousemove",Be),y(document,"touchmove",Be)},_offUpEvents:function(){var e=this.el.ownerDocument;y(e,"mouseup",this._onDrop),y(e,"touchend",this._onDrop),y(e,"pointerup",this._onDrop),y(e,"touchcancel",this._onDrop),y(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;ie=x(X),se=x(X,r.draggable),Q("drop",this,{evt:e}),J=X&&X.parentNode,ie=x(X),se=x(X,r.draggable),qe.eventCanceled||(be=!1,Se=!1,Te=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ye(this.cloneId),Ye(this._dragStartId),this.nativeDraggable&&(y(document,"drop",this),y(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),p&&S(document.body,"user-select",""),S(X,"transform",""),e&&(me&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Z&&Z.parentNode&&Z.parentNode.removeChild(Z),($===J||ue&&"clone"!==ue.lastPutMode)&&re&&re.parentNode&&re.parentNode.removeChild(re),X&&(this.nativeDraggable&&y(X,"dragend",this),ze(X),X.style["will-change"]="",me&&!be&&T(X,ue?ue.options.ghostClass:this.options.ghostClass,!1),T(X,this.options.chosenClass,!1),V({sortable:this,name:"unchoose",toEl:J,newIndex:null,newDraggableIndex:null,originalEvent:e}),$!==J?(ie>=0&&(V({rootEl:J,name:"add",toEl:J,fromEl:$,originalEvent:e}),V({sortable:this,name:"remove",toEl:J,originalEvent:e}),V({rootEl:J,name:"sort",toEl:J,fromEl:$,originalEvent:e}),V({sortable:this,name:"sort",toEl:J,originalEvent:e})),ue&&ue.save()):ie!==oe&&ie>=0&&(V({sortable:this,name:"update",toEl:J,originalEvent:e}),V({sortable:this,name:"sort",toEl:J,originalEvent:e})),qe.active&&(null!=ie&&-1!==ie||(ie=oe,se=ae),V({sortable:this,name:"end",toEl:J,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Q("nulling",this),$=X=J=Z=ee=re=te=ne=le=he=me=ie=se=oe=ae=ve=ye=ue=ce=qe.dragged=qe.ghost=qe.clone=qe.active=null,Ae.forEach(function(e){e.checked=!0}),Ae.length=de=pe=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":X&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],r=this.el.children,n=0,o=r.length,i=this.options;n<o;n++)b(e=r[n],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||je(e));return t},sort:function(e){var t={},r=this.el;this.toArray().forEach(function(e,n){var o=r.children[n];b(o,this.options.draggable,r,!1)&&(t[e]=o)},this),e.forEach(function(e){t[e]&&(r.removeChild(t[e]),r.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return b(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(void 0===t)return r[e];var n=Y.modifyOption(this,e,t);r[e]=void 0!==n?n:t,"group"===e&&De(r)},destroy:function(){Q("destroy",this);var e=this.el;e[z]=null,y(e,"mousedown",this._onTapStart),y(e,"touchstart",this._onTapStart),y(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(y(e,"dragover",this),y(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ee.splice(Ee.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ne){if(Q("hideClone",this),qe.eventCanceled)return;S(re,"display","none"),this.options.removeCloneOnHide&&re.parentNode&&re.parentNode.removeChild(re),ne=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ne){if(Q("showClone",this),qe.eventCanceled)return;$.contains(X)&&!this.options.group.revertClone?$.insertBefore(re,X):ee?$.insertBefore(re,ee):$.appendChild(re),this.options.group.revertClone&&this.animate(X,re),S(re,"display",""),ne=!1}}else this._hideClone()}},Re&&v(document,"touchmove",function(e){(qe.active||be)&&e.cancelable&&e.preventDefault()}),qe.utils={on:v,off:y,css:S,find:I,is:function(e,t){return!!b(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},throttle:L,closest:b,toggleClass:T,clone:H,index:x,nextTick:Ge,cancelNextTick:Ye,detectDirection:Ne,getChild:P},qe.get=function(e){return e[z]},qe.mount=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(qe.utils=a({},qe.utils,e.utils)),Y.mount(e)})},qe.create=function(e,t){return new qe(e,t)},qe.version="1.10.2";var We,Qe,Ve,Xe,Je,Ze,$e=[],et=!1;function tt(){$e.forEach(function(e){clearInterval(e.pid)}),$e=[]}function rt(){clearInterval(Ze)}var nt,ot=L(function(e,t,r,n){if(t.scroll){var o,i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,c=t.scrollSpeed,u=A(),l=!1;Qe!==r&&(Qe=r,tt(),We=t.scroll,o=t.scrollFn,!0===We&&(We=D(r,!0)));var h=0,d=We;do{var p=d,f=R(p),g=f.top,m=f.bottom,v=f.left,y=f.right,w=f.width,_=f.height,b=void 0,C=void 0,E=p.scrollWidth,T=p.scrollHeight,k=S(p),I=p.scrollLeft,O=p.scrollTop;p===u?(b=w<E&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),C=_<T&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(b=w<E&&("auto"===k.overflowX||"scroll"===k.overflowX),C=_<T&&("auto"===k.overflowY||"scroll"===k.overflowY));var P=b&&(Math.abs(y-i)<=s&&I+w<E)-(Math.abs(v-i)<=s&&!!I),M=C&&(Math.abs(m-a)<=s&&O+_<T)-(Math.abs(g-a)<=s&&!!O);if(!$e[h])for(var x=0;x<=h;x++)$e[x]||($e[x]={});$e[h].vx==P&&$e[h].vy==M&&$e[h].el===p||($e[h].el=p,$e[h].vx=P,$e[h].vy=M,clearInterval($e[h].pid),0==P&&0==M||(l=!0,$e[h].pid=setInterval(function(){n&&0===this.layer&&qe.active._onTouchMove(Je);var t=$e[this.layer].vy?$e[this.layer].vy*c:0,r=$e[this.layer].vx?$e[this.layer].vx*c:0;"function"==typeof o&&"continue"!==o.call(qe.dragged.parentNode[z],r,t,e,Je,$e[this.layer].el)||B($e[this.layer].el,r,t)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&d!==u&&(d=D(d,!1)));et=l}},30),it=function(e){var t=e.originalEvent,r=e.putSortable,n=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var c=r||o;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,l=document.elementFromPoint(u.clientX,u.clientY);s(),c&&!c.el.contains(l)&&(i("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function at(){}function st(){}function ct(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;nt=t},dragOverValid:function(e){var t=e.completed,r=e.target,n=e.onMove,o=e.activeSortable,i=e.changed,a=e.cancel;if(o.options.swap){var s=this.sortable.el,c=this.options;if(r&&r!==s){var u=nt;!1!==n(r)?(T(r,c.swapClass,!0),nt=r):nt=null,u&&u!==nt&&T(u,c.swapClass,!1)}i(),t(!0),a()}},drop:function(e){var t=e.activeSortable,r=e.putSortable,n=e.dragEl,o=r||this.sortable,i=this.options;nt&&T(nt,i.swapClass,!1),nt&&(i.swap||r&&r.options.swap)&&n!==nt&&(o.captureAnimationState(),o!==t&&t.captureAnimationState(),function(e,t){var r,n,o=e.parentNode,i=t.parentNode;if(!o||!i||o.isEqualNode(t)||i.isEqualNode(e))return;r=x(e),n=x(t),o.isEqualNode(i)&&r<n&&n++;o.insertBefore(t,o.children[r]),i.insertBefore(e,i.children[n])}(n,nt),o.animateAll(),o!==t&&t.animateAll())},nulling:function(){nt=null}},i(e,{pluginName:"swap",eventProperties:function(){return{swapItem:nt}}})}at.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=P(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:it},i(at,{pluginName:"revertOnSpill"}),st.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:it},i(st,{pluginName:"removeOnSpill"});var ut,lt,ht,dt,pt,ft=[],gt=[],mt=!1,vt=!1,yt=!1;function wt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?v(document,"pointerup",this._deselectMultiDrag):(v(document,"mouseup",this._deselectMultiDrag),v(document,"touchend",this._deselectMultiDrag)),v(document,"keydown",this._checkKeyDown),v(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,r){var n="";ft.length&&lt===e?ft.forEach(function(e,t){n+=(t?", ":"")+e.textContent}):n=r.textContent,t.setData("Text",n)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;ht=t},delayEnded:function(){this.isMultiDrag=~ft.indexOf(ht)},setupClone:function(e){var t=e.sortable,r=e.cancel;if(this.isMultiDrag){for(var n=0;n<ft.length;n++)gt.push(H(ft[n])),gt[n].sortableIndex=ft[n].sortableIndex,gt[n].draggable=!1,gt[n].style["will-change"]="",T(gt[n],this.options.selectedClass,!1),ft[n]===ht&&T(gt[n],this.options.chosenClass,!1);t._hideClone(),r()}},clone:function(e){var t=e.sortable,r=e.rootEl,n=e.dispatchSortableEvent,o=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ft.length&&lt===t&&(_t(!0,r),n("clone"),o()))},showClone:function(e){var t=e.cloneNowShown,r=e.rootEl,n=e.cancel;this.isMultiDrag&&(_t(!1,r),gt.forEach(function(e){S(e,"display","")}),t(),pt=!1,n())},hideClone:function(e){var t=this,r=(e.sortable,e.cloneNowHidden),n=e.cancel;this.isMultiDrag&&(gt.forEach(function(e){S(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)}),r(),pt=!0,n())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&lt&&lt.multiDrag._deselectMultiDrag(),ft.forEach(function(e){e.sortableIndex=x(e)}),ft=ft.sort(function(e,t){return e.sortableIndex-t.sortableIndex}),yt=!0},dragStarted:function(e){var t=this,r=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(r.captureAnimationState(),this.options.animation)){ft.forEach(function(e){e!==ht&&S(e,"position","absolute")});var n=R(ht,!1,!0,!0);ft.forEach(function(e){e!==ht&&q(e,n)}),vt=!0,mt=!0}r.animateAll(function(){vt=!1,mt=!1,t.options.animation&&ft.forEach(function(e){F(e)}),t.options.sort&&bt()})}},dragOver:function(e){var t=e.target,r=e.completed,n=e.cancel;vt&&~ft.indexOf(t)&&(r(!1),n())},revert:function(e){var t=e.fromSortable,r=e.rootEl,n=e.sortable,o=e.dragRect;ft.length>1&&(ft.forEach(function(e){n.addAnimationState({target:e,rect:vt?R(e):o}),F(e),e.fromRect=o,t.removeAnimationState(e)}),vt=!1,function(e,t){ft.forEach(function(r,n){var o=t.children[r.sortableIndex+(e?Number(n):0)];o?t.insertBefore(r,o):t.appendChild(r)})}(!this.options.removeCloneOnHide,r))},dragOverCompleted:function(e){var t=e.sortable,r=e.isOwner,n=e.insertion,o=e.activeSortable,i=e.parentEl,a=e.putSortable,s=this.options;if(n){if(r&&o._hideClone(),mt=!1,s.animation&&ft.length>1&&(vt||!r&&!o.options.sort&&!a)){var c=R(ht,!1,!0,!0);ft.forEach(function(e){e!==ht&&(q(e,c),i.appendChild(e))}),vt=!0}if(!r)if(vt||bt(),ft.length>1){var u=pt;o._showClone(t),o.options.animation&&!pt&&u&&gt.forEach(function(e){o.addAnimationState({target:e,rect:dt}),e.fromRect=dt,e.thisAnimationDuration=null})}else o._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,r=e.isOwner,n=e.activeSortable;if(ft.forEach(function(e){e.thisAnimationDuration=null}),n.options.animation&&!r&&n.multiDrag.isMultiDrag){dt=i({},t);var o=k(ht,!0);dt.top-=o.f,dt.left-=o.e}},dragOverAnimationComplete:function(){vt&&(vt=!1,bt())},drop:function(e){var t=e.originalEvent,r=e.rootEl,n=e.parentEl,o=e.sortable,i=e.dispatchSortableEvent,a=e.oldIndex,s=e.putSortable,c=s||this.sortable;if(t){var u=this.options,l=n.children;if(!yt)if(u.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),T(ht,u.selectedClass,!~ft.indexOf(ht)),~ft.indexOf(ht))ft.splice(ft.indexOf(ht),1),ut=null,W({sortable:o,rootEl:r,name:"deselect",targetEl:ht,originalEvt:t});else{if(ft.push(ht),W({sortable:o,rootEl:r,name:"select",targetEl:ht,originalEvt:t}),t.shiftKey&&ut&&o.el.contains(ut)){var h,d,p=x(ut),f=x(ht);if(~p&&~f&&p!==f)for(f>p?(d=p,h=f):(d=f,h=p+1);d<h;d++)~ft.indexOf(l[d])||(T(l[d],u.selectedClass,!0),ft.push(l[d]),W({sortable:o,rootEl:r,name:"select",targetEl:l[d],originalEvt:t}))}else ut=ht;lt=c}if(yt&&this.isMultiDrag){if((n[z].options.sort||n!==r)&&ft.length>1){var g=R(ht),m=x(ht,":not(."+this.options.selectedClass+")");if(!mt&&u.animation&&(ht.thisAnimationDuration=null),c.captureAnimationState(),!mt&&(u.animation&&(ht.fromRect=g,ft.forEach(function(e){if(e.thisAnimationDuration=null,e!==ht){var t=vt?R(e):g;e.fromRect=t,c.addAnimationState({target:e,rect:t})}})),bt(),ft.forEach(function(e){l[m]?n.insertBefore(e,l[m]):n.appendChild(e),m++}),a===x(ht))){var v=!1;ft.forEach(function(e){e.sortableIndex===x(e)||(v=!0)}),v&&i("update")}ft.forEach(function(e){F(e)}),c.animateAll()}lt=c}(r===n||s&&"clone"!==s.lastPutMode)&&gt.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}},nullingGlobal:function(){this.isMultiDrag=yt=!1,gt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),y(document,"pointerup",this._deselectMultiDrag),y(document,"mouseup",this._deselectMultiDrag),y(document,"touchend",this._deselectMultiDrag),y(document,"keydown",this._checkKeyDown),y(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==yt&&yt||lt!==this.sortable||e&&b(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;ft.length;){var t=ft[0];T(t,this.options.selectedClass,!1),ft.shift(),W({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},i(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[z];t&&t.options.multiDrag&&!~ft.indexOf(e)&&(lt&&lt!==t&&(lt.multiDrag._deselectMultiDrag(),lt=t),T(e,t.options.selectedClass,!0),ft.push(e))},deselect:function(e){var t=e.parentNode[z],r=ft.indexOf(e);t&&t.options.multiDrag&&~r&&(T(e,t.options.selectedClass,!1),ft.splice(r,1))}},eventProperties:function(){var e=this,t=[],r=[];return ft.forEach(function(n){var o;t.push({multiDragElement:n,index:n.sortableIndex}),o=vt&&n!==ht?-1:vt?x(n,":not(."+e.options.selectedClass+")"):x(n),r.push({multiDragElement:n,index:o})}),{items:c(ft),clones:[].concat(gt),oldIndicies:t,newIndicies:r}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function _t(e,t){gt.forEach(function(r,n){var o=t.children[r.sortableIndex+(e?Number(n):0)];o?t.insertBefore(r,o):t.appendChild(r)})}function bt(){ft.forEach(function(e){e!==ht&&e.parentNode&&e.parentNode.removeChild(e)})}qe.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):this.options.supportPointer?v(document,"pointermove",this._handleFallbackAutoScroll):t.touches?v(document,"touchmove",this._handleFallbackAutoScroll):v(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):(y(document,"pointermove",this._handleFallbackAutoScroll),y(document,"touchmove",this._handleFallbackAutoScroll),y(document,"mousemove",this._handleFallbackAutoScroll)),rt(),tt(),clearTimeout(C),C=void 0},nulling:function(){Je=Qe=We=et=Ze=Ve=Xe=null,$e.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var r=this,n=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(n,o);if(Je=e,t||h||l||p){ot(e,this.options,i,t);var a=D(i,!0);!et||Ze&&n===Ve&&o===Xe||(Ze&&rt(),Ze=setInterval(function(){var i=D(document.elementFromPoint(n,o),!0);i!==a&&(a=i,tt()),ot(e,r.options,i,t)},10),Ve=n,Xe=o)}else{if(!this.options.bubbleScroll||D(i,!0)===A())return void tt();ot(e,this.options,D(i,!1),!1)}}},i(e,{pluginName:"scroll",initializeByDefault:!0})}),qe.mount(st,at),t.default=qe},672:function(e,t,r){"use strict";r(462)},673:function(e,t,r){var n=r(84)(function(e){return e[1]});n.push([e.i,".saturation{cursor:pointer;position:relative}.saturation .slide{border:1px solid #fff;border-radius:50%;box-shadow:0 0 1px 1px rgba(0,0,0,.3);height:10px;left:100px;pointer-events:none;position:absolute;top:0;width:10px}",""]),n.locals={},e.exports=n},674:function(e,t,r){"use strict";r(463)},675:function(e,t,r){var n=r(84)(function(e){return e[1]});n.push([e.i,".hue{cursor:pointer;margin-left:8px;position:relative}.hue .slide{background:#fff;box-shadow:0 0 1px 0 rgba(0,0,0,.3);height:4px;left:0;pointer-events:none;position:absolute;top:100px;width:100%}",""]),n.locals={},e.exports=n},676:function(e,t,r){"use strict";r(464)},677:function(e,t,r){var n=r(84)(function(e){return e[1]});n.push([e.i,".color-alpha{cursor:pointer;margin-left:8px;position:relative}.color-alpha .slide{background:#fff;box-shadow:0 0 1px 0 rgba(0,0,0,.3);height:4px;left:0;pointer-events:none;position:absolute;top:100px;width:100%}",""]),n.locals={},e.exports=n},678:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAlBJREFUOBGNkk2IUlEUx+99vufXQvCjEA11YWgk7TTLZhwVLTfSRmY1QbOoTdMqad0iiGB20cpVUAt3SVHCJDJG40IXBVGLIIOB8hM/QPy+/a/xYqK38MJ99757zu9/zj3nUrLmiEajdkEQni6Xy6hKpfqB/eNCofCMrsOHQiEPgPfwtdhsNkYpJe12m0LolkpJIJFI7DkcDm+9Xv/o9/vPw+dwsVhYnE4nc7lc1G63016vx8bj8TlRSWA6nd6cz+cXAoHAGYD3sDdarVam1+vpaDRaITgjjLHTigKArkK9ifXhbDYjBoOBSZL0F261Wqzb7VKtVvtBUQCwi4N88kjD4ZAg+ioyT53DGo3mJwLs/VcD3PkyrnAwmUwks9n8YDAYuPBvxGQASL/fp8imiwJeKZVK3/4R4DAicliLIt4pFosvsH9Vq9Wu4b5GCHC4j+hb5XL5C09JWOWFTzAY3MJyAAHJ7XbfRo9fclsmk2maTKY8IhJRFAna+QTwJ27jYyUQDofj6O1bPBLJ6/Xu5vP5N3/MhMC2gxrcReTvEGio1er7eFRR2S7EYrE40nsNWPB4PLu5XO6dbIxEIjuo+COkfAyfTZ1OF4dIHyJnZR8RkZ/zH5/PdyObzR7KhmQyud3pdFYw2rVRqVSOYePTIvvwVYDyKThUT8KpVGq70WjsI/Iv+HC4zp2VhoiiEP625ZFOp683m819iLZxtlGtVuuyTWmlePcM9x9A6DNWikd0EYJtdGPz6OjoqxJ08ox3oQzYgKtcwgwi7Q5athbMhX4DL0sglf8ys78AAAAASUVORK5CYII="},679:function(e,t,r){"use strict";r(465)},680:function(e,t,r){var n=r(84)(function(e){return e[1]});n.push([e.i,".sucker{background:#2e333a;cursor:pointer;fill:#9099a4;transition:all .3s;width:30px}.sucker.active,.sucker:hover{fill:#1593ff}",""]),n.locals={},e.exports=n},681:function(e,t,r){"use strict";r(466)},682:function(e,t,r){var n=r(84)(function(e){return e[1]});n.push([e.i,".color-type{display:flex;font-size:12px;margin-top:8px}.color-type .name{align-items:center;background:#252930;color:#999;display:flex;float:left;height:30px;justify-content:center;width:60px}.color-type .value{background:#2e333a;border:0;box-sizing:border-box;color:#fff;flex:1;height:30px;min-width:100px;padding:0 12px}",""]),n.locals={},e.exports=n},683:function(e,t,r){"use strict";r(467)},684:function(e,t,r){var n=r(84)(function(e){return e[1]});n.push([e.i,".colors{margin:0;padding:0}.colors.history{border-top:1px solid #2e333a;margin-top:10px}.colors .item{border-radius:3px;box-sizing:border-box;cursor:pointer;display:inline-block;height:16px;margin:10px 0 0 10px;position:relative;transition:all .1s;vertical-align:top;width:16px}.colors .item:nth-child(8n+1){margin-left:0}.colors .item:hover{transform:scale(1.4)}.colors .item .alpha{border-radius:4px;height:100%}.colors .item .color{border-radius:3px;height:100%;left:0;position:absolute;top:0;width:100%}",""]),n.locals={},e.exports=n},685:function(e,t,r){"use strict";r(468)},686:function(e,t,r){var n=r(84)(function(e){return e[1]});n.push([e.i,".hu-color-picker{background:#1d2024;border-radius:4px;box-shadow:0 0 16px 0 rgba(0,0,0,.16);padding:10px;z-index:1}.hu-color-picker.light{background:#f7f8f9}.hu-color-picker.light .color-show .sucker{background:#eceef0}.hu-color-picker.light .color-type .name{background:#e7e8e9}.hu-color-picker.light .color-type .value{background:#eceef0;color:#666}.hu-color-picker.light .colors.history{border-top:1px solid #eee}.hu-color-picker canvas{vertical-align:top}.hu-color-picker .color-set{display:flex}.hu-color-picker .color-show{display:flex;margin-top:8px}",""]),n.locals={},e.exports=n},687:function(e,t,r){"use strict";var n=r(1);n="default"in n?n.default:n;var o="2.2.2";/^2\./.test(n.version)||n.util.warn("VueClickaway 2.2.2 only supports Vue 2.x, and does not support Vue "+n.version);var i="_vue_clickaway_handler";function a(e,t,r){s(e,t);var n=r.context,o=t.value;if("function"==typeof o){var a=!1;setTimeout(function(){a=!0},0),e[i]=function(t){var r=t.path||(t.composedPath?t.composedPath():void 0);if(a&&(r?r.indexOf(e)<0:!e.contains(t.target)))return o.call(n,t)},t.arg?document.documentElement.addEventListener(t.arg,e[i],!1):document.documentElement.addEventListener("click",e[i],!1)}}function s(e,t){t.arg?document.documentElement.removeEventListener(t.arg,e[i],!1):document.documentElement.removeEventListener("click",e[i],!1),delete e[i]}var c={bind:a,update:function(e,t,r){t.value!==t.oldValue&&a(e,t,r)},unbind:s},u={directives:{onClickaway:c}};t.version=o,t.directive=c,t.mixin=u},699:function(e,t,r){(function(t,r,n,o){e.exports=function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){return o(t[a][1][e]||e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var i=!1,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";var n=e("./utils"),o=e("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,o,a,s,c,u,l=[],h=0,d=e.length,p=d,f="string"!==n.getTypeOf(e);h<e.length;)p=d-h,o=f?(t=e[h++],r=h<d?e[h++]:0,h<d?e[h++]:0):(t=e.charCodeAt(h++),r=h<d?e.charCodeAt(h++):0,h<d?e.charCodeAt(h++):0),a=t>>2,s=(3&t)<<4|r>>4,c=1<p?(15&r)<<2|o>>6:64,u=2<p?63&o:64,l.push(i.charAt(a)+i.charAt(s)+i.charAt(c)+i.charAt(u));return l.join("")},r.decode=function(e){var t,r,n,a,s,c,u=0,l=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===i.charAt(64)&&p--,e.charAt(e.length-2)===i.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=o.uint8array?new Uint8Array(0|p):new Array(0|p);u<e.length;)t=i.indexOf(e.charAt(u++))<<2|(a=i.indexOf(e.charAt(u++)))>>4,r=(15&a)<<4|(s=i.indexOf(e.charAt(u++)))>>2,n=(3&s)<<6|(c=i.indexOf(e.charAt(u++))),d[l++]=t,64!==s&&(d[l++]=r),64!==c&&(d[l++]=n);return d}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var n=e("./external"),o=e("./stream/DataWorker"),i=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,r,n,o){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=o}s.prototype={getContentWorker:function(){var e=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,r){return e.pipe(new i).pipe(new a("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var n=e("./utils"),o=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r,n){var i=o,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,r,n){var i=o,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^i[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var n=null;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=e("pako"),i=e("./utils"),a=e("./stream/GenericWorker"),s=n?"uint8array":"array";function c(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",i.inherits(c,a),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(s,e.data),!1)},c.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new c("Deflate",e)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function n(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function o(e,t,r,o,a,l){var h,d,p=e.file,f=e.compression,g=l!==s.utf8encode,m=i.transformTo("string",l(p.name)),v=i.transformTo("string",s.utf8encode(p.name)),y=p.comment,w=i.transformTo("string",l(y)),_=i.transformTo("string",s.utf8encode(y)),b=v.length!==p.name.length,C=_.length!==y.length,E="",T="",S="",k=p.dir,I=p.date,A={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(A.crc32=e.crc32,A.compressedSize=e.compressedSize,A.uncompressedSize=e.uncompressedSize);var R=0;t&&(R|=8),g||!b&&!C||(R|=2048);var O=0,P=0;k&&(O|=16),"UNIX"===a?(P=798,O|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(p.unixPermissions,k)):(P=20,O|=function(e){return 63&(e||0)}(p.dosPermissions)),h=I.getUTCHours(),h<<=6,h|=I.getUTCMinutes(),h<<=5,h|=I.getUTCSeconds()/2,d=I.getUTCFullYear()-1980,d<<=4,d|=I.getUTCMonth()+1,d<<=5,d|=I.getUTCDate(),b&&(T=n(1,1)+n(c(m),4)+v,E+="up"+n(T.length,2)+T),C&&(S=n(1,1)+n(c(w),4)+_,E+="uc"+n(S.length,2)+S);var M="";return M+="\n\0",M+=n(R,2),M+=f.magic,M+=n(h,2),M+=n(d,2),M+=n(A.crc32,4),M+=n(A.compressedSize,4),M+=n(A.uncompressedSize,4),M+=n(m.length,2),M+=n(E.length,2),{fileRecord:u.LOCAL_FILE_HEADER+M+m+E,dirRecord:u.CENTRAL_FILE_HEADER+n(P,2)+M+n(w.length,2)+"\0\0\0\0"+n(O,4)+n(o,4)+m+E+w}}var i=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),c=e("../crc32"),u=e("../signature");function l(e,t,r,n){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(l,a),l.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},l.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=o(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=o(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return u.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,o=function(e,t,r,o,a){var s=i.transformTo("string",a(o));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(e,2)+n(e,2)+n(t,4)+n(r,4)+n(s.length,2)+s}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:o,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},l.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var n=e("../compressions"),o=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var i=new o(t.streamFiles,r,t.platform,t.encodeFileName),a=0;try{e.forEach(function(e,r){a++;var o=function(e,t){var r=e||t,o=n[r];if(!o)throw new Error(r+" is not a valid compression method !");return o}(r.options.compression,t.compression),s=r.options.compressionOptions||t.compressionOptions||{},c=r.dir,u=r.date;r._compressWorker(o,s).withStreamInfo("file",{name:e,dir:c,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(i)}),i.entriesCount=a}catch(e){i.error(e)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var n=e("./utils"),o=e("./external"),i=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function u(e){return new o.Promise(function(t,r){var n=e.decompressed.getContentWorker().pipe(new s);n.on("error",function(e){r(e)}).on("end",function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),c.isNode&&c.isStream(e)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var r=new a(t);return r.load(e),r}).then(function(e){var r=[o.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var i=0;i<n.length;i++)r.push(u(n[i]));return o.Promise.all(r)}).then(function(e){for(var o=e.shift(),i=o.files,a=0;a<i.length;a++){var s=i[a],c=s.fileNameStr,u=n.resolve(s.fileNameStr);r.file(u,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(r.file(u).unsafeOriginalName=c)}return o.zipComment.length&&(r.comment=o.zipComment),r})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var n=e("../utils"),o=e("../stream/GenericWorker");function i(e,t){o.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(i,o),i.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var n=e("readable-stream").Readable;function o(e,t,r){n.call(this,t),this._helper=e;var o=this;e.on("data",function(e,t){o.push(e)||o._helper.pause(),r&&r(t)}).on("error",function(e){o.emit("error",e)}).on("end",function(){o.push(null)})}e("../utils").inherits(o,n),o.prototype._read=function(){this._helper.resume()},t.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,r,n){"use strict";r.exports={isNode:void 0!==t,newBufferFrom:function(e,r){if(t.from&&t.from!==Uint8Array.from)return t.from(e,r);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,r)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var r=new t(e);return r.fill(0),r},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function n(e,t,r){var n,o=i.getTypeOf(t),s=i.extend(r||{},c);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=g(e)),s.createFolders&&(n=f(e))&&m.call(this,n,!0);var h="string"===o&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!h),(t instanceof u&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",o="string");var v=null;v=t instanceof u||t instanceof a?t:d.isNode&&d.isStream(t)?new p(e,t):i.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new l(e,v,s);this.files[e]=y}var o=e("./utf8"),i=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),c=e("./defaults"),u=e("./compressedObject"),l=e("./zipObject"),h=e("./generate"),d=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},m=function(e,t){return t=void 0!==t?t:c.createFolders,e=g(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(e){var t=[];return this.forEach(function(r,n){e(r,n)&&t.push(n)}),t},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,n.call(this,e,t,r),this;if(v(e)){var o=e;return this.filter(function(e,t){return!t.dir&&o.test(e)})}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(e){if(!e)return this;if(v(e))return this.filter(function(t,r){return r.dir&&e.test(t)});var t=this.root+e,r=m.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(t,r){return r.name.slice(0,e.length)===e}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");i.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";t=h.generateWorker(this,r,n)}catch(e){(t=new a("error")).error(e)}return new s(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var n=e("./DataReader");function o(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(o,n),o.prototype.byteAt=function(e){return this.data[this.zero+e]},o.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),o=e.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===t&&this.data[i+1]===r&&this.data[i+2]===n&&this.data[i+3]===o)return i-this.zero;return-1},o.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),o=e.charCodeAt(3),i=this.readData(4);return t===i[0]&&r===i[1]&&n===i[2]&&o===i[3]},o.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var n=e("../utils");function o(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=o},{"../utils":32}],19:[function(e,t,r){"use strict";var n=e("./Uint8ArrayReader");function o(e){n.call(this,e)}e("../utils").inherits(o,n),o.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var n=e("./DataReader");function o(e){n.call(this,e)}e("../utils").inherits(o,n),o.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},o.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},o.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},o.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var n=e("./ArrayReader");function o(e){n.call(this,e)}e("../utils").inherits(o,n),o.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var n=e("../utils"),o=e("../support"),i=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||o.uint8array?"nodebuffer"===t?new s(e):o.uint8array?new c(n.transformTo("uint8array",e)):new i(n.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){"use strict";var n=e("./GenericWorker"),o=e("../utils");function i(e){n.call(this,"ConvertWorker to "+e),this.destType=e}o.inherits(i,n),i.prototype.processChunk=function(e){this.push({data:o.transformTo(this.destType,e.data),meta:e.meta})},t.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var n=e("./GenericWorker"),o=e("../crc32");function i(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(i,n),i.prototype.processChunk=function(e){this.streamInfo.crc32=o(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var n=e("../utils"),o=e("./GenericWorker");function i(e){o.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(i,o),i.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}o.prototype.processChunk.call(this,e)},t.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var n=e("../utils"),o=e("./GenericWorker");function i(e){o.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}n.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,r,n){"use strict";var o=e("../utils"),i=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),c=e("../support"),u=e("../external"),l=null;if(c.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function h(e,r){return new u.Promise(function(n,i){var a=[],c=e._internalType,u=e._outputType,l=e._mimeType;e.on("data",function(e,t){a.push(e),r&&r(t)}).on("error",function(e){a=[],i(e)}).on("end",function(){try{var e=function(e,t,r){switch(e){case"blob":return o.newBlob(o.transformTo("arraybuffer",t),r);case"base64":return s.encode(t);default:return o.transformTo(e,t)}}(u,function(e,r){var n,o=0,i=null,a=0;for(n=0;n<r.length;n++)a+=r[n].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(i=new Uint8Array(a),n=0;n<r.length;n++)i.set(r[n],o),o+=r[n].length;return i;case"nodebuffer":return t.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}(c,a),l);n(e)}catch(e){i(e)}a=[]}).resume()})}function d(e,t,r){var n=t;switch(t){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=t,this._mimeType=r,o.checkSupport(n),this._worker=e.pipe(new i(n)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return h(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,function(e){t.call(r,e.data,e.meta)}):this._worker.on(e,function(){o.delay(t,arguments,r)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(o.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},r.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==t,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var o=new ArrayBuffer(0);try{n.blob=0===new Blob([o],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(o),n.blob=0===i.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){"use strict";for(var n=e("./utils"),o=e("./support"),i=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),c=0;c<256;c++)s[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function l(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,r.utf8encode=function(e){return o.nodebuffer?i.newBufferFrom(e,"utf-8"):function(e){var t,r,n,i,a,s=e.length,c=0;for(i=0;i<s;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=o.uint8array?new Uint8Array(c):new Array(c),i=a=0;a<c;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?t[a++]=r:(r<2048?t[a++]=192|r>>>6:(r<65536?t[a++]=224|r>>>12:(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63),t[a++]=128|r>>>6&63),t[a++]=128|63&r);return t}(e)},r.utf8decode=function(e){return o.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,o,i,a=e.length,c=new Array(2*a);for(t=r=0;t<a;)if((o=e[t++])<128)c[r++]=o;else if(4<(i=s[o]))c[r++]=65533,t+=i-1;else{for(o&=2===i?31:3===i?15:7;1<i&&t<a;)o=o<<6|63&e[t++],i--;1<i?c[r++]=65533:o<65536?c[r++]=o:(o-=65536,c[r++]=55296|o>>10&1023,c[r++]=56320|1023&o)}return c.length!==r&&(c.subarray?c=c.subarray(0,r):c.length=r),n.applyFromCharCode(c)}(e=n.transformTo(o.uint8array?"uint8array":"array",e))},n.inherits(u,a),u.prototype.processChunk=function(e){var t=n.transformTo(o.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var i=t;(t=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),t.set(i,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+s[e[r]]>t?r:t}(t),c=t;a!==t.length&&(o.uint8array?(c=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(c=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:r.utf8decode(c),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=u,n.inherits(l,a),l.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var o=e("./support"),i=e("./base64"),a=e("./nodejsUtils"),s=e("./external");function c(e){return e}function u(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(e,t,r){var n=[],o=0,i=e.length;if(i<=r)return String.fromCharCode.apply(null,e);for(;o<i;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(o,Math.min(o+r,i)))):n.push(String.fromCharCode.apply(null,e.subarray(o,Math.min(o+r,i)))),o+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function h(e){var t=65536,r=n.getTypeOf(e),o=!0;if("uint8array"===r?o=l.applyCanBeUsed.uint8array:"nodebuffer"===r&&(o=l.applyCanBeUsed.nodebuffer),o)for(;1<t;)try{return l.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return l.stringifyByChar(e)}function d(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}n.applyFromCharCode=h;var p={};p.string={string:c,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:function(e){return u(e,a.allocBuffer(e.length))}},p.array={string:h,array:c,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},p.arraybuffer={string:function(e){return h(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:c,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:h,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:c,nodebuffer:function(e){return a.newBufferFrom(e)}},p.nodebuffer={string:h,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:c},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return p[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),r=[],n=0;n<t.length;n++){var o=t[n];"."===o||""===o&&0!==n&&n!==t.length-1||(".."===o?r.pop():r.push(o))}return r.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":o.nodebuffer&&a.isBuffer(e)?"nodebuffer":o.uint8array&&e instanceof Uint8Array?"uint8array":o.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!o[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},n.delay=function(e,t,n){r(function(){e.apply(n||null,t||[])})},n.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},n.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},n.prepareContent=function(e,t,r,a,c){return s.Promise.resolve(t).then(function(e){return o.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise(function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)}):e}).then(function(t){var l=n.getTypeOf(t);return l?("arraybuffer"===l?t=n.transformTo("uint8array",t):"string"===l&&(c?t=i.decode(t):r&&!0!==a&&(t=function(e){return u(e,o.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),o=e("./utils"),i=e("./signature"),a=e("./zipEntry"),s=e("./support");function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(t)+", expected "+o.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",r=o.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,i.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),o=e("./utils"),i=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),c=e("./compressions"),u=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(Object.prototype.hasOwnProperty.call(c,t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,n,o=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<o;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(o)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=o.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var i=o.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var o=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),c=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!n&&(t=t.pipe(new a.Utf8EncodeWorker)),!i&&n&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new o(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof c?this._data:new i(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)n.prototype[u[h]]=l;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var r,n,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,r=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}t.exports=function(e){1!==u.push(e)||n||r()}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var n=e("immediate");function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&p(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(e,t,r){n(function(){var n;try{n=t(r)}catch(n){return i.reject(e,n)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,i.reject(e,t))}function o(t){r||(r=!0,i.resolve(e,t))}var a=f(function(){t(o,n)});"error"===a.status&&n(a.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){throw r})})},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(o);return this.state!==c?h(r,this.state===s?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=f(d,t);if("error"===r.status)return i.reject(e,r.value);var n=r.value;if(n)p(e,n);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},u.reject=function(e){var t=new this(o);return i.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,c=-1,u=new this(o);++c<r;)l(e[c],c);return u;function l(e,o){t.resolve(e).then(function(e){a[o]=e,++s!==r||n||(n=!0,i.resolve(u,a))},function(e){n||(n=!0,i.reject(u,e))})}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a,s=-1,c=new this(o);++s<r;)a=e[s],t.resolve(a).then(function(e){n||(n=!0,i.resolve(c,e))},function(e){n||(n=!0,i.reject(c,e))});return c}},{immediate:36}],38:[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var n=e("./zlib/deflate"),o=e("./utils/common"),i=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),c=Object.prototype.toString,u=0,l=-1,h=0,d=8;function p(e){if(!(this instanceof p))return new p(e);this.options=o.assign({level:l,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==u)throw new Error(a[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,f))!==u)throw new Error(a[r]);this._dict_set=!0}}function f(e,t){var r=new p(t);if(r.push(e,!0),r.err)throw r.msg||a[r.err];return r.result}p.prototype.push=function(e,t){var r,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=i.string2buf(e):"[object ArrayBuffer]"===c.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new o.Buf8(l),s.next_out=0,s.avail_out=l),1!==(r=n.deflate(s,a))&&r!==u)return this.onEnd(r),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(i.buf2binstring(o.shrinkBuf(s.output,s.next_out))):this.onData(o.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===u):2!==a||(this.onEnd(u),!(s.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=p,r.deflate=f,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var n=e("./zlib/inflate"),o=e("./utils/common"),i=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),c=e("./zlib/zstream"),u=e("./zlib/gzheader"),l=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);this.header=new u,n.inflateGetHeader(this.strm,this.header)}function d(e,t){var r=new h(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}h.prototype.push=function(e,t){var r,s,c,u,h,d,p=this.strm,f=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?p.input=i.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new o.Buf8(f),p.next_out=0,p.avail_out=f),(r=n.inflate(p,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&g&&(d="string"==typeof g?i.string2buf(g):"[object ArrayBuffer]"===l.call(g)?new Uint8Array(g):g,r=n.inflateSetDictionary(this.strm,d)),r===a.Z_BUF_ERROR&&!0===m&&(r=a.Z_OK,m=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&r!==a.Z_STREAM_END&&(0!==p.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(c=i.utf8border(p.output,p.next_out),u=p.next_out-c,h=i.buf2string(p.output,c),p.next_out=u,p.avail_out=f-u,u&&o.arraySet(p.output,p.output,c,u,0),this.onData(h)):this.onData(o.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((0<p.avail_in||0===p.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(p.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=h,r.inflate=d,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},r.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,r,n,o){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),o);else for(var i=0;i<n;i++)e[o+i]=t[r+i]},flattenChunks:function(e){var t,r,n,o,i,a;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),t=o=0,r=e.length;t<r;t++)i=e[t],a.set(i,o),o+=i.length;return a}},i={arraySet:function(e,t,r,n,o){for(var i=0;i<n;i++)e[o+i]=t[r+i]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,i))},r.setTyped(n)},{}],42:[function(e,t,r){"use strict";var n=e("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function c(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r}a[254]=a[254]=1,r.string2buf=function(e){var t,r,o,i,a,s=e.length,c=0;for(i=0;i<s;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(o-56320),i++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(c),i=a=0;a<c;i++)55296==(64512&(r=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=e.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(o-56320),i++),r<128?t[a++]=r:(r<2048?t[a++]=192|r>>>6:(r<65536?t[a++]=224|r>>>12:(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63),t[a++]=128|r>>>6&63),t[a++]=128|63&r);return t},r.buf2binstring=function(e){return c(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,o=t.length;r<o;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,o,i,s=t||e.length,u=new Array(2*s);for(r=n=0;r<s;)if((o=e[r++])<128)u[n++]=o;else if(4<(i=a[o]))u[n++]=65533,r+=i-1;else{for(o&=2===i?31:3===i?15:7;1<i&&r<s;)o=o<<6|63&e[r++],i--;1<i?u[n++]=65533:o<65536?u[n++]=o:(o-=65536,u[n++]=55296|o>>10&1023,u[n++]=56320|1023&o)}return c(u,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var o=65535&e,i=e>>>16&65535,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;i=i+(o=o+t[n++]|0)|0,--a;);o%=65521,i%=65521}return o|i<<16}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,o){var i=n,a=o+r;e^=-1;for(var s=o;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,r){"use strict";var n,o=e("../utils/common"),i=e("./trees"),a=e("./adler32"),s=e("./crc32"),c=e("./messages"),u=0,l=4,h=0,d=-2,p=-1,f=4,g=2,m=8,v=9,y=286,w=30,_=19,b=2*y+1,C=15,E=3,T=258,S=T+E+1,k=42,I=113,A=1,R=2,O=3,P=4;function M(e,t){return e.msg=c[t],t}function x(e){return(e<<1)-(4<e?9:0)}function N(e){for(var t=e.length;0<=--t;)e[t]=0}function D(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(o.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function U(e,t){i._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,D(e.strm)}function L(e,t){e.pending_buf[e.pending++]=t}function B(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function H(e,t){var r,n,o=e.max_chain_length,i=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-S?e.strstart-(e.w_size-S):0,u=e.window,l=e.w_mask,h=e.prev,d=e.strstart+T,p=u[i+a-1],f=u[i+a];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(r=t)+a]===f&&u[r+a-1]===p&&u[r]===u[i]&&u[++r]===u[i+1]){i+=2,r++;do{}while(u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&i<d);if(n=T-(d-i),i=d-T,a<n){if(e.match_start=t,s<=(a=n))break;p=u[i+a-1],f=u[i+a]}}}while((t=h[t&l])>c&&0!=--o);return a<=e.lookahead?a:e.lookahead}function q(e){var t,r,n,i,c,u,l,h,d,p,f=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-S)){for(o.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=r=e.hash_size;n=e.head[--t],e.head[t]=f<=n?n-f:0,--r;);for(t=r=f;n=e.prev[--t],e.prev[t]=f<=n?n-f:0,--r;);i+=f}if(0===e.strm.avail_in)break;if(u=e.strm,l=e.window,h=e.strstart+e.lookahead,p=void 0,(d=i)<(p=u.avail_in)&&(p=d),r=0===p?0:(u.avail_in-=p,o.arraySet(l,u.input,u.next_in,p,h),1===u.state.wrap?u.adler=a(u.adler,l,p,h):2===u.state.wrap&&(u.adler=s(u.adler,l,p,h)),u.next_in+=p,u.total_in+=p,p),e.lookahead+=r,e.lookahead+e.insert>=E)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+E-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<E)););}while(e.lookahead<S&&0!==e.strm.avail_in)}function F(e,t){for(var r,n;;){if(e.lookahead<S){if(q(e),e.lookahead<S&&t===u)return A;if(0===e.lookahead)break}if(r=0,e.lookahead>=E&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-S&&(e.match_length=H(e,r)),e.match_length>=E)if(n=i._tr_tally(e,e.strstart-e.match_start,e.match_length-E),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=E){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(U(e,!1),0===e.strm.avail_out))return A}return e.insert=e.strstart<E-1?e.strstart:E-1,t===l?(U(e,!0),0===e.strm.avail_out?O:P):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?A:R}function z(e,t){for(var r,n,o;;){if(e.lookahead<S){if(q(e),e.lookahead<S&&t===u)return A;if(0===e.lookahead)break}if(r=0,e.lookahead>=E&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=E-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-S&&(e.match_length=H(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===E&&4096<e.strstart-e.match_start)&&(e.match_length=E-1)),e.prev_length>=E&&e.match_length<=e.prev_length){for(o=e.strstart+e.lookahead-E,n=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-E),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=E-1,e.strstart++,n&&(U(e,!1),0===e.strm.avail_out))return A}else if(e.match_available){if((n=i._tr_tally(e,0,e.window[e.strstart-1]))&&U(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return A}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<E-1?e.strstart:E-1,t===l?(U(e,!0),0===e.strm.avail_out?O:P):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?A:R}function K(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}function j(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*b),this.dyn_dtree=new o.Buf16(2*(2*w+1)),this.bl_tree=new o.Buf16(2*(2*_+1)),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(C+1),this.heap=new o.Buf16(2*y+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*y+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=g,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?k:I,e.adler=2===t.wrap?0:1,t.last_flush=u,i._tr_init(t),h):M(e,d)}function Y(e){var t=G(e);return t===h&&function(e){e.window_size=2*e.w_size,N(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=E-1,e.match_available=0,e.ins_h=0}(e.state),t}function W(e,t,r,n,i,a){if(!e)return d;var s=1;if(t===p&&(t=6),n<0?(s=0,n=-n):15<n&&(s=2,n-=16),i<1||v<i||r!==m||n<8||15<n||t<0||9<t||a<0||f<a)return M(e,d);8===n&&(n=9);var c=new j;return(e.state=c).strm=e,c.wrap=s,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=i+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+E-1)/E),c.window=new o.Buf8(2*c.w_size),c.head=new o.Buf16(c.hash_size),c.prev=new o.Buf16(c.w_size),c.lit_bufsize=1<<i+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new o.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=r,Y(e)}n=[new K(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(q(e),0===e.lookahead&&t===u)return A;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,U(e,!1),0===e.strm.avail_out))return A;if(e.strstart-e.block_start>=e.w_size-S&&(U(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===l?(U(e,!0),0===e.strm.avail_out?O:P):(e.strstart>e.block_start&&(U(e,!1),e.strm.avail_out),A)}),new K(4,4,8,4,F),new K(4,5,16,8,F),new K(4,6,32,32,F),new K(4,4,16,16,z),new K(8,16,32,32,z),new K(8,16,128,128,z),new K(8,32,128,256,z),new K(32,128,258,1024,z),new K(32,258,258,4096,z)],r.deflateInit=function(e,t){return W(e,t,m,15,8,0)},r.deflateInit2=W,r.deflateReset=Y,r.deflateResetKeep=G,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?d:(e.state.gzhead=t,h):d},r.deflate=function(e,t){var r,o,a,c;if(!e||!e.state||5<t||t<0)return e?M(e,d):d;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||666===o.status&&t!==l)return M(e,0===e.avail_out?-5:d);if(o.strm=e,r=o.last_flush,o.last_flush=t,o.status===k)if(2===o.wrap)e.adler=0,L(o,31),L(o,139),L(o,8),o.gzhead?(L(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),L(o,255&o.gzhead.time),L(o,o.gzhead.time>>8&255),L(o,o.gzhead.time>>16&255),L(o,o.gzhead.time>>24&255),L(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),L(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(L(o,255&o.gzhead.extra.length),L(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=s(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(L(o,0),L(o,0),L(o,0),L(o,0),L(o,0),L(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),L(o,3),o.status=I);else{var p=m+(o.w_bits-8<<4)<<8;p|=(2<=o.strategy||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(p|=32),p+=31-p%31,o.status=I,B(o,p),0!==o.strstart&&(B(o,e.adler>>>16),B(o,65535&e.adler)),e.adler=1}if(69===o.status)if(o.gzhead.extra){for(a=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),D(e),a=o.pending,o.pending!==o.pending_buf_size));)L(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),D(e),a=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,L(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),0===c&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),D(e),a=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,L(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),0===c&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&D(e),o.pending+2<=o.pending_buf_size&&(L(o,255&e.adler),L(o,e.adler>>8&255),e.adler=0,o.status=I)):o.status=I),0!==o.pending){if(D(e),0===e.avail_out)return o.last_flush=-1,h}else if(0===e.avail_in&&x(t)<=x(r)&&t!==l)return M(e,-5);if(666===o.status&&0!==e.avail_in)return M(e,-5);if(0!==e.avail_in||0!==o.lookahead||t!==u&&666!==o.status){var f=2===o.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(q(e),0===e.lookahead)){if(t===u)return A;break}if(e.match_length=0,r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(U(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===l?(U(e,!0),0===e.strm.avail_out?O:P):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?A:R}(o,t):3===o.strategy?function(e,t){for(var r,n,o,a,s=e.window;;){if(e.lookahead<=T){if(q(e),e.lookahead<=T&&t===u)return A;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=E&&0<e.strstart&&(n=s[o=e.strstart-1])===s[++o]&&n===s[++o]&&n===s[++o]){a=e.strstart+T;do{}while(n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&o<a);e.match_length=T-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=E?(r=i._tr_tally(e,1,e.match_length-E),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(U(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===l?(U(e,!0),0===e.strm.avail_out?O:P):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?A:R}(o,t):n[o.level].func(o,t);if(f!==O&&f!==P||(o.status=666),f===A||f===O)return 0===e.avail_out&&(o.last_flush=-1),h;if(f===R&&(1===t?i._tr_align(o):5!==t&&(i._tr_stored_block(o,0,0,!1),3===t&&(N(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),D(e),0===e.avail_out))return o.last_flush=-1,h}return t!==l?h:o.wrap<=0?1:(2===o.wrap?(L(o,255&e.adler),L(o,e.adler>>8&255),L(o,e.adler>>16&255),L(o,e.adler>>24&255),L(o,255&e.total_in),L(o,e.total_in>>8&255),L(o,e.total_in>>16&255),L(o,e.total_in>>24&255)):(B(o,e.adler>>>16),B(o,65535&e.adler)),D(e),0<o.wrap&&(o.wrap=-o.wrap),0!==o.pending?h:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==k&&69!==t&&73!==t&&91!==t&&103!==t&&t!==I&&666!==t?M(e,d):(e.state=null,t===I?M(e,-3):h):d},r.deflateSetDictionary=function(e,t){var r,n,i,s,c,u,l,p,f=t.length;if(!e||!e.state)return d;if(2===(s=(r=e.state).wrap)||1===s&&r.status!==k||r.lookahead)return d;for(1===s&&(e.adler=a(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===s&&(N(r.head),r.strstart=0,r.block_start=0,r.insert=0),p=new o.Buf8(r.w_size),o.arraySet(p,t,f-r.w_size,r.w_size,0),t=p,f=r.w_size),c=e.avail_in,u=e.next_in,l=e.input,e.avail_in=f,e.next_in=0,e.input=t,q(r);r.lookahead>=E;){for(n=r.strstart,i=r.lookahead-(E-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+E-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=E-1,q(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=E-1,r.match_available=0,e.next_in=u,e.input=l,e.avail_in=c,r.wrap=s,h},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,o,i,a,s,c,u,l,h,d,p,f,g,m,v,y,w,_,b,C,E,T,S,k;r=e.state,n=e.next_in,S=e.input,o=n+(e.avail_in-5),i=e.next_out,k=e.output,a=i-(t-e.avail_out),s=i+(e.avail_out-257),c=r.dmax,u=r.wsize,l=r.whave,h=r.wnext,d=r.window,p=r.hold,f=r.bits,g=r.lencode,m=r.distcode,v=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{f<15&&(p+=S[n++]<<f,f+=8,p+=S[n++]<<f,f+=8),w=g[p&v];t:for(;;){if(p>>>=_=w>>>24,f-=_,0==(_=w>>>16&255))k[i++]=65535&w;else{if(!(16&_)){if(!(64&_)){w=g[(65535&w)+(p&(1<<_)-1)];continue t}if(32&_){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}b=65535&w,(_&=15)&&(f<_&&(p+=S[n++]<<f,f+=8),b+=p&(1<<_)-1,p>>>=_,f-=_),f<15&&(p+=S[n++]<<f,f+=8,p+=S[n++]<<f,f+=8),w=m[p&y];r:for(;;){if(p>>>=_=w>>>24,f-=_,!(16&(_=w>>>16&255))){if(!(64&_)){w=m[(65535&w)+(p&(1<<_)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(C=65535&w,f<(_&=15)&&(p+=S[n++]<<f,(f+=8)<_&&(p+=S[n++]<<f,f+=8)),c<(C+=p&(1<<_)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(p>>>=_,f-=_,(_=i-a)<C){if(l<(_=C-_)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(T=d,(E=0)===h){if(E+=u-_,_<b){for(b-=_;k[i++]=d[E++],--_;);E=i-C,T=k}}else if(h<_){if(E+=u+h-_,(_-=h)<b){for(b-=_;k[i++]=d[E++],--_;);if(E=0,h<b){for(b-=_=h;k[i++]=d[E++],--_;);E=i-C,T=k}}}else if(E+=h-_,_<b){for(b-=_;k[i++]=d[E++],--_;);E=i-C,T=k}for(;2<b;)k[i++]=T[E++],k[i++]=T[E++],k[i++]=T[E++],b-=3;b&&(k[i++]=T[E++],1<b&&(k[i++]=T[E++]))}else{for(E=i-C;k[i++]=k[E++],k[i++]=k[E++],k[i++]=k[E++],2<(b-=3););b&&(k[i++]=k[E++],1<b&&(k[i++]=k[E++]))}break}}break}}while(n<o&&i<s);n-=b=f>>3,p&=(1<<(f-=b<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<o?o-n+5:5-(n-o),e.avail_out=i<s?s-i+257:257-(i-s),r.hold=p,r.bits=f}},{}],49:[function(e,t,r){"use strict";var n=e("../utils/common"),o=e("./adler32"),i=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),c=1,u=2,l=0,h=-2,d=1,p=852,f=592;function g(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=d,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(p),t.distcode=t.distdyn=new n.Buf32(f),t.sane=1,t.back=-1,l):h}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,v(e)):h}function w(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?h:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,y(e))):h}function _(e,t){var r,n;return e?(n=new m,(e.state=n).window=null,(r=w(e,t))!==l&&(e.state=null),r):h}var b,C,E=!0;function T(e){if(E){var t;for(b=new n.Buf32(512),C=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(c,e.lens,0,288,b,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,C,0,e.work,{bits:5}),E=!1}e.lencode=b,e.lenbits=9,e.distcode=C,e.distbits=5}function S(e,t,r,o){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),o>=a.wsize?(n.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(o<(i=a.wsize-a.wnext)&&(i=o),n.arraySet(a.window,t,r-o,i,a.wnext),(o-=i)?(n.arraySet(a.window,t,r-o,o,0),a.wnext=o,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}r.inflateReset=y,r.inflateReset2=w,r.inflateResetKeep=v,r.inflateInit=function(e){return _(e,15)},r.inflateInit2=_,r.inflate=function(e,t){var r,p,f,m,v,y,w,_,b,C,E,k,I,A,R,O,P,M,x,N,D,U,L,B,H=0,q=new n.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;12===(r=e.state).mode&&(r.mode=13),v=e.next_out,f=e.output,w=e.avail_out,m=e.next_in,p=e.input,y=e.avail_in,_=r.hold,b=r.bits,C=y,E=w,U=l;e:for(;;)switch(r.mode){case d:if(0===r.wrap){r.mode=13;break}for(;b<16;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}if(2&r.wrap&&35615===_){q[r.check=0]=255&_,q[1]=_>>>8&255,r.check=i(r.check,q,2,0),b=_=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&_)<<8)+(_>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&_)){e.msg="unknown compression method",r.mode=30;break}if(b-=4,D=8+(15&(_>>>=4)),0===r.wbits)r.wbits=D;else if(D>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<D,e.adler=r.check=1,r.mode=512&_?10:12,b=_=0;break;case 2:for(;b<16;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}if(r.flags=_,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=_>>8&1),512&r.flags&&(q[0]=255&_,q[1]=_>>>8&255,r.check=i(r.check,q,2,0)),b=_=0,r.mode=3;case 3:for(;b<32;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}r.head&&(r.head.time=_),512&r.flags&&(q[0]=255&_,q[1]=_>>>8&255,q[2]=_>>>16&255,q[3]=_>>>24&255,r.check=i(r.check,q,4,0)),b=_=0,r.mode=4;case 4:for(;b<16;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}r.head&&(r.head.xflags=255&_,r.head.os=_>>8),512&r.flags&&(q[0]=255&_,q[1]=_>>>8&255,r.check=i(r.check,q,2,0)),b=_=0,r.mode=5;case 5:if(1024&r.flags){for(;b<16;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}r.length=_,r.head&&(r.head.extra_len=_),512&r.flags&&(q[0]=255&_,q[1]=_>>>8&255,r.check=i(r.check,q,2,0)),b=_=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(y<(k=r.length)&&(k=y),k&&(r.head&&(D=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,p,m,k,D)),512&r.flags&&(r.check=i(r.check,p,k,m)),y-=k,m+=k,r.length-=k),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===y)break e;for(k=0;D=p[m+k++],r.head&&D&&r.length<65536&&(r.head.name+=String.fromCharCode(D)),D&&k<y;);if(512&r.flags&&(r.check=i(r.check,p,k,m)),y-=k,m+=k,D)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===y)break e;for(k=0;D=p[m+k++],r.head&&D&&r.length<65536&&(r.head.comment+=String.fromCharCode(D)),D&&k<y;);if(512&r.flags&&(r.check=i(r.check,p,k,m)),y-=k,m+=k,D)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;b<16;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}if(_!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}b=_=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;b<32;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}e.adler=r.check=g(_),b=_=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=v,e.avail_out=w,e.next_in=m,e.avail_in=y,r.hold=_,r.bits=b,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){_>>>=7&b,b-=7&b,r.mode=27;break}for(;b<3;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}switch(r.last=1&_,b-=1,3&(_>>>=1)){case 0:r.mode=14;break;case 1:if(T(r),r.mode=20,6!==t)break;_>>>=2,b-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}_>>>=2,b-=2;break;case 14:for(_>>>=7&b,b-=7&b;b<32;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}if((65535&_)!=(_>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&_,b=_=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(k=r.length){if(y<k&&(k=y),w<k&&(k=w),0===k)break e;n.arraySet(f,p,m,k,v),y-=k,m+=k,w-=k,v+=k,r.length-=k;break}r.mode=12;break;case 17:for(;b<14;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}if(r.nlen=257+(31&_),_>>>=5,b-=5,r.ndist=1+(31&_),_>>>=5,b-=5,r.ncode=4+(15&_),_>>>=4,b-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;b<3;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}r.lens[F[r.have++]]=7&_,_>>>=3,b-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},U=s(0,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,U){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;O=(H=r.lencode[_&(1<<r.lenbits)-1])>>>16&255,P=65535&H,!((R=H>>>24)<=b);){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}if(P<16)_>>>=R,b-=R,r.lens[r.have++]=P;else{if(16===P){for(B=R+2;b<B;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}if(_>>>=R,b-=R,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}D=r.lens[r.have-1],k=3+(3&_),_>>>=2,b-=2}else if(17===P){for(B=R+3;b<B;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}b-=R,D=0,k=3+(7&(_>>>=R)),_>>>=3,b-=3}else{for(B=R+7;b<B;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}b-=R,D=0,k=11+(127&(_>>>=R)),_>>>=7,b-=7}if(r.have+k>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;k--;)r.lens[r.have++]=D}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,L={bits:r.lenbits},U=s(c,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,U){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},U=s(u,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,U){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=y&&258<=w){e.next_out=v,e.avail_out=w,e.next_in=m,e.avail_in=y,r.hold=_,r.bits=b,a(e,E),v=e.next_out,f=e.output,w=e.avail_out,m=e.next_in,p=e.input,y=e.avail_in,_=r.hold,b=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;O=(H=r.lencode[_&(1<<r.lenbits)-1])>>>16&255,P=65535&H,!((R=H>>>24)<=b);){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}if(O&&!(240&O)){for(M=R,x=O,N=P;O=(H=r.lencode[N+((_&(1<<M+x)-1)>>M)])>>>16&255,P=65535&H,!(M+(R=H>>>24)<=b);){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}_>>>=M,b-=M,r.back+=M}if(_>>>=R,b-=R,r.back+=R,r.length=P,0===O){r.mode=26;break}if(32&O){r.back=-1,r.mode=12;break}if(64&O){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&O,r.mode=22;case 22:if(r.extra){for(B=r.extra;b<B;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}r.length+=_&(1<<r.extra)-1,_>>>=r.extra,b-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;O=(H=r.distcode[_&(1<<r.distbits)-1])>>>16&255,P=65535&H,!((R=H>>>24)<=b);){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}if(!(240&O)){for(M=R,x=O,N=P;O=(H=r.distcode[N+((_&(1<<M+x)-1)>>M)])>>>16&255,P=65535&H,!(M+(R=H>>>24)<=b);){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}_>>>=M,b-=M,r.back+=M}if(_>>>=R,b-=R,r.back+=R,64&O){e.msg="invalid distance code",r.mode=30;break}r.offset=P,r.extra=15&O,r.mode=24;case 24:if(r.extra){for(B=r.extra;b<B;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}r.offset+=_&(1<<r.extra)-1,_>>>=r.extra,b-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===w)break e;if(k=E-w,r.offset>k){if((k=r.offset-k)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}I=k>r.wnext?(k-=r.wnext,r.wsize-k):r.wnext-k,k>r.length&&(k=r.length),A=r.window}else A=f,I=v-r.offset,k=r.length;for(w<k&&(k=w),w-=k,r.length-=k;f[v++]=A[I++],--k;);0===r.length&&(r.mode=21);break;case 26:if(0===w)break e;f[v++]=r.length,w--,r.mode=21;break;case 27:if(r.wrap){for(;b<32;){if(0===y)break e;y--,_|=p[m++]<<b,b+=8}if(E-=w,e.total_out+=E,r.total+=E,E&&(e.adler=r.check=r.flags?i(r.check,f,E,v-E):o(r.check,f,E,v-E)),E=w,(r.flags?_:g(_))!==r.check){e.msg="incorrect data check",r.mode=30;break}b=_=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;b<32;){if(0===y)break e;y--,_+=p[m++]<<b,b+=8}if(_!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}b=_=0}r.mode=29;case 29:U=1;break e;case 30:U=-3;break e;case 31:return-4;default:return h}return e.next_out=v,e.avail_out=w,e.next_in=m,e.avail_in=y,r.hold=_,r.bits=b,(r.wsize||E!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&S(e,e.output,e.next_out,E-e.avail_out)?(r.mode=31,-4):(C-=e.avail_in,E-=e.avail_out,e.total_in+=C,e.total_out+=E,r.total+=E,r.wrap&&E&&(e.adler=r.check=r.flags?i(r.check,f,E,e.next_out-E):o(r.check,f,E,e.next_out-E)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==C&&0===E||4===t)&&U===l&&(U=-5),U)},r.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,l},r.inflateGetHeader=function(e,t){var r;return e&&e.state&&2&(r=e.state).wrap?((r.head=t).done=!1,l):h},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?h:11===r.mode&&o(1,t,n,0)!==r.check?-3:S(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,l):h},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var n=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,c,u,l,h,d){var p,f,g,m,v,y,w,_,b,C=d.bits,E=0,T=0,S=0,k=0,I=0,A=0,R=0,O=0,P=0,M=0,x=null,N=0,D=new n.Buf16(16),U=new n.Buf16(16),L=null,B=0;for(E=0;E<=15;E++)D[E]=0;for(T=0;T<c;T++)D[t[r+T]]++;for(I=C,k=15;1<=k&&0===D[k];k--);if(k<I&&(I=k),0===k)return u[l++]=20971520,u[l++]=20971520,d.bits=1,0;for(S=1;S<k&&0===D[S];S++);for(I<S&&(I=S),E=O=1;E<=15;E++)if(O<<=1,(O-=D[E])<0)return-1;if(0<O&&(0===e||1!==k))return-1;for(U[1]=0,E=1;E<15;E++)U[E+1]=U[E]+D[E];for(T=0;T<c;T++)0!==t[r+T]&&(h[U[t[r+T]]++]=T);if(y=0===e?(x=L=h,19):1===e?(x=o,N-=257,L=i,B-=257,256):(x=a,L=s,-1),E=S,v=l,R=T=M=0,g=-1,m=(P=1<<(A=I))-1,1===e&&852<P||2===e&&592<P)return 1;for(;;){for(w=E-R,b=h[T]<y?(_=0,h[T]):h[T]>y?(_=L[B+h[T]],x[N+h[T]]):(_=96,0),p=1<<E-R,S=f=1<<A;u[v+(M>>R)+(f-=p)]=w<<24|_<<16|b,0!==f;);for(p=1<<E-1;M&p;)p>>=1;if(0!==p?(M&=p-1,M+=p):M=0,T++,0==--D[E]){if(E===k)break;E=t[r+h[T]]}if(I<E&&(M&m)!==g){for(0===R&&(R=I),v+=S,O=1<<(A=E-R);A+R<k&&!((O-=D[A+R])<=0);)A++,O<<=1;if(P+=1<<A,1===e&&852<P||2===e&&592<P)return 1;u[g=M&m]=I<<24|A<<16|v-l}}return 0!==M&&(u[v+M]=E-R<<24|64<<16),d.bits=I,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var n=e("../utils/common"),o=0,i=1;function a(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,c=29,u=256,l=u+1+c,h=30,d=19,p=2*l+1,f=15,g=16,m=7,v=256,y=16,w=17,_=18,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(l+2));a(S);var k=new Array(2*h);a(k);var I=new Array(512);a(I);var A=new Array(256);a(A);var R=new Array(c);a(R);var O,P,M,x=new Array(h);function N(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}function D(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function U(e){return e<256?I[e]:I[256+(e>>>7)]}function L(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function B(e,t,r){e.bi_valid>g-r?(e.bi_buf|=t<<e.bi_valid&65535,L(e,e.bi_buf),e.bi_buf=t>>g-e.bi_valid,e.bi_valid+=r-g):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function H(e,t,r){B(e,r[2*t],r[2*t+1])}function q(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function F(e,t,r){var n,o,i=new Array(f+1),a=0;for(n=1;n<=f;n++)i[n]=a=a+r[n-1]<<1;for(o=0;o<=t;o++){var s=e[2*o+1];0!==s&&(e[2*o]=q(i[s]++,s))}}function z(e){var t;for(t=0;t<l;t++)e.dyn_ltree[2*t]=0;for(t=0;t<h;t++)e.dyn_dtree[2*t]=0;for(t=0;t<d;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*v]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function K(e){8<e.bi_valid?L(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function j(e,t,r,n){var o=2*t,i=2*r;return e[o]<e[i]||e[o]===e[i]&&n[t]<=n[r]}function G(e,t,r){for(var n=e.heap[r],o=r<<1;o<=e.heap_len&&(o<e.heap_len&&j(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!j(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n}function Y(e,t,r){var n,o,i,a,s=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],o=e.pending_buf[e.l_buf+s],s++,0===n?H(e,o,t):(H(e,(i=A[o])+u+1,t),0!==(a=b[i])&&B(e,o-=R[i],a),H(e,i=U(--n),r),0!==(a=C[i])&&B(e,n-=x[i],a)),s<e.last_lit;);H(e,v,t)}function W(e,t){var r,n,o,i=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=p,r=0;r<c;r++)0!==i[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[o]=0,e.opt_len--,s&&(e.static_len-=a[2*o+1]);for(t.max_code=u,r=e.heap_len>>1;1<=r;r--)G(e,i,r);for(o=c;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],G(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*o]=i[2*r]+i[2*n],e.depth[o]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=o,e.heap[1]=o++,G(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,o,i,a,s,c=t.dyn_tree,u=t.max_code,l=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,m=t.stat_desc.max_length,v=0;for(i=0;i<=f;i++)e.bl_count[i]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<p;r++)m<(i=c[2*c[2*(n=e.heap[r])+1]+1]+1)&&(i=m,v++),c[2*n+1]=i,u<n||(e.bl_count[i]++,a=0,g<=n&&(a=d[n-g]),s=c[2*n],e.opt_len+=s*(i+a),h&&(e.static_len+=s*(l[2*n+1]+a)));if(0!==v){do{for(i=m-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[m]--,v-=2}while(0<v);for(i=m;0!==i;i--)for(n=e.bl_count[i];0!==n;)u<(o=e.heap[--r])||(c[2*o+1]!==i&&(e.opt_len+=(i-c[2*o+1])*c[2*o],c[2*o+1]=i),n--)}}(e,t),F(i,u,e.bl_count)}function Q(e,t,r){var n,o,i=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)o=a,a=t[2*(n+1)+1],++s<c&&o===a||(s<u?e.bl_tree[2*o]+=s:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[2*y]++):s<=10?e.bl_tree[2*w]++:e.bl_tree[2*_]++,i=o,u=(s=0)===a?(c=138,3):o===a?(c=6,3):(c=7,4))}function V(e,t,r){var n,o,i=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),n=0;n<=r;n++)if(o=a,a=t[2*(n+1)+1],!(++s<c&&o===a)){if(s<u)for(;H(e,o,e.bl_tree),0!=--s;);else 0!==o?(o!==i&&(H(e,o,e.bl_tree),s--),H(e,y,e.bl_tree),B(e,s-3,2)):s<=10?(H(e,w,e.bl_tree),B(e,s-3,3)):(H(e,_,e.bl_tree),B(e,s-11,7));i=o,u=(s=0)===a?(c=138,3):o===a?(c=6,3):(c=7,4)}}a(x);var X=!1;function J(e,t,r,o){B(e,(s<<1)+(o?1:0),3),function(e,t,r,o){K(e),o&&(L(e,r),L(e,~r)),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}r._tr_init=function(e){X||(function(){var e,t,r,n,o,i=new Array(f+1);for(n=r=0;n<c-1;n++)for(R[n]=r,e=0;e<1<<b[n];e++)A[r++]=n;for(A[r-1]=n,n=o=0;n<16;n++)for(x[n]=o,e=0;e<1<<C[n];e++)I[o++]=n;for(o>>=7;n<h;n++)for(x[n]=o<<7,e=0;e<1<<C[n]-7;e++)I[256+o++]=n;for(t=0;t<=f;t++)i[t]=0;for(e=0;e<=143;)S[2*e+1]=8,e++,i[8]++;for(;e<=255;)S[2*e+1]=9,e++,i[9]++;for(;e<=279;)S[2*e+1]=7,e++,i[7]++;for(;e<=287;)S[2*e+1]=8,e++,i[8]++;for(F(S,l+1,i),e=0;e<h;e++)k[2*e+1]=5,k[2*e]=q(e,5);O=new N(S,b,u+1,l,f),P=new N(k,C,0,h,f),M=new N(new Array(0),E,0,d,m)}(),X=!0),e.l_desc=new D(e.dyn_ltree,O),e.d_desc=new D(e.dyn_dtree,P),e.bl_desc=new D(e.bl_tree,M),e.bi_buf=0,e.bi_valid=0,z(e)},r._tr_stored_block=J,r._tr_flush_block=function(e,t,r,n){var a,s,c=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return i;for(t=32;t<u;t++)if(0!==e.dyn_ltree[2*t])return i;return o}(e)),W(e,e.l_desc),W(e,e.d_desc),c=function(e){var t;for(Q(e,e.dyn_ltree,e.l_desc.max_code),Q(e,e.dyn_dtree,e.d_desc.max_code),W(e,e.bl_desc),t=d-1;3<=t&&0===e.bl_tree[2*T[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=r+5,r+4<=a&&-1!==t?J(e,t,r,n):4===e.strategy||s===a?(B(e,2+(n?1:0),3),Y(e,S,k)):(B(e,4+(n?1:0),3),function(e,t,r,n){var o;for(B(e,t-257,5),B(e,r-1,5),B(e,n-4,4),o=0;o<n;o++)B(e,e.bl_tree[2*T[o]+1],3);V(e,e.dyn_ltree,t-1),V(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),Y(e,e.dyn_ltree,e.dyn_dtree)),z(e),n&&K(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(A[r]+u+1)]++,e.dyn_dtree[2*U(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){B(e,2,3),H(e,v,S),function(e){16===e.bi_valid?(L(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var r,n,i,a,s=1,c={},u=!1,l=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,r="[object process]"==={}.toString.call(e.process)?function(e){o.nextTick(function(){p(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(a="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(n=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(p,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return c[s]=o,r(s),s++},h.clearImmediate=d}function d(e){delete c[e]}function p(e){if(u)setTimeout(p,0,e);else{var r=c[e];if(r){u=!0;try{!function(e){var r=e.callback,n=e.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(t,n)}}(r)}finally{d(e),u=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}).call(this,r(397).Buffer,r(165).setImmediate,r(35),r(205))},703:function(e,t,r){"use strict";r(108);var n={methods:{setColorValue(e){let t={r:0,g:0,b:0,a:1};/#/.test(e)?t=this.hex2rgb(e):/rgb/.test(e)?t=this.rgb2rgba(e):"string"==typeof e?t=this.rgb2rgba(`rgba(${e})`):"[object Object]"===Object.prototype.toString.call(e)&&(t=e);const{r:r,g:n,b:o,a:i}=t,{h:a,s:s,v:c}=this.rgb2hsv(t);return{r:r,g:n,b:o,a:void 0===i?1:i,h:a,s:s,v:c}},createAlphaSquare(e){const t=document.createElement("canvas"),r=t.getContext("2d"),n=2*e;return t.width=n,t.height=n,r.fillStyle="#ffffff",r.fillRect(0,0,n,n),r.fillStyle="#ccd5db",r.fillRect(0,0,e,e),r.fillRect(e,e,e,e),t},createLinearGradient(e,t,r,n,o,i){const a="l"===e,s=t.createLinearGradient(0,0,a?r:0,a?0:n);s.addColorStop(.01,o),s.addColorStop(.99,i),t.fillStyle=s,t.fillRect(0,0,r,n)},rgb2hex({r:e,g:t,b:r},n){const o=e=>("0"+Number(e).toString(16)).slice(-2),i=`#${o(e)}${o(t)}${o(r)}`;return n?i.toUpperCase():i},hex2rgb(e){const t=e=>parseInt(e,16)||0;return{r:t((e=e.slice(1)).slice(0,2)),g:t(e.slice(2,4)),b:t(e.slice(4,6))}},rgb2rgba:e=>"string"==typeof e?(e=(/rgba?\((.*?)\)/.exec(e)||["","0,0,0,1"])[1].split(","),{r:Number(e[0])||0,g:Number(e[1])||0,b:Number(e[2])||0,a:Number(e[3]?e[3]:1)}):e,rgb2hsv({r:e,g:t,b:r}){e/=255,t/=255,r/=255;const n=Math.max(e,t,r),o=Math.min(e,t,r),i=n-o;let a=0;return n===o?a=0:n===e?a=t>=r?60*(t-r)/i:60*(t-r)/i+360:n===t?a=60*(r-e)/i+120:n===r&&(a=60*(e-t)/i+240),a=Math.floor(a),{h:a,s:parseFloat((0===n?0:1-o/n).toFixed(2)),v:parseFloat(n.toFixed(2))}}}},o=r(23),i=(r(203),{mixins:[n],props:{color:{type:String,default:"#000000"},hsv:{type:Object,default:null},size:{type:Number,default:152}},data:function(){return{slideSaturationStyle:{}}},mounted:function(){this.renderColor(),this.renderSlide()},methods:{renderColor:function(){var e=this.$refs.canvasSaturation,t=this.size,r=e.getContext("2d");e.width=t,e.height=t,r.fillStyle=this.color,r.fillRect(0,0,t,t),this.createLinearGradient("l",r,t,t,"#FFFFFF","rgba(255,255,255,0)"),this.createLinearGradient("p",r,t,t,"rgba(0,0,0,0)","#000000")},renderSlide:function(){this.slideSaturationStyle={left:this.hsv.s*this.size-5+"px",top:(1-this.hsv.v)*this.size-5+"px"}},selectSaturation:function(e){var t=this,r=this.$el.getBoundingClientRect(),n=r.top,i=r.left,a=e.target.getContext("2d"),s=function(e){var r=e.clientX-i,s=e.clientY-n;r<0&&(r=0),s<0&&(s=0),r>t.size&&(r=t.size),s>t.size&&(s=t.size),t.slideSaturationStyle={left:r-5+"px",top:s-5+"px"};var c=a.getImageData(Math.min(r,t.size-1),Math.min(s,t.size-1),1,1),u=Object(o.a)(c.data,3),l=u[0],h=u[1],d=u[2];t.$emit("selectSaturation",{r:l,g:h,b:d})};s(e);var c=function(){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",c)}}}),a=(r(672),r(83)),s=Object(a.a)(i,function(){var e=this,t=e._self._c;return t("div",{staticClass:"saturation",on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.selectSaturation.apply(null,arguments)}}},[t("canvas",{ref:"canvasSaturation"}),e._v(" "),t("div",{staticClass:"slide",style:e.slideSaturationStyle})])},[],!1,null,null,null),c=s.exports,u={props:{hsv:{type:Object,default:null},width:{type:Number,default:15},height:{type:Number,default:152}},data:function(){return{slideHueStyle:{}}},mounted:function(){this.renderColor(),this.renderSlide()},methods:{renderColor:function(){var e=this.$refs.canvasHue,t=this.width,r=this.height,n=e.getContext("2d");e.width=t,e.height=r;var o=n.createLinearGradient(0,0,0,r);o.addColorStop(0,"#FF0000"),o.addColorStop(.17,"#FF00FF"),o.addColorStop(.34,"#0000FF"),o.addColorStop(.51,"#00FFFF"),o.addColorStop(.68,"#00FF00"),o.addColorStop(.17*5,"#FFFF00"),o.addColorStop(1,"#FF0000"),n.fillStyle=o,n.fillRect(0,0,t,r)},renderSlide:function(){this.slideHueStyle={top:(1-this.hsv.h/360)*this.height-2+"px"}},selectHue:function(e){var t=this,r=this.$el.getBoundingClientRect().top,n=e.target.getContext("2d"),i=function(e){var i=e.clientY-r;i<0&&(i=0),i>t.height&&(i=t.height),t.slideHueStyle={top:i-2+"px"};var a=n.getImageData(0,Math.min(i,t.height-1),1,1),s=Object(o.a)(a.data,3),c=s[0],u=s[1],l=s[2];t.$emit("selectHue",{r:c,g:u,b:l})};i(e);var a=function(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",a)}}},l=(r(674),Object(a.a)(u,function(){var e=this,t=e._self._c;return t("div",{staticClass:"hue",on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.selectHue.apply(null,arguments)}}},[t("canvas",{ref:"canvasHue"}),e._v(" "),t("div",{staticClass:"slide",style:e.slideHueStyle})])},[],!1,null,null,null)),h=l.exports,d=(r(324),{mixins:[n],props:{color:{type:String,default:"#000000"},rgba:{type:Object,default:null},width:{type:Number,default:15},height:{type:Number,default:152}},data:function(){return{slideAlphaStyle:{},alphaSize:5}},watch:{color:function(){this.renderColor()},"rgba.a":function(){this.renderSlide()}},mounted:function(){this.renderColor(),this.renderSlide()},methods:{renderColor:function(){var e=this.$refs.canvasAlpha,t=this.width,r=this.height,n=this.alphaSize,o=this.createAlphaSquare(n),i=e.getContext("2d");e.width=t,e.height=r,i.fillStyle=i.createPattern(o,"repeat"),i.fillRect(0,0,t,r),this.createLinearGradient("p",i,t,r,"rgba(255,255,255,0)",this.color)},renderSlide:function(){this.slideAlphaStyle={top:this.rgba.a*this.height-2+"px"}},selectAlpha:function(e){var t=this,r=this.$el.getBoundingClientRect().top,n=function(e){var n=e.clientY-r;n<0&&(n=0),n>t.height&&(n=t.height);var o=parseFloat((n/t.height).toFixed(2));t.$emit("selectAlpha",o)};n(e);var o=function(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",o)}}}),p=(r(676),Object(a.a)(d,function(){var e=this,t=e._self._c;return t("div",{staticClass:"color-alpha",on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.selectAlpha.apply(null,arguments)}}},[t("canvas",{ref:"canvasAlpha"}),e._v(" "),t("div",{staticClass:"slide",style:e.slideAlphaStyle})])},[],!1,null,null,null)),f=p.exports,g={mixins:[n],props:{color:{type:String,default:"#000000"},width:{type:Number,default:100},height:{type:Number,default:30}},data:function(){return{alphaSize:5}},watch:{color:function(){this.renderColor()}},mounted:function(){this.renderColor()},methods:{renderColor:function(){var e=this.$el,t=this.width,r=this.height,n=this.alphaSize,o=this.createAlphaSquare(n),i=e.getContext("2d");e.width=t,e.height=r,i.fillStyle=i.createPattern(o,"repeat"),i.fillRect(0,0,t,r),i.fillStyle=this.color,i.fillRect(0,0,t,r)}}},m=Object(a.a)(g,function(){return(0,this._self._c)("canvas")},[],!1,null,null,null).exports,v=r(678),y=r.n(v),w={props:{suckerCanvas:{type:null,default:null},suckerArea:{type:Array,default:function(){return[]}}},data:function(){return{isOpenSucker:!1,suckerPreview:null,isSucking:!1}},watch:{suckerCanvas:function(e){this.isSucking=!1,this.suckColor(e),e.style.cursor="url(".concat(y.a,") 0 32, default")}},methods:{openSucker:function(){this.isOpenSucker?this.keydownHandler({keyCode:27}):(this.isOpenSucker=!0,this.isSucking=!0,this.$emit("openSucker",!0),document.addEventListener("keydown",this.keydownHandler))},keydownHandler:function(e){27===e.keyCode&&(this.isOpenSucker=!1,this.isSucking=!1,this.$emit("openSucker",!1),document.removeEventListener("keydown",this.keydownHandler),document.removeEventListener("mousemove",this.mousemoveHandler),document.removeEventListener("mouseup",this.mousemoveHandler),this.suckerPreview&&(document.body.removeChild(this.suckerPreview),this.suckerPreview=null))},mousemoveHandler:function(e){var t=e.clientX,r=e.clientY,n=this.suckerCanvas.getBoundingClientRect(),i=n.top,a=n.left,s=n.width,c=n.height,u=t-a,l=r-i,h=this.suckerCanvas.getContext("2d").getImageData(Math.min(u,s-1),Math.min(l,c-1),1,1),d=Object(o.a)(h.data,4),p=d[0],f=d[1],g=d[2],m=d[3];m=parseFloat((m/255).toFixed(2));var v=this.suckerPreview.style;Object.assign(v,{position:"absolute",left:t+20+"px",top:r-36+"px",width:"24px",height:"24px",borderRadius:"50%",border:"2px solid #fff",boxShadow:"0 0 8px 0 rgba(0, 0, 0, 0.16)",background:"rgba(".concat(p,", ").concat(f,", ").concat(g,", ").concat(m,")"),zIndex:95}),t>=this.suckerArea[0]&&r>=this.suckerArea[1]&&t<=this.suckerArea[2]&&r<=this.suckerArea[3]?v.display="":v.display="none"},suckColor:function(e){var t=this;e&&"CANVAS"!==e.tagName||(this.suckerPreview=document.createElement("div"),document.body.appendChild(this.suckerPreview),document.addEventListener("mousemove",this.mousemoveHandler),document.addEventListener("mouseup",this.mousemoveHandler),e.addEventListener("click",function(r){var n=r.clientX,i=r.clientY,a=e.getBoundingClientRect(),s=a.top,c=a.left,u=a.width,l=a.height,h=n-c,d=i-s,p=e.getContext("2d").getImageData(Math.min(h,u-1),Math.min(d,l-1),1,1),f=Object(o.a)(p.data,4),g=f[0],m=f[1],v=f[2],y=f[3];y=parseFloat((y/255).toFixed(2)),t.$emit("selectSucker",{r:g,g:m,b:v,a:y})}))}}},_=(r(679),Object(a.a)(w,function(){var e=this,t=e._self._c;return t("div",[e.isSucking?e._e():t("svg",{staticClass:"sucker",class:{active:e.isOpenSucker},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"-12 -12 48 48"},on:{click:e.openSucker}},[t("path",{attrs:{d:"M13.1,8.2l5.6,5.6c0.4,0.4,0.5,1.1,0.1,1.5s-1.1,0.5-1.5,0.1c0,0-0.1,0-0.1-0.1l-1.4-1.4l-7.7,7.7C7.9,21.9,7.6,22,7.3,22H3.1C2.5,22,2,21.5,2,20.9l0,0v-4.2c0-0.3,0.1-0.6,0.3-0.8l5.8-5.8C8.5,9.7,9.2,9.6,9.7,10s0.5,1.1,0.1,1.5c0,0,0,0.1-0.1,0.1l-5.5,5.5v2.7h2.7l7.4-7.4L8.7,6.8c-0.5-0.4-0.5-1-0.1-1.5s1.1-0.5,1.5-0.1c0,0,0.1,0,0.1,0.1l1.4,1.4l3.5-3.5c1.6-1.6,4.1-1.6,5.8-0.1c1.6,1.6,1.6,4.1,0.1,5.8L20.9,9l-3.6,3.6c-0.4,0.4-1.1,0.5-1.5,0.1"}})]),e._v(" "),e.isSucking?t("svg",{staticClass:"sucker",attrs:{viewBox:"-16 -16 68 68",xmlns:"http://www.w3.org/2000/svg",stroke:"#9099a4"}},[t("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[t("g",{attrs:{transform:"translate(1 1)","stroke-width":"4"}},[t("circle",{attrs:{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}}),e._v(" "),t("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})],1)])])]):e._e()])},[],!1,null,null,null).exports),b=(r(40),{props:{name:{type:String,default:""},color:{type:String,default:""}},computed:{modelColor:{get:function(){return this.color},set:function(e){this.$emit("inputColor",e)}}}}),C=(r(681),Object(a.a)(b,function(){var e=this,t=e._self._c;return t("div",{staticClass:"color-type"},[t("span",{staticClass:"name"},[e._v("\n        "+e._s(e.name)+"\n    ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.modelColor,expression:"modelColor"}],staticClass:"value",domProps:{value:e.modelColor},on:{input:function(t){t.target.composing||(e.modelColor=t.target.value)}}})])},[],!1,null,null,null).exports),E=(r(200),r(72),{mixins:[n],props:{color:{type:String,default:"#000000"},colorsDefault:{type:Array,default:function(){return[]}},colorsHistoryKey:{type:String,default:""}},data:function(){return{imgAlphaBase64:"",colorsHistory:JSON.parse(localStorage.getItem(this.colorsHistoryKey))||[]}},created:function(){this.imgAlphaBase64=this.createAlphaSquare(4).toDataURL()},destroyed:function(){this.setColorsHistory(this.color)},methods:{selectColor:function(e){this.$emit("selectColor",e)},setColorsHistory:function(e){if(e){var t=this.colorsHistory,r=t.indexOf(e);r>=0&&t.splice(r,1),t.length>=8&&(t.length=7),t.unshift(e),this.colorsHistory=t,localStorage.setItem(this.colorsHistoryKey,JSON.stringify(t))}}}}),T=(r(683),{components:{Saturation:c,Hue:h,Alpha:f,Preview:m,Sucker:_,Box:C,Colors:Object(a.a)(E,function(){var e=this,t=e._self._c;return t("div",[t("ul",{staticClass:"colors"},e._l(e.colorsDefault,function(r){return t("li",{key:r,staticClass:"item",on:{click:function(t){return e.selectColor(r)}}},[t("div",{staticClass:"alpha",style:{background:"url(".concat(e.imgAlphaBase64,")")}}),e._v(" "),t("div",{staticClass:"color",style:{background:r}})])}),0),e._v(" "),e.colorsHistory.length?t("ul",{staticClass:"colors history"},e._l(e.colorsHistory,function(r){return t("li",{key:r,staticClass:"item",on:{click:function(t){return e.selectColor(r)}}},[t("div",{staticClass:"alpha",style:{background:"url(".concat(e.imgAlphaBase64,")")}}),e._v(" "),t("div",{staticClass:"color",style:{background:r}})])}),0):e._e()])},[],!1,null,null,null).exports},mixins:[n],props:{color:{type:String,default:"#000000"},theme:{type:String,default:"dark"},suckerHide:{type:Boolean,default:!0},suckerCanvas:{type:null,default:null},suckerArea:{type:Array,default:function(){return[]}},colorsDefault:{type:Array,default:function(){return["#000000","#FFFFFF","#FF1900","#F47365","#FFB243","#FFE623","#6EFF2A","#1BC7B1","#00BEFF","#2E81FF","#5D61FF","#FF89CF","#FC3CAD","#BF3DCE","#8E00A7","rgba(0,0,0,0)"]}},colorsHistoryKey:{type:String,default:"vue-colorpicker-history"}},data:function(){return{hueWidth:15,hueHeight:152,previewHeight:30,modelRgba:"",modelHex:"",r:0,g:0,b:0,a:1,h:0,s:0,v:0}},computed:{isLightTheme:function(){return"light"===this.theme},totalWidth:function(){return this.hueHeight+2*(this.hueWidth+8)},previewWidth:function(){return this.totalWidth-(this.suckerHide?0:this.previewHeight)},rgba:function(){return{r:this.r,g:this.g,b:this.b,a:this.a}},hsv:function(){return{h:this.h,s:this.s,v:this.v}},rgbString:function(){return"rgb(".concat(this.r,", ").concat(this.g,", ").concat(this.b,")")},rgbaStringShort:function(){return"".concat(this.r,", ").concat(this.g,", ").concat(this.b,", ").concat(this.a)},rgbaString:function(){return"rgba(".concat(this.rgbaStringShort,")")},hexString:function(){return this.rgb2hex(this.rgba,!0)}},created:function(){var e=this;Object.assign(this,this.setColorValue(this.color)),this.setText(),this.$watch("rgba",function(){e.$emit("changeColor",{rgba:e.rgba,hsv:e.hsv,hex:e.modelHex})})},methods:{selectSaturation:function(e){var t=this.setColorValue(e),r=t.r,n=t.g,o=t.b,i=t.h,a=t.s,s=t.v;Object.assign(this,{r:r,g:n,b:o,h:i,s:a,v:s}),this.setText()},selectHue:function(e){var t=this,r=this.setColorValue(e),n=r.r,o=r.g,i=r.b,a=r.h,s=r.s,c=r.v;Object.assign(this,{r:n,g:o,b:i,h:a,s:s,v:c}),this.setText(),this.$nextTick(function(){t.$refs.saturation.renderColor(),t.$refs.saturation.renderSlide()})},selectAlpha:function(e){this.a=e,this.setText()},inputHex:function(e){var t=this,r=this.setColorValue(e),n=r.r,o=r.g,i=r.b,a=r.a,s=r.h,c=r.s,u=r.v;Object.assign(this,{r:n,g:o,b:i,a:a,h:s,s:c,v:u}),this.modelHex=e,this.modelRgba=this.rgbaStringShort,this.$nextTick(function(){t.$refs.saturation.renderColor(),t.$refs.saturation.renderSlide(),t.$refs.hue.renderSlide()})},inputRgba:function(e){var t=this,r=this.setColorValue(e),n=r.r,o=r.g,i=r.b,a=r.a,s=r.h,c=r.s,u=r.v;Object.assign(this,{r:n,g:o,b:i,a:a,h:s,s:c,v:u}),this.modelHex=this.hexString,this.modelRgba=e,this.$nextTick(function(){t.$refs.saturation.renderColor(),t.$refs.saturation.renderSlide(),t.$refs.hue.renderSlide()})},setText:function(){this.modelHex=this.hexString,this.modelRgba=this.rgbaStringShort},openSucker:function(e){this.$emit("openSucker",e)},selectSucker:function(e){var t=this,r=this.setColorValue(e),n=r.r,o=r.g,i=r.b,a=r.a,s=r.h,c=r.s,u=r.v;Object.assign(this,{r:n,g:o,b:i,a:a,h:s,s:c,v:u}),this.setText(),this.$nextTick(function(){t.$refs.saturation.renderColor(),t.$refs.saturation.renderSlide(),t.$refs.hue.renderSlide()})},selectColor:function(e){var t=this,r=this.setColorValue(e),n=r.r,o=r.g,i=r.b,a=r.a,s=r.h,c=r.s,u=r.v;Object.assign(this,{r:n,g:o,b:i,a:a,h:s,s:c,v:u}),this.setText(),this.$nextTick(function(){t.$refs.saturation.renderColor(),t.$refs.saturation.renderSlide(),t.$refs.hue.renderSlide()})}}}),S=(r(685),Object(a.a)(T,function(){var e=this,t=e._self._c;return t("div",{staticClass:"hu-color-picker",class:{light:e.isLightTheme},style:{width:e.totalWidth+"px"}},[t("div",{staticClass:"color-set"},[t("Saturation",{ref:"saturation",attrs:{color:e.rgbString,hsv:e.hsv,size:e.hueHeight},on:{selectSaturation:e.selectSaturation}}),e._v(" "),t("Hue",{ref:"hue",attrs:{hsv:e.hsv,width:e.hueWidth,height:e.hueHeight},on:{selectHue:e.selectHue}}),e._v(" "),t("Alpha",{ref:"alpha",attrs:{color:e.rgbString,rgba:e.rgba,width:e.hueWidth,height:e.hueHeight},on:{selectAlpha:e.selectAlpha}})],1),e._v(" "),t("div",{staticClass:"color-show",style:{height:e.previewHeight+"px"}},[t("Preview",{attrs:{color:e.rgbaString,width:e.previewWidth,height:e.previewHeight}}),e._v(" "),e.suckerHide?e._e():t("Sucker",{attrs:{"sucker-canvas":e.suckerCanvas,"sucker-area":e.suckerArea},on:{openSucker:e.openSucker,selectSucker:e.selectSucker}})],1),e._v(" "),t("Box",{attrs:{name:"HEX",color:e.modelHex},on:{inputColor:e.inputHex}}),e._v(" "),t("Box",{attrs:{name:"RGBA",color:e.modelRgba},on:{inputColor:e.inputRgba}}),e._v(" "),t("Colors",{attrs:{color:e.rgbaString,"colors-default":e.colorsDefault,"colors-history-key":e.colorsHistoryKey},on:{selectColor:e.selectColor}})],1)},[],!1,null,null,null).exports);t.a=S},706:function(e,t,r){"use strict";r.d(t,"a",function(){return ci});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i,a,s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};function c(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function u(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})}function l(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}!function(e){e.AcquireTokenByCode="acquireTokenByCode",e.AcquireTokenByRefreshToken="acquireTokenByRefreshToken",e.AcquireTokenSilent="acquireTokenSilent",e.AcquireTokenSilentAsync="acquireTokenSilentAsync",e.AcquireTokenPopup="acquireTokenPopup",e.CryptoOptsGetPublicKeyThumbprint="cryptoOptsGetPublicKeyThumbprint",e.CryptoOptsSignJwt="cryptoOptsSignJwt",e.SilentCacheClientAcquireToken="silentCacheClientAcquireToken",e.SilentIframeClientAcquireToken="silentIframeClientAcquireToken",e.SilentRefreshClientAcquireToken="silentRefreshClientAcquireToken",e.SsoSilent="ssoSilent",e.StandardInteractionClientGetDiscoveredAuthority="standardInteractionClientGetDiscoveredAuthority",e.FetchAccountIdWithNativeBroker="fetchAccountIdWithNativeBroker",e.NativeInteractionClientAcquireToken="nativeInteractionClientAcquireToken",e.BaseClientCreateTokenRequestHeaders="baseClientCreateTokenRequestHeaders",e.BrokerHandhshake="brokerHandshake",e.AcquireTokenByRefreshTokenInBroker="acquireTokenByRefreshTokenInBroker",e.AcquireTokenByBroker="acquireTokenByBroker",e.RefreshTokenClientExecuteTokenRequest="refreshTokenClientExecuteTokenRequest",e.RefreshTokenClientAcquireToken="refreshTokenClientAcquireToken",e.RefreshTokenClientAcquireTokenWithCachedRefreshToken="refreshTokenClientAcquireTokenWithCachedRefreshToken",e.RefreshTokenClientAcquireTokenByRefreshToken="refreshTokenClientAcquireTokenByRefreshToken",e.RefreshTokenClientCreateTokenRequestBody="refreshTokenClientCreateTokenRequestBody",e.AcquireTokenFromCache="acquireTokenFromCache",e.AcquireTokenBySilentIframe="acquireTokenBySilentIframe",e.InitializeBaseRequest="initializeBaseRequest",e.InitializeSilentRequest="initializeSilentRequest",e.InitializeClientApplication="initializeClientApplication",e.SilentIframeClientTokenHelper="silentIframeClientTokenHelper",e.SilentHandlerInitiateAuthRequest="silentHandlerInitiateAuthRequest",e.SilentHandlerMonitorIframeForHash="silentHandlerMonitorIframeForHash",e.SilentHandlerLoadFrame="silentHandlerLoadFrame",e.StandardInteractionClientCreateAuthCodeClient="standardInteractionClientCreateAuthCodeClient",e.StandardInteractionClientGetClientConfiguration="standardInteractionClientGetClientConfiguration",e.StandardInteractionClientInitializeAuthorizationRequest="standardInteractionClientInitializeAuthorizationRequest",e.StandardInteractionClientInitializeAuthorizationCodeRequest="standardInteractionClientInitializeAuthorizationCodeRequest",e.GetAuthCodeUrl="getAuthCodeUrl",e.HandleCodeResponseFromServer="handleCodeResponseFromServer",e.HandleCodeResponseFromHash="handleCodeResponseFromHash",e.UpdateTokenEndpointAuthority="updateTokenEndpointAuthority",e.AuthClientAcquireToken="authClientAcquireToken",e.AuthClientExecuteTokenRequest="authClientExecuteTokenRequest",e.AuthClientCreateTokenRequestBody="authClientCreateTokenRequestBody",e.AuthClientCreateQueryString="authClientCreateQueryString",e.PopTokenGenerateCnf="popTokenGenerateCnf",e.PopTokenGenerateKid="popTokenGenerateKid",e.HandleServerTokenResponse="handleServerTokenResponse",e.AuthorityFactoryCreateDiscoveredInstance="authorityFactoryCreateDiscoveredInstance",e.AuthorityResolveEndpointsAsync="authorityResolveEndpointsAsync",e.AuthorityGetCloudDiscoveryMetadataFromNetwork="authorityGetCloudDiscoveryMetadataFromNetwork",e.AuthorityUpdateCloudDiscoveryMetadata="authorityUpdateCloudDiscoveryMetadata",e.AuthorityGetEndpointMetadataFromNetwork="authorityGetEndpointMetadataFromNetwork",e.AuthorityUpdateEndpointMetadata="authorityUpdateEndpointMetadata",e.AuthorityUpdateMetadataWithRegionalInformation="authorityUpdateMetadataWithRegionalInformation",e.RegionDiscoveryDetectRegion="regionDiscoveryDetectRegion",e.RegionDiscoveryGetRegionFromIMDS="regionDiscoveryGetRegionFromIMDS",e.RegionDiscoveryGetCurrentVersion="regionDiscoveryGetCurrentVersion",e.AcquireTokenByCodeAsync="acquireTokenByCodeAsync",e.GetEndpointMetadataFromNetwork="getEndpointMetadataFromNetwork",e.GetCloudDiscoveryMetadataFromNetworkMeasurement="getCloudDiscoveryMetadataFromNetworkMeasurement",e.HandleRedirectPromiseMeasurement="handleRedirectPromiseMeasurement",e.UpdateCloudDiscoveryMetadataMeasurement="updateCloudDiscoveryMetadataMeasurement",e.UsernamePasswordClientAcquireToken="usernamePasswordClientAcquireToken",e.NativeMessageHandlerHandshake="nativeMessageHandlerHandshake",e.ClearTokensAndKeysWithClaims="clearTokensAndKeysWithClaims"}(i||(i={})),function(e){e[e.NotStarted=0]="NotStarted",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed"}(a||(a={}));var p=new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status"]),f=function(e,t){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},f(e,t)};function g(e,t){function r(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var m=function(){return m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},m.apply(this,arguments)};function v(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})}function y(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function w(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}var _,b,C,E,T,S={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",REGIONAL_AUTH_NON_MSI_QUERY_STRING:"allowestsrnonmsi=true",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},k=[S.OPENID_SCOPE,S.PROFILE_SCOPE,S.OFFLINE_ACCESS_SCOPE],I=w(k,[S.EMAIL_SCOPE]);!function(e){e.CONTENT_TYPE="Content-Type",e.RETRY_AFTER="Retry-After",e.CCS_HEADER="X-AnchorMailbox",e.WWWAuthenticate="WWW-Authenticate",e.AuthenticationInfo="Authentication-Info",e.X_MS_REQUEST_ID="x-ms-request-id",e.X_MS_HTTP_VERSION="x-ms-httpver"}(_||(_={})),function(e){e.ID_TOKEN="idtoken",e.CLIENT_INFO="client.info",e.ADAL_ID_TOKEN="adal.idtoken",e.ERROR="error",e.ERROR_DESC="error.description",e.ACTIVE_ACCOUNT="active-account",e.ACTIVE_ACCOUNT_FILTERS="active-account-filters"}(b||(b={})),function(e){e.COMMON="common",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers"}(C||(C={})),function(e){e.CLIENT_ID="client_id",e.REDIRECT_URI="redirect_uri",e.RESPONSE_TYPE="response_type",e.RESPONSE_MODE="response_mode",e.GRANT_TYPE="grant_type",e.CLAIMS="claims",e.SCOPE="scope",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.ACCESS_TOKEN="access_token",e.ID_TOKEN="id_token",e.REFRESH_TOKEN="refresh_token",e.EXPIRES_IN="expires_in",e.STATE="state",e.NONCE="nonce",e.PROMPT="prompt",e.SESSION_STATE="session_state",e.CLIENT_INFO="client_info",e.CODE="code",e.CODE_CHALLENGE="code_challenge",e.CODE_CHALLENGE_METHOD="code_challenge_method",e.CODE_VERIFIER="code_verifier",e.CLIENT_REQUEST_ID="client-request-id",e.X_CLIENT_SKU="x-client-SKU",e.X_CLIENT_VER="x-client-VER",e.X_CLIENT_OS="x-client-OS",e.X_CLIENT_CPU="x-client-CPU",e.X_CLIENT_CURR_TELEM="x-client-current-telemetry",e.X_CLIENT_LAST_TELEM="x-client-last-telemetry",e.X_MS_LIB_CAPABILITY="x-ms-lib-capability",e.X_APP_NAME="x-app-name",e.X_APP_VER="x-app-ver",e.POST_LOGOUT_URI="post_logout_redirect_uri",e.ID_TOKEN_HINT="id_token_hint",e.DEVICE_CODE="device_code",e.CLIENT_SECRET="client_secret",e.CLIENT_ASSERTION="client_assertion",e.CLIENT_ASSERTION_TYPE="client_assertion_type",e.TOKEN_TYPE="token_type",e.REQ_CNF="req_cnf",e.OBO_ASSERTION="assertion",e.REQUESTED_TOKEN_USE="requested_token_use",e.ON_BEHALF_OF="on_behalf_of",e.FOCI="foci",e.CCS_HEADER="X-AnchorMailbox",e.RETURN_SPA_CODE="return_spa_code",e.NATIVE_BROKER="nativebroker",e.LOGOUT_HINT="logout_hint"}(E||(E={})),function(e){e.ACCESS_TOKEN="access_token",e.XMS_CC="xms_cc"}(T||(T={}));var A,R={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"};!function(e){e.ACCOUNT="account",e.SID="sid",e.LOGIN_HINT="login_hint",e.ID_TOKEN="id_token",e.DOMAIN_HINT="domain_hint",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers",e.ACCOUNT_ID="accountIdentifier",e.HOMEACCOUNT_ID="homeAccountIdentifier"}(A||(A={}));var O,P,M,x,N,D,U={PLAIN:"plain",S256:"S256"};!function(e){e.QUERY="query",e.FRAGMENT="fragment",e.FORM_POST="form_post"}(O||(O={})),function(e){e.IMPLICIT_GRANT="implicit",e.AUTHORIZATION_CODE_GRANT="authorization_code",e.CLIENT_CREDENTIALS_GRANT="client_credentials",e.RESOURCE_OWNER_PASSWORD_GRANT="password",e.REFRESH_TOKEN_GRANT="refresh_token",e.DEVICE_CODE_GRANT="device_code",e.JWT_BEARER="urn:ietf:params:oauth:grant-type:jwt-bearer"}(P||(P={})),function(e){e.MSSTS_ACCOUNT_TYPE="MSSTS",e.ADFS_ACCOUNT_TYPE="ADFS",e.MSAV1_ACCOUNT_TYPE="MSA",e.GENERIC_ACCOUNT_TYPE="Generic"}(M||(M={})),function(e){e.CACHE_KEY_SEPARATOR="-",e.CLIENT_INFO_SEPARATOR="."}(x||(x={})),function(e){e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.ACCESS_TOKEN_WITH_AUTH_SCHEME="AccessToken_With_AuthScheme",e.REFRESH_TOKEN="RefreshToken"}(N||(N={})),function(e){e[e.ADFS=1001]="ADFS",e[e.MSA=1002]="MSA",e[e.MSSTS=1003]="MSSTS",e[e.GENERIC=1004]="GENERIC",e[e.ACCESS_TOKEN=2001]="ACCESS_TOKEN",e[e.REFRESH_TOKEN=2002]="REFRESH_TOKEN",e[e.ID_TOKEN=2003]="ID_TOKEN",e[e.APP_METADATA=3001]="APP_METADATA",e[e.UNDEFINED=9999]="UNDEFINED"}(D||(D={}));var L,B="appmetadata",H="1",q="authority-metadata",F=86400;!function(e){e.CONFIG="config",e.CACHE="cache",e.NETWORK="network",e.HARDCODED_VALUES="hardcoded_values"}(L||(L={}));var z,K={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};!function(e){e.BEARER="Bearer",e.POP="pop",e.SSH="ssh-cert"}(z||(z={}));var j,G,Y,W,Q,V,X=60,J=3600,Z="throttling",$="retry-after, h429",ee="invalid_grant",te="client_mismatch";!function(e){e.username="username",e.password="password"}(j||(j={})),function(e){e[e.httpSuccess=200]="httpSuccess",e[e.httpBadRequest=400]="httpBadRequest"}(G||(G={})),function(e){e.FAILED_AUTO_DETECTION="1",e.INTERNAL_CACHE="2",e.ENVIRONMENT_VARIABLE="3",e.IMDS="4"}(Y||(Y={})),function(e){e.CONFIGURED_MATCHES_DETECTED="1",e.CONFIGURED_NO_AUTO_DETECTION="2",e.CONFIGURED_NOT_DETECTED="3",e.AUTO_DETECTION_REQUESTED_SUCCESSFUL="4",e.AUTO_DETECTION_REQUESTED_FAILED="5"}(W||(W={})),function(e){e.NO_CACHE_HIT="0",e.FORCE_REFRESH="1",e.NO_CACHED_ACCESS_TOKEN="2",e.CACHED_ACCESS_TOKEN_EXPIRED="3",e.REFRESH_CACHED_ACCESS_TOKEN="4",e.CLAIMS_REQUESTED_CACHE_SKIPPED="5"}(Q||(Q={})),function(e){e.Jwt="JWT",e.Jwk="JWK",e.Pop="pop"}(V||(V={}));var re,ne,oe={code:"unexpected_error",desc:"Unexpected error in authentication."},ie={code:"post_request_failed",desc:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},ae=function(e){function t(r,n,o){var i=this,a=n?r+": "+n:r;return i=e.call(this,a)||this,Object.setPrototypeOf(i,t.prototype),i.errorCode=r||S.EMPTY_STRING,i.errorMessage=n||S.EMPTY_STRING,i.subError=o||S.EMPTY_STRING,i.name="AuthError",i}return g(t,e),t.prototype.setCorrelationId=function(e){this.correlationId=e},t.createUnexpectedError=function(e){return new t(oe.code,oe.desc+": "+e)},t.createPostRequestFailed=function(e){return new t(ie.code,ie.desc+": "+e)},t}(Error),se=function(e){function t(r,n,o){var i=e.call(this,r,n,o)||this;return i.name="ServerError",Object.setPrototypeOf(i,t.prototype),i}return g(t,e),t}(ae),ce=["interaction_required","consent_required","login_required"],ue=["message_only","additional_action","basic_action","user_password_expired","consent_required"],le={code:"no_tokens_found",desc:"No refresh token found in the cache. Please sign-in."},he={code:"native_account_unavailable",desc:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API."},de=function(e){function t(r,n,o,i,a,s,c){var u=e.call(this,r,n,o)||this;return Object.setPrototypeOf(u,t.prototype),u.timestamp=i||S.EMPTY_STRING,u.traceId=a||S.EMPTY_STRING,u.correlationId=s||S.EMPTY_STRING,u.claims=c||S.EMPTY_STRING,u.name="InteractionRequiredAuthError",u}return g(t,e),t.isInteractionRequiredError=function(e,t,r){var n=!!e&&ce.indexOf(e)>-1,o=!!r&&ue.indexOf(r)>-1,i=!!t&&ce.some(function(e){return t.indexOf(e)>-1});return n||i||o},t.createNoTokensFoundError=function(){return new t(le.code,le.desc)},t.createNativeAccountUnavailableError=function(){return new t(he.code,he.desc)},t}(ae),pe={code:"client_info_decoding_error",desc:"The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause."},fe={code:"client_info_empty_error",desc:"The client info was empty. Please review the trace to determine the root cause."},ge={code:"token_parsing_error",desc:"Token cannot be parsed. Please review stack trace to determine root cause."},me={code:"null_or_empty_token",desc:"The token is null or empty. Please review the trace to determine the root cause."},ve={code:"endpoints_resolution_error",desc:"Error: could not resolve endpoints. Please check network and try again."},ye={code:"network_error",desc:"Network request failed. Please check network trace to determine root cause."},we={code:"openid_config_error",desc:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints."},_e={code:"hash_not_deserialized",desc:"The hash parameters could not be deserialized. Please review the trace to determine the root cause."},be={code:"invalid_state",desc:"State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState()."},Ce={code:"state_mismatch",desc:"State mismatch error. Please check your network. Continued requests may cause cache overflow."},Ee={code:"state_not_found",desc:"State not found"},Te={code:"nonce_mismatch",desc:"Nonce mismatch error. This may be caused by a race condition in concurrent requests."},Se={code:"nonce_not_found",desc:"nonce not found"},ke={code:"auth_time_not_found",desc:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information."},Ie={code:"max_age_transpired",desc:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication."},Ae={code:"multiple_matching_tokens",desc:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account."},Re={code:"multiple_matching_accounts",desc:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account"},Oe={code:"multiple_matching_appMetadata",desc:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata"},Pe={code:"request_cannot_be_made",desc:"Token request cannot be made without authorization code or refresh token."},Me={code:"cannot_append_empty_scope",desc:"Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info."},xe={code:"cannot_remove_empty_scope",desc:"Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info."},Ne={code:"cannot_append_scopeset",desc:"Cannot append ScopeSet due to error."},De={code:"empty_input_scopeset",desc:"Empty input ScopeSet cannot be processed."},Ue={code:"device_code_polling_cancelled",desc:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true."},Le={code:"device_code_expired",desc:"Device code is expired."},Be={code:"device_code_unknown_error",desc:"Device code stopped polling for unknown reasons."},He={code:"no_account_in_silent_request",desc:"Please pass an account object, silent flow is not supported without account information"},qe={code:"invalid_cache_record",desc:"Cache record object was null or undefined."},Fe={code:"invalid_cache_environment",desc:"Invalid environment when attempting to create cache entry"},ze={code:"no_account_found",desc:"No account found in cache for given key."},Ke={code:"no cache plugin set on CacheManager",desc:"ICachePlugin needs to be set before using readFromStorage or writeFromStorage"},je={code:"no_crypto_object",desc:"No crypto object detected. This is required for the following operation: "},Ge={code:"invalid_cache_type",desc:"Invalid cache type"},Ye={code:"unexpected_account_type",desc:"Unexpected account type."},We={code:"unexpected_credential_type",desc:"Unexpected credential type."},Qe={code:"invalid_assertion",desc:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515"},Ve={code:"invalid_client_credential",desc:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential"},Xe={code:"token_refresh_required",desc:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired."},Je={code:"user_timeout_reached",desc:"User defined timeout for device code polling reached"},Ze={code:"token_claims_cnf_required_for_signedjwt",desc:"Cannot generate a POP jwt if the token_claims are not populated"},$e={code:"authorization_code_missing_from_server_response",desc:"Server response does not contain an authorization code to proceed"},et={code:"binding_key_not_removed",desc:"Could not remove the credential's binding key from storage."},tt={code:"end_session_endpoint_not_supported",desc:"Provided authority does not support logout."},rt={code:"key_id_missing",desc:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key."},nt={code:"no_network_connectivity",desc:"No network connectivity. Check your internet connection."},ot={code:"user_canceled",desc:"User canceled the flow."},it=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="ClientAuthError",Object.setPrototypeOf(o,t.prototype),o}return g(t,e),t.createClientInfoDecodingError=function(e){return new t(pe.code,pe.desc+" Failed with error: "+e)},t.createClientInfoEmptyError=function(){return new t(fe.code,""+fe.desc)},t.createTokenParsingError=function(e){return new t(ge.code,ge.desc+" Failed with error: "+e)},t.createTokenNullOrEmptyError=function(e){return new t(me.code,me.desc+" Raw Token Value: "+e)},t.createEndpointDiscoveryIncompleteError=function(e){return new t(ve.code,ve.desc+" Detail: "+e)},t.createNetworkError=function(e,r){return new t(ye.code,ye.desc+" | Fetch client threw: "+r+" | Attempted to reach: "+e.split("?")[0])},t.createUnableToGetOpenidConfigError=function(e){return new t(we.code,we.desc+" Attempted to retrieve endpoints from: "+e)},t.createHashNotDeserializedError=function(e){return new t(_e.code,_e.desc+" Given Object: "+e)},t.createInvalidStateError=function(e,r){return new t(be.code,be.desc+" Invalid State: "+e+", Root Err: "+r)},t.createStateMismatchError=function(){return new t(Ce.code,Ce.desc)},t.createStateNotFoundError=function(e){return new t(Ee.code,Ee.desc+":  "+e)},t.createNonceMismatchError=function(){return new t(Te.code,Te.desc)},t.createAuthTimeNotFoundError=function(){return new t(ke.code,ke.desc)},t.createMaxAgeTranspiredError=function(){return new t(Ie.code,Ie.desc)},t.createNonceNotFoundError=function(e){return new t(Se.code,Se.desc+":  "+e)},t.createMultipleMatchingTokensInCacheError=function(){return new t(Ae.code,Ae.desc+".")},t.createMultipleMatchingAccountsInCacheError=function(){return new t(Re.code,Re.desc)},t.createMultipleMatchingAppMetadataInCacheError=function(){return new t(Oe.code,Oe.desc)},t.createTokenRequestCannotBeMadeError=function(){return new t(Pe.code,Pe.desc)},t.createAppendEmptyScopeToSetError=function(e){return new t(Me.code,Me.desc+" Given Scope: "+e)},t.createRemoveEmptyScopeFromSetError=function(e){return new t(xe.code,xe.desc+" Given Scope: "+e)},t.createAppendScopeSetError=function(e){return new t(Ne.code,Ne.desc+" Detail Error: "+e)},t.createEmptyInputScopeSetError=function(){return new t(De.code,""+De.desc)},t.createDeviceCodeCancelledError=function(){return new t(Ue.code,""+Ue.desc)},t.createDeviceCodeExpiredError=function(){return new t(Le.code,""+Le.desc)},t.createDeviceCodeUnknownError=function(){return new t(Be.code,""+Be.desc)},t.createNoAccountInSilentRequestError=function(){return new t(He.code,""+He.desc)},t.createNullOrUndefinedCacheRecord=function(){return new t(qe.code,qe.desc)},t.createInvalidCacheEnvironmentError=function(){return new t(Fe.code,Fe.desc)},t.createNoAccountFoundError=function(){return new t(ze.code,ze.desc)},t.createCachePluginError=function(){return new t(Ke.code,""+Ke.desc)},t.createNoCryptoObjectError=function(e){return new t(je.code,""+je.desc+e)},t.createInvalidCacheTypeError=function(){return new t(Ge.code,""+Ge.desc)},t.createUnexpectedAccountTypeError=function(){return new t(Ye.code,""+Ye.desc)},t.createUnexpectedCredentialTypeError=function(){return new t(We.code,""+We.desc)},t.createInvalidAssertionError=function(){return new t(Qe.code,""+Qe.desc)},t.createInvalidCredentialError=function(){return new t(Ve.code,""+Ve.desc)},t.createRefreshRequiredError=function(){return new t(Xe.code,Xe.desc)},t.createUserTimeoutReachedError=function(){return new t(Je.code,Je.desc)},t.createTokenClaimsRequiredError=function(){return new t(Ze.code,Ze.desc)},t.createNoAuthCodeInServerResponseError=function(){return new t($e.code,$e.desc)},t.createBindingKeyNotRemovedError=function(){return new t(et.code,et.desc)},t.createLogoutNotSupportedError=function(){return new t(tt.code,tt.desc)},t.createKeyIdMissingError=function(){return new t(rt.code,rt.desc)},t.createNoNetworkConnectivityError=function(){return new t(nt.code,nt.desc)},t.createUserCanceledError=function(){return new t(ot.code,ot.desc)},t}(ae),at=function(){function e(){}return e.decodeAuthToken=function(t){if(e.isEmpty(t))throw it.createTokenNullOrEmptyError(t);var r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw it.createTokenParsingError("Given token is malformed: "+JSON.stringify(t));return{header:r[1],JWSPayload:r[2],JWSSig:r[3]}},e.isEmpty=function(e){return void 0===e||!e||0===e.length},e.isEmptyObj=function(t){if(t&&!e.isEmpty(t))try{var r=JSON.parse(t);return 0===Object.keys(r).length}catch(e){}return!0},e.startsWith=function(e,t){return 0===e.indexOf(t)},e.endsWith=function(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length},e.queryStringToObject=function(e){var t={},r=e.split("&"),n=function(e){return decodeURIComponent(e.replace(/\+/g," "))};return r.forEach(function(e){if(e.trim()){var r=e.split(/=(.+)/g,2),o=r[0],i=r[1];o&&i&&(t[n(o)]=n(i))}}),t},e.trimArrayEntries=function(e){return e.map(function(e){return e.trim()})},e.removeEmptyStringsFromArray=function(t){return t.filter(function(t){return!e.isEmpty(t)})},e.jsonParseHelper=function(e){try{return JSON.parse(e)}catch(e){return null}},e.matchPattern=function(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)},e}();function st(e,t){if(at.isEmpty(e))throw it.createClientInfoEmptyError();try{var r=t.base64Decode(e);return JSON.parse(r)}catch(e){throw it.createClientInfoDecodingError(e.message)}}function ct(e){if(at.isEmpty(e))throw it.createClientInfoDecodingError("Home account ID was empty.");var t=e.split(x.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?S.EMPTY_STRING:t[1]}}!function(e){e[e.Default=0]="Default",e[e.Adfs=1]="Adfs",e[e.Dsts=2]="Dsts",e[e.Ciam=3]="Ciam"}(re||(re={})),function(e){e.AAD="AAD",e.OIDC="OIDC"}(ne||(ne={}));var ut,lt,ht,dt,pt,ft,gt,mt,vt,yt=function(){function e(){}return e.prototype.generateAccountId=function(){return[this.homeAccountId,this.environment].join(x.CACHE_KEY_SEPARATOR).toLowerCase()},e.prototype.generateAccountKey=function(){return e.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})},e.prototype.getAccountInfo=function(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType}},e.generateAccountCacheKey=function(e){return[e.homeAccountId,e.environment||S.EMPTY_STRING,e.tenantId||S.EMPTY_STRING].join(x.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAccount=function(t,r){var n=new e;r.authorityType===re.Adfs?n.authorityType=M.ADFS_ACCOUNT_TYPE:r.protocolMode===ne.AAD?n.authorityType=M.MSSTS_ACCOUNT_TYPE:n.authorityType=M.GENERIC_ACCOUNT_TYPE,n.clientInfo=t.clientInfo,n.homeAccountId=t.homeAccountId,n.nativeAccountId=t.nativeAccountId;var o=t.environment||r&&r.getPreferredCache();if(!o)throw it.createInvalidCacheEnvironmentError();if(n.environment=o,n.realm=t.idTokenClaims.tid||S.EMPTY_STRING,n.idTokenClaims=t.idTokenClaims,n.localAccountId=t.idTokenClaims.oid||t.idTokenClaims.sub||S.EMPTY_STRING,n.authorityType===M.MSSTS_ACCOUNT_TYPE){var i=t.idTokenClaims.preferred_username,a=t.idTokenClaims.emails?t.idTokenClaims.emails[0]:null;n.username=i||a||""}else n.username=t.idTokenClaims.upn||"";return n.name=t.idTokenClaims.name,n.cloudGraphHostName=t.cloudGraphHostName,n.msGraphHost=t.msGraphHost,n},e.createFromAccountInfo=function(t,r,n){var o=new e;return o.authorityType=t.authorityType||M.GENERIC_ACCOUNT_TYPE,o.homeAccountId=t.homeAccountId,o.localAccountId=t.localAccountId,o.nativeAccountId=t.nativeAccountId,o.realm=t.tenantId,o.environment=t.environment,o.username=t.username,o.name=t.name,o.idTokenClaims=t.idTokenClaims,o.cloudGraphHostName=r,o.msGraphHost=n,o},e.generateHomeAccountId=function(e,t,r,n,o){var i=(null==o?void 0:o.sub)?o.sub:S.EMPTY_STRING;if(t===re.Adfs||t===re.Dsts)return i;if(e)try{var a=st(e,n);if(!at.isEmpty(a.uid)&&!at.isEmpty(a.utid))return""+a.uid+x.CLIENT_INFO_SEPARATOR+a.utid}catch(e){}return r.verbose("No client info in response"),i},e.isAccountEntity=function(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))},e.accountInfoIsEqual=function(e,t,r){if(!e||!t)return!1;var n=!0;if(r){var o=e.idTokenClaims||{},i=t.idTokenClaims||{};n=o.iat===i.iat&&o.nonce===i.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&n},e}(),wt="invalid_grant",_t=483,bt=600,Ct="msal",Et=30,Tt="msal.js.browser",St="53ee284d-920a-4b59-9d30-a60315b26836",kt="ppnbnpeolgkicgegkbkbjmhlideopiji",It="MATS";!function(e){e.HandshakeRequest="Handshake",e.HandshakeResponse="HandshakeResponse",e.GetToken="GetToken",e.Response="Response"}(ut||(ut={})),function(e){e.LocalStorage="localStorage",e.SessionStorage="sessionStorage",e.MemoryStorage="memoryStorage"}(lt||(lt={})),function(e){e.GET="GET",e.POST="POST"}(ht||(ht={})),function(e){e.AUTHORITY="authority",e.ACQUIRE_TOKEN_ACCOUNT="acquireToken.account",e.SESSION_STATE="session.state",e.REQUEST_STATE="request.state",e.NONCE_IDTOKEN="nonce.id_token",e.ORIGIN_URI="request.origin",e.RENEW_STATUS="token.renew.status",e.URL_HASH="urlHash",e.REQUEST_PARAMS="request.params",e.SCOPES="scopes",e.INTERACTION_STATUS_KEY="interaction.status",e.CCS_CREDENTIAL="ccs.credential",e.CORRELATION_ID="request.correlationId",e.NATIVE_REQUEST="request.native",e.REDIRECT_CONTEXT="request.redirect.context"}(dt||(dt={})),function(e){e.ACCOUNT_KEYS="msal.account.keys",e.TOKEN_KEYS="msal.token.keys"}(pt||(pt={})),function(e){e.WRAPPER_SKU="wrapper.sku",e.WRAPPER_VER="wrapper.version"}(ft||(ft={})),function(e){e[e.acquireTokenRedirect=861]="acquireTokenRedirect",e[e.acquireTokenPopup=862]="acquireTokenPopup",e[e.ssoSilent=863]="ssoSilent",e[e.acquireTokenSilent_authCode=864]="acquireTokenSilent_authCode",e[e.handleRedirectPromise=865]="handleRedirectPromise",e[e.acquireTokenByCode=866]="acquireTokenByCode",e[e.acquireTokenSilent_silentFlow=61]="acquireTokenSilent_silentFlow",e[e.logout=961]="logout",e[e.logoutPopup=962]="logoutPopup"}(gt||(gt={})),function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(mt||(mt={})),function(e){e.Startup="startup",e.Login="login",e.Logout="logout",e.AcquireToken="acquireToken",e.SsoSilent="ssoSilent",e.HandleRedirect="handleRedirect",e.None="none"}(vt||(vt={}));var At,Rt={scopes:k},Ot="jwk";!function(e){e.React="@azure/msal-react",e.Angular="@azure/msal-angular"}(At||(At={}));var Pt,Mt="msal.db",xt=Mt+".keys";!function(e){e[e.Default=0]="Default",e[e.AccessToken=1]="AccessToken",e[e.AccessTokenAndRefreshToken=2]="AccessTokenAndRefreshToken",e[e.RefreshToken=3]="RefreshToken",e[e.RefreshTokenAndNetwork=4]="RefreshTokenAndNetwork",e[e.Skip=5]="Skip"}(Pt||(Pt={}));var Nt,Dt={code:"missing_kid_error",desc:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided."},Ut={code:"missing_alg_error",desc:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},Lt=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="JoseHeaderError",Object.setPrototypeOf(o,t.prototype),o}return g(t,e),t.createMissingKidError=function(){return new t(Dt.code,Dt.desc)},t.createMissingAlgError=function(){return new t(Ut.code,Ut.desc)},t}(ae),Bt=function(){function e(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}return e.getShrHeaderString=function(t){if(!t.kid)throw Lt.createMissingKidError();if(!t.alg)throw Lt.createMissingAlgError();var r=new e({typ:t.typ||V.Pop,kid:t.kid,alg:t.alg});return JSON.stringify(r)},e}(),Ht=function(){function e(){}return e.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},e}(),qt=function(){function e(e){this.cryptoObj=e}return e.prototype.generateGuid=function(){try{var e=new Uint8Array(16);return this.cryptoObj.getRandomValues(e),e[6]|=64,e[6]&=79,e[8]|=128,e[8]&=191,Ht.decimalToHex(e[0])+Ht.decimalToHex(e[1])+Ht.decimalToHex(e[2])+Ht.decimalToHex(e[3])+"-"+Ht.decimalToHex(e[4])+Ht.decimalToHex(e[5])+"-"+Ht.decimalToHex(e[6])+Ht.decimalToHex(e[7])+"-"+Ht.decimalToHex(e[8])+Ht.decimalToHex(e[9])+"-"+Ht.decimalToHex(e[10])+Ht.decimalToHex(e[11])+Ht.decimalToHex(e[12])+Ht.decimalToHex(e[13])+Ht.decimalToHex(e[14])+Ht.decimalToHex(e[15])}catch(e){for(var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r="0123456789abcdef",n=0,o=S.EMPTY_STRING,i=0;i<36;i++)"-"!==t[i]&&"4"!==t[i]&&(n=16*Math.random()|0),"x"===t[i]?o+=r[n]:"y"===t[i]?(n&=3,o+=r[n|=8]):o+=t[i];return o}},e.prototype.isGuid=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},e}(),Ft=function(){function e(){}return e.stringToUtf8Arr=function(e){for(var t,r=0,n=e.length,o=0;o<n;o++)r+=(t=e.charCodeAt(o))<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;for(var i=new Uint8Array(r),a=0,s=0;a<r;s++)(t=e.charCodeAt(s))<128?i[a++]=t:t<2048?(i[a++]=192+(t>>>6),i[a++]=128+(63&t)):t<65536?(i[a++]=224+(t>>>12),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t)):t<2097152?(i[a++]=240+(t>>>18),i[a++]=128+(t>>>12&63),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t)):t<67108864?(i[a++]=248+(t>>>24),i[a++]=128+(t>>>18&63),i[a++]=128+(t>>>12&63),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t)):(i[a++]=252+(t>>>30),i[a++]=128+(t>>>24&63),i[a++]=128+(t>>>18&63),i[a++]=128+(t>>>12&63),i[a++]=128+(t>>>6&63),i[a++]=128+(63&t));return i},e.stringToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t},e.utf8ArrToString=function(e){for(var t=S.EMPTY_STRING,r=void 0,n=e.length,o=0;o<n;o++)r=e[o],t+=String.fromCharCode(r>251&&r<254&&o+5<n?1073741824*(r-252)+(e[++o]-128<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:r>247&&r<252&&o+4<n?(r-248<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:r>239&&r<248&&o+3<n?(r-240<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:r>223&&r<240&&o+2<n?(r-224<<12)+(e[++o]-128<<6)+e[++o]-128:r>191&&r<224&&o+1<n?(r-192<<6)+e[++o]-128:r);return t},e.getSortedObjectString=function(e){return JSON.stringify(e,Object.keys(e).sort())},e}(),zt=function(){function e(){}return e.prototype.urlEncode=function(e){return encodeURIComponent(this.encode(e).replace(/=/g,S.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_"))},e.prototype.urlEncodeArr=function(e){return this.base64EncArr(e).replace(/=/g,S.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")},e.prototype.encode=function(e){var t=Ft.stringToUtf8Arr(e);return this.base64EncArr(t)},e.prototype.base64EncArr=function(e){for(var t=(3-e.length%3)%3,r=S.EMPTY_STRING,n=void 0,o=e.length,i=0,a=0;a<o;a++)n=a%3,i|=e[a]<<(16>>>n&24),2!==n&&e.length-a!==1||(r+=String.fromCharCode(this.uint6ToB64(i>>>18&63),this.uint6ToB64(i>>>12&63),this.uint6ToB64(i>>>6&63),this.uint6ToB64(63&i)),i=0);return 0===t?r:r.substring(0,r.length-t)+(1===t?"=":"==")},e.prototype.uint6ToB64=function(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65},e}(),Kt=function(){function e(){}return e.prototype.decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Invalid base64 string")}var r=this.base64DecToArr(t);return Ft.utf8ArrToString(r)},e.prototype.base64DecToArr=function(e,t){for(var r=e.replace(/[^A-Za-z0-9\+\/]/g,S.EMPTY_STRING),n=r.length,o=t?Math.ceil((3*n+1>>>2)/t)*t:3*n+1>>>2,i=new Uint8Array(o),a=void 0,s=void 0,c=0,u=0,l=0;l<n;l++)if(s=3&l,c|=this.b64ToUint6(r.charCodeAt(l))<<18-6*s,3===s||n-l===1){for(a=0;a<3&&u<o;a++,u++)i[u]=c>>>(16>>>a&24)&255;c=0}return i},e.prototype.b64ToUint6=function(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0},e}(),jt={code:"pkce_not_created",desc:"The PKCE code challenge and verifier could not be generated."},Gt={code:"crypto_nonexistent",desc:"The crypto object or function is not available."},Yt={code:"http_method_not_implemented",desc:"The HTTP method given has not been implemented in this library."},Wt={code:"empty_navigate_uri",desc:"Navigation URI is empty. Please check stack trace for more info."},Qt={code:"hash_empty_error",desc:"Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. For more visit: aka.ms/msaljs/browser-errors."},Vt={code:"no_state_in_hash",desc:"Hash does not contain state. Please verify that the request originated from msal."},Xt={code:"hash_does_not_contain_known_properties",desc:"Hash does not contain known properites. Please verify that your redirectUri is not changing the hash. For more visit: aka.ms/msaljs/browser-errors."},Jt={code:"unable_to_parse_state",desc:"Unable to parse state. Please verify that the request originated from msal."},Zt={code:"state_interaction_type_mismatch",desc:"Hash contains state but the interaction type does not match the caller."},$t={code:"interaction_in_progress",desc:"Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.  For more visit: aka.ms/msaljs/browser-errors."},er={code:"popup_window_error",desc:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser."},tr={code:"empty_window_error",desc:"window.open returned null or undefined window object."},rr={code:"user_cancelled",desc:"User cancelled the flow."},nr={code:"monitor_window_timeout",desc:"Token acquisition in popup failed due to timeout. For more visit: aka.ms/msaljs/browser-errors."},or={code:"monitor_window_timeout",desc:"Token acquisition in iframe failed due to timeout. For more visit: aka.ms/msaljs/browser-errors."},ir={code:"redirect_in_iframe",desc:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs."},ar={code:"block_iframe_reload",desc:"Request was blocked inside an iframe because MSAL detected an authentication response. For more visit: aka.ms/msaljs/browser-errors"},sr={code:"block_nested_popups",desc:"Request was blocked inside a popup because MSAL detected it was running in a popup."},cr={code:"iframe_closed_prematurely",desc:"The iframe being monitored was closed prematurely."},ur={code:"silent_logout_unsupported",desc:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead."},lr={code:"no_account_error",desc:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request."},hr={code:"silent_prompt_value_error",desc:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'."},dr={code:"no_token_request_cache_error",desc:"No token request found in cache."},pr={code:"unable_to_parse_token_request_cache_error",desc:"The cached token request could not be parsed."},fr={code:"no_cached_authority_error",desc:"No cached authority found."},gr={code:"auth_request_not_set_error",desc:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler"},mr={code:"invalid_cache_type",desc:"Invalid cache type"},vr={code:"non_browser_environment",desc:"Login and token requests are not supported in non-browser environments."},yr={code:"database_not_open",desc:"Database is not open!"},wr={code:"no_network_connectivity",desc:"No network connectivity. Check your internet connection."},_r={code:"post_request_failed",desc:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'"},br={code:"get_request_failed",desc:"Network request failed. Please check the network trace to determine root cause."},Cr={code:"failed_to_parse_response",desc:"Failed to parse network response. Check network trace."},Er={code:"unable_to_load_token",desc:"Error loading token to cache."},Tr={code:"crypto_key_not_found",desc:"Cryptographic Key or Keypair not found in browser storage."},Sr={code:"auth_code_required",desc:"An authorization code must be provided (as the `code` property on the request) to this flow."},kr={code:"auth_code_or_nativeAccountId_required",desc:"An authorization code or nativeAccountId must be provided to this flow."},Ir={code:"spa_code_and_nativeAccountId_present",desc:"Request cannot contain both spa code and native account id."},Ar={code:"database_unavailable",desc:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts."},Rr={code:"unable_to_acquire_token_from_native_platform",desc:"Unable to acquire token from native platform. For a list of possible reasons visit aka.ms/msaljs/browser-errors."},Or={code:"native_handshake_timeout",desc:"Timed out while attempting to establish connection to browser extension"},Pr={code:"native_extension_not_installed",desc:"Native extension is not installed. If you think this is a mistake call the initialize function."},Mr={code:"native_connection_not_established",desc:"Connection to native platform has not been established. Please install a compatible browser extension and run initialize(). For more please visit aka.ms/msaljs/browser-errors."},xr={code:"native_broker_called_before_initialize",desc:"You must call and await the initialize function before attempting to call any other MSAL API when native brokering is enabled. For more please visit aka.ms/msaljs/browser-errors."},Nr={code:"native_prompt_not_supported",desc:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow."},Dr=function(e){function t(r,n){var o=e.call(this,r,n)||this;return Object.setPrototypeOf(o,t.prototype),o.name="BrowserAuthError",o}return o(t,e),t.createPkceNotGeneratedError=function(e){return new t(jt.code,jt.desc+" Detail:"+e)},t.createCryptoNotAvailableError=function(e){return new t(Gt.code,Gt.desc+" Detail:"+e)},t.createHttpMethodNotImplementedError=function(e){return new t(Yt.code,Yt.desc+" Given Method: "+e)},t.createEmptyNavigationUriError=function(){return new t(Wt.code,Wt.desc)},t.createEmptyHashError=function(e){return new t(Qt.code,Qt.desc+" Given Url: "+e)},t.createHashDoesNotContainStateError=function(){return new t(Vt.code,Vt.desc)},t.createHashDoesNotContainKnownPropertiesError=function(){return new t(Xt.code,Xt.desc)},t.createUnableToParseStateError=function(){return new t(Jt.code,Jt.desc)},t.createStateInteractionTypeMismatchError=function(){return new t(Zt.code,Zt.desc)},t.createInteractionInProgressError=function(){return new t($t.code,$t.desc)},t.createPopupWindowError=function(e){var r=er.desc;return r=at.isEmpty(e)?r:r+" Details: "+e,new t(er.code,r)},t.createEmptyWindowCreatedError=function(){return new t(tr.code,tr.desc)},t.createUserCancelledError=function(){return new t(rr.code,rr.desc)},t.createMonitorPopupTimeoutError=function(){return new t(nr.code,nr.desc)},t.createMonitorIframeTimeoutError=function(){return new t(or.code,or.desc)},t.createRedirectInIframeError=function(e){return new t(ir.code,ir.desc+" (window.parent !== window) => "+e)},t.createBlockReloadInHiddenIframeError=function(){return new t(ar.code,ar.desc)},t.createBlockAcquireTokenInPopupsError=function(){return new t(sr.code,sr.desc)},t.createIframeClosedPrematurelyError=function(){return new t(cr.code,cr.desc)},t.createSilentLogoutUnsupportedError=function(){return new t(ur.code,ur.desc)},t.createNoAccountError=function(){return new t(lr.code,lr.desc)},t.createSilentPromptValueError=function(e){return new t(hr.code,hr.desc+" Given value: "+e)},t.createUnableToParseTokenRequestCacheError=function(){return new t(pr.code,pr.desc)},t.createNoTokenRequestCacheError=function(){return new t(dr.code,dr.desc)},t.createAuthRequestNotSetError=function(){return new t(gr.code,gr.desc)},t.createNoCachedAuthorityError=function(){return new t(fr.code,fr.desc)},t.createInvalidCacheTypeError=function(){return new t(mr.code,""+mr.desc)},t.createNonBrowserEnvironmentError=function(){return new t(vr.code,vr.desc)},t.createDatabaseNotOpenError=function(){return new t(yr.code,yr.desc)},t.createNoNetworkConnectivityError=function(){return new t(wr.code,wr.desc)},t.createPostRequestFailedError=function(e,r){return new t(_r.code,_r.desc+" | Network client threw: "+e+" | Attempted to reach: "+r.split("?")[0])},t.createGetRequestFailedError=function(e,r){return new t(br.code,br.desc+" | Network client threw: "+e+" | Attempted to reach: "+r.split("?")[0])},t.createFailedToParseNetworkResponseError=function(e){return new t(Cr.code,Cr.desc+" | Attempted to reach: "+e.split("?")[0])},t.createUnableToLoadTokenError=function(e){return new t(Er.code,Er.desc+" | "+e)},t.createSigningKeyNotFoundInStorageError=function(e){return new t(Tr.code,Tr.desc+" | No match found for KeyId: "+e)},t.createAuthCodeRequiredError=function(){return new t(Sr.code,Sr.desc)},t.createAuthCodeOrNativeAccountIdRequiredError=function(){return new t(kr.code,kr.desc)},t.createSpaCodeAndNativeAccountIdPresentError=function(){return new t(Ir.code,Ir.desc)},t.createDatabaseUnavailableError=function(){return new t(Ar.code,Ar.desc)},t.createUnableToAcquireTokenFromNativePlatformError=function(){return new t(Rr.code,Rr.desc)},t.createNativeHandshakeTimeoutError=function(){return new t(Or.code,Or.desc)},t.createNativeExtensionNotInstalledError=function(){return new t(Pr.code,Pr.desc)},t.createNativeConnectionNotEstablishedError=function(){return new t(Mr.code,Mr.desc)},t.createNativeBrokerCalledBeforeInitialize=function(){return new t(xr.code,xr.desc)},t.createNativePromptParameterNotSupportedError=function(){return new t(Nr.code,Nr.desc)},t}(ae),Ur=function(){function e(e){this.base64Encode=new zt,this.cryptoObj=e}return e.prototype.generateCodes=function(){return u(this,void 0,void 0,function(){var e,t;return l(this,function(r){switch(r.label){case 0:return e=this.generateCodeVerifier(),[4,this.generateCodeChallengeFromVerifier(e)];case 1:return t=r.sent(),[2,{verifier:e,challenge:t}]}})})},e.prototype.generateCodeVerifier=function(){try{var e=new Uint8Array(32);return this.cryptoObj.getRandomValues(e),this.base64Encode.urlEncodeArr(e)}catch(e){throw Dr.createPkceNotGeneratedError(e)}},e.prototype.generateCodeChallengeFromVerifier=function(e){return u(this,void 0,void 0,function(){var t,r;return l(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cryptoObj.sha256Digest(e)];case 1:return t=n.sent(),[2,this.base64Encode.urlEncodeArr(new Uint8Array(t))];case 2:throw r=n.sent(),Dr.createPkceNotGeneratedError(r);case 3:return[2]}})})},e}(),Lr=function(){function e(){}return e.prototype.getRandomValues=function(e){return window.crypto.getRandomValues(e)},e.prototype.generateKey=function(e,t,r){return u(this,void 0,void 0,function(){return l(this,function(n){return[2,window.crypto.subtle.generateKey(e,t,r)]})})},e.prototype.exportKey=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){return[2,window.crypto.subtle.exportKey(Ot,e)]})})},e.prototype.importKey=function(e,t,r,n){return u(this,void 0,void 0,function(){return l(this,function(o){return[2,window.crypto.subtle.importKey(Ot,e,t,r,n)]})})},e.prototype.sign=function(e,t,r){return u(this,void 0,void 0,function(){return l(this,function(n){return[2,window.crypto.subtle.sign(e,t,r)]})})},e.prototype.digest=function(e,t){return u(this,void 0,void 0,function(){return l(this,function(r){return[2,window.crypto.subtle.digest(e,t)]})})},e}(),Br=function(){function e(){}return e.prototype.initPrng=function(e){return window.msrCrypto.initPrng(d(e))},e.prototype.getRandomValues=function(e){return window.msrCrypto.getRandomValues(e)},e.prototype.generateKey=function(e,t,r){return u(this,void 0,void 0,function(){return l(this,function(n){return[2,window.msrCrypto.subtle.generateKey(e,t,r)]})})},e.prototype.exportKey=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){return[2,window.msrCrypto.subtle.exportKey(Ot,e)]})})},e.prototype.importKey=function(e,t,r,n){return u(this,void 0,void 0,function(){return l(this,function(o){return[2,window.msrCrypto.subtle.importKey(Ot,e,t,r,n)]})})},e.prototype.sign=function(e,t,r){return u(this,void 0,void 0,function(){return l(this,function(n){return[2,window.msrCrypto.subtle.sign(e,t,r)]})})},e.prototype.digest=function(e,t){return u(this,void 0,void 0,function(){return l(this,function(r){return[2,window.msrCrypto.subtle.digest(e,t)]})})},e}(),Hr=function(){function e(){}return e.prototype.getRandomValues=function(e){return window.msCrypto.getRandomValues(e)},e.prototype.generateKey=function(e,t,r){return u(this,void 0,void 0,function(){return l(this,function(n){return[2,new Promise(function(n,o){var i=window.msCrypto.subtle.generateKey(e,t,r);i.addEventListener("complete",function(e){n(e.target.result)}),i.addEventListener("error",function(e){o(e)})})]})})},e.prototype.exportKey=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){return[2,new Promise(function(t,r){var n=window.msCrypto.subtle.exportKey(Ot,e);n.addEventListener("complete",function(e){var n=e.target.result,o=Ft.utf8ArrToString(new Uint8Array(n)).replace(/\r/g,S.EMPTY_STRING).replace(/\n/g,S.EMPTY_STRING).replace(/\t/g,S.EMPTY_STRING).split(" ").join(S.EMPTY_STRING).replace("\0",S.EMPTY_STRING);try{t(JSON.parse(o))}catch(e){r(e)}}),n.addEventListener("error",function(e){r(e)})})]})})},e.prototype.importKey=function(e,t,r,n){return u(this,void 0,void 0,function(){var o,i;return l(this,function(a){return o=Ft.getSortedObjectString(e),i=Ft.stringToArrayBuffer(o),[2,new Promise(function(e,o){var a=window.msCrypto.subtle.importKey(Ot,i,t,r,n);a.addEventListener("complete",function(t){e(t.target.result)}),a.addEventListener("error",function(e){o(e)})})]})})},e.prototype.sign=function(e,t,r){return u(this,void 0,void 0,function(){return l(this,function(n){return[2,new Promise(function(n,o){var i=window.msCrypto.subtle.sign(e,t,r);i.addEventListener("complete",function(e){n(e.target.result)}),i.addEventListener("error",function(e){o(e)})})]})})},e.prototype.digest=function(e,t){return u(this,void 0,void 0,function(){return l(this,function(r){return[2,new Promise(function(r,n){var o=window.msCrypto.subtle.digest(e,t.buffer);o.addEventListener("complete",function(e){r(e.target.result)}),o.addEventListener("error",function(e){n(e)})})]})})},e}(),qr={code:"redirect_uri_empty",desc:"A redirect URI is required for all calls, and none has been set."},Fr={code:"post_logout_uri_empty",desc:"A post logout redirect has not been set."},zr={code:"storage_not_supported",desc:"Given storage configuration option was not supported."},Kr={code:"no_redirect_callbacks",desc:"No redirect callbacks have been set. Please call setRedirectCallbacks() with the appropriate function arguments before continuing. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics."},jr={code:"stubbed_public_client_application_called",desc:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors"},Gr={code:"in_mem_redirect_unavailable",desc:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},Yr={code:"entropy_not_provided",desc:"The available browser crypto interface requires entropy set via system.cryptoOptions.entropy configuration option."},Wr=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="BrowserConfigurationAuthError",Object.setPrototypeOf(o,t.prototype),o}return o(t,e),t.createRedirectUriEmptyError=function(){return new t(qr.code,qr.desc)},t.createPostLogoutRedirectUriEmptyError=function(){return new t(Fr.code,Fr.desc)},t.createStorageNotSupportedError=function(e){return new t(zr.code,zr.desc+" Given Location: "+e)},t.createRedirectCallbacksNotSetError=function(){return new t(Kr.code,Kr.desc)},t.createStubPcaInstanceCalledError=function(){return new t(jr.code,jr.desc)},t.createInMemoryRedirectUnavailableError=function(){return new t(Gr.code,Gr.desc)},t.createEntropyNotProvided=function(){return new t(Yr.code,Yr.desc)},t}(ae),Qr="SHA-256",Vr=new Uint8Array([1,0,1]),Xr=function(){function e(e,t){var r,n;if(this.logger=e,this.cryptoOptions=t,this.hasBrowserCrypto())this.logger.verbose("BrowserCrypto: modern crypto interface available"),this.subtleCrypto=new Lr;else if(this.hasIECrypto())this.logger.verbose("BrowserCrypto: MS crypto interface available"),this.subtleCrypto=new Hr;else{if(!this.hasMsrCrypto()||!(null===(r=this.cryptoOptions)||void 0===r?void 0:r.useMsrCrypto))throw this.hasMsrCrypto()&&this.logger.info("BrowserCrypto: MSR Crypto interface available but system.cryptoOptions.useMsrCrypto not enabled"),this.logger.error("BrowserCrypto: No crypto interfaces available."),Dr.createCryptoNotAvailableError("Browser crypto, msCrypto, or msrCrypto interfaces not available.");this.logger.verbose("BrowserCrypto: MSR crypto interface available"),this.subtleCrypto=new Br}if(this.subtleCrypto.initPrng){if(this.logger.verbose("BrowserCrypto: Interface requires entropy"),!(null===(n=this.cryptoOptions)||void 0===n?void 0:n.entropy))throw this.logger.error("BrowserCrypto: Interface requires entropy but none provided."),Wr.createEntropyNotProvided();this.logger.verbose("BrowserCrypto: Entropy provided"),this.subtleCrypto.initPrng(this.cryptoOptions.entropy)}this.keygenAlgorithmOptions={name:"RSASSA-PKCS1-v1_5",hash:Qr,modulusLength:2048,publicExponent:Vr}}return e.prototype.hasIECrypto=function(){return"msCrypto"in window},e.prototype.hasBrowserCrypto=function(){return"crypto"in window},e.prototype.hasMsrCrypto=function(){return"msrCrypto"in window},e.prototype.sha256Digest=function(e){return u(this,void 0,void 0,function(){var t;return l(this,function(r){return t=Ft.stringToUtf8Arr(e),[2,this.subtleCrypto.digest({name:Qr},t)]})})},e.prototype.getRandomValues=function(e){return this.subtleCrypto.getRandomValues(e)},e.prototype.generateKeyPair=function(e,t){return u(this,void 0,void 0,function(){return l(this,function(r){return[2,this.subtleCrypto.generateKey(this.keygenAlgorithmOptions,e,t)]})})},e.prototype.exportJwk=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){return[2,this.subtleCrypto.exportKey(e)]})})},e.prototype.importJwk=function(e,t,r){return u(this,void 0,void 0,function(){return l(this,function(n){return[2,this.subtleCrypto.importKey(e,this.keygenAlgorithmOptions,t,r)]})})},e.prototype.sign=function(e,t){return u(this,void 0,void 0,function(){return l(this,function(r){return[2,this.subtleCrypto.sign(this.keygenAlgorithmOptions,e,t)]})})},e}(),Jr=function(){function e(){this.dbName=Mt,this.version=1,this.tableName=xt,this.dbOpen=!1}return e.prototype.open=function(){return u(this,void 0,void 0,function(){var e=this;return l(this,function(t){return[2,new Promise(function(t,r){var n=window.indexedDB.open(e.dbName,e.version);n.addEventListener("upgradeneeded",function(t){t.target.result.createObjectStore(e.tableName)}),n.addEventListener("success",function(r){var n=r;e.db=n.target.result,e.dbOpen=!0,t()}),n.addEventListener("error",function(){return r(Dr.createDatabaseUnavailableError())})})]})})},e.prototype.closeConnection=function(){var e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)},e.prototype.validateDbIsOpen=function(){return u(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return this.dbOpen?[3,2]:[4,this.open()];case 1:return[2,e.sent()];case 2:return[2]}})})},e.prototype.getItem=function(e){return u(this,void 0,void 0,function(){var t=this;return l(this,function(r){switch(r.label){case 0:return[4,this.validateDbIsOpen()];case 1:return r.sent(),[2,new Promise(function(r,n){if(!t.db)return n(Dr.createDatabaseNotOpenError());var o=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).get(e);o.addEventListener("success",function(e){var n=e;t.closeConnection(),r(n.target.result)}),o.addEventListener("error",function(e){t.closeConnection(),n(e)})})]}})})},e.prototype.setItem=function(e,t){return u(this,void 0,void 0,function(){var r=this;return l(this,function(n){switch(n.label){case 0:return[4,this.validateDbIsOpen()];case 1:return n.sent(),[2,new Promise(function(n,o){if(!r.db)return o(Dr.createDatabaseNotOpenError());var i=r.db.transaction([r.tableName],"readwrite").objectStore(r.tableName).put(t,e);i.addEventListener("success",function(){r.closeConnection(),n()}),i.addEventListener("error",function(e){r.closeConnection(),o(e)})})]}})})},e.prototype.removeItem=function(e){return u(this,void 0,void 0,function(){var t=this;return l(this,function(r){switch(r.label){case 0:return[4,this.validateDbIsOpen()];case 1:return r.sent(),[2,new Promise(function(r,n){if(!t.db)return n(Dr.createDatabaseNotOpenError());var o=t.db.transaction([t.tableName],"readwrite").objectStore(t.tableName).delete(e);o.addEventListener("success",function(){t.closeConnection(),r()}),o.addEventListener("error",function(e){t.closeConnection(),n(e)})})]}})})},e.prototype.getKeys=function(){return u(this,void 0,void 0,function(){var e=this;return l(this,function(t){switch(t.label){case 0:return[4,this.validateDbIsOpen()];case 1:return t.sent(),[2,new Promise(function(t,r){if(!e.db)return r(Dr.createDatabaseNotOpenError());var n=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).getAllKeys();n.addEventListener("success",function(r){var n=r;e.closeConnection(),t(n.target.result)}),n.addEventListener("error",function(t){e.closeConnection(),r(t)})})]}})})},e.prototype.containsKey=function(e){return u(this,void 0,void 0,function(){var t=this;return l(this,function(r){switch(r.label){case 0:return[4,this.validateDbIsOpen()];case 1:return r.sent(),[2,new Promise(function(r,n){if(!t.db)return n(Dr.createDatabaseNotOpenError());var o=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).count(e);o.addEventListener("success",function(e){var n=e;t.closeConnection(),r(1===n.target.result)}),o.addEventListener("error",function(e){t.closeConnection(),n(e)})})]}})})},e.prototype.deleteDatabase=function(){return u(this,void 0,void 0,function(){return l(this,function(e){return this.db&&this.dbOpen&&this.closeConnection(),[2,new Promise(function(e,t){var r=window.indexedDB.deleteDatabase(Mt);r.addEventListener("success",function(){return e(!0)}),r.addEventListener("blocked",function(){return e(!0)}),r.addEventListener("error",function(){return t(!1)})})]})})},e}(),Zr=function(){function e(){this.cache=new Map}return e.prototype.getItem=function(e){return this.cache.get(e)||null},e.prototype.setItem=function(e,t){this.cache.set(e,t)},e.prototype.removeItem=function(e){this.cache.delete(e)},e.prototype.getKeys=function(){var e=[];return this.cache.forEach(function(t,r){e.push(r)}),e},e.prototype.containsKey=function(e){return this.cache.has(e)},e.prototype.clear=function(){this.cache.clear()},e}(),$r=function(){function e(e,t){this.inMemoryCache=new Zr,this.indexedDBCache=new Jr,this.logger=e,this.storeName=t}return e.prototype.handleDatabaseAccessError=function(e){if(!(e instanceof Dr&&e.errorCode===Ar.code))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")},e.prototype.getItem=function(e){return u(this,void 0,void 0,function(){var t,r;return l(this,function(n){switch(n.label){case 0:if(t=this.inMemoryCache.getItem(e))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),[4,this.indexedDBCache.getItem(e)];case 2:return[2,n.sent()];case 3:return r=n.sent(),this.handleDatabaseAccessError(r),[3,4];case 4:return[2,t]}})})},e.prototype.setItem=function(e,t){return u(this,void 0,void 0,function(){var r;return l(this,function(n){switch(n.label){case 0:this.inMemoryCache.setItem(e,t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.indexedDBCache.setItem(e,t)];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),this.handleDatabaseAccessError(r),[3,4];case 4:return[2]}})})},e.prototype.removeItem=function(e){return u(this,void 0,void 0,function(){var t;return l(this,function(r){switch(r.label){case 0:this.inMemoryCache.removeItem(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.indexedDBCache.removeItem(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),this.handleDatabaseAccessError(t),[3,4];case 4:return[2]}})})},e.prototype.getKeys=function(){return u(this,void 0,void 0,function(){var e,t;return l(this,function(r){switch(r.label){case 0:if(0!==(e=this.inMemoryCache.getKeys()).length)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),this.logger.verbose("In-memory cache is empty, now querying persistent storage."),[4,this.indexedDBCache.getKeys()];case 2:return[2,r.sent()];case 3:return t=r.sent(),this.handleDatabaseAccessError(t),[3,4];case 4:return[2,e]}})})},e.prototype.containsKey=function(e){return u(this,void 0,void 0,function(){var t,r;return l(this,function(n){switch(n.label){case 0:if(t=this.inMemoryCache.containsKey(e))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),[4,this.indexedDBCache.containsKey(e)];case 2:return[2,n.sent()];case 3:return r=n.sent(),this.handleDatabaseAccessError(r),[3,4];case 4:return[2,t]}})})},e.prototype.clearInMemory=function(){this.logger.verbose("Deleting in-memory keystore "+this.storeName),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore "+this.storeName+" deleted")},e.prototype.clearPersistent=function(){return u(this,void 0,void 0,function(){var e,t;return l(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.logger.verbose("Deleting persistent keystore"),[4,this.indexedDBCache.deleteDatabase()];case 1:return(e=r.sent())&&this.logger.verbose("Persistent keystore deleted"),[2,e];case 2:return t=r.sent(),this.handleDatabaseAccessError(t),[2,!1];case 3:return[2]}})})},e}();!function(e){e.asymmetricKeys="asymmetricKeys",e.symmetricKeys="symmetricKeys"}(Nt||(Nt={}));var en,tn=function(){function e(e){this.logger=e,this.asymmetricKeys=new $r(this.logger,Nt.asymmetricKeys),this.symmetricKeys=new $r(this.logger,Nt.symmetricKeys)}return e.prototype.clear=function(){return u(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:this.asymmetricKeys.clearInMemory(),this.symmetricKeys.clearInMemory(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.asymmetricKeys.clearPersistent()];case 2:return t.sent(),[2,!0];case 3:return(e=t.sent())instanceof Error?this.logger.error("Clearing keystore failed with error: "+e.message):this.logger.error("Clearing keystore failed with unknown error"),[2,!1];case 4:return[2]}})})},e}(),rn=function(){function e(e,t,r){this.logger=e,this.browserCrypto=new Xr(this.logger,r),this.b64Encode=new zt,this.b64Decode=new Kt,this.guidGenerator=new qt(this.browserCrypto),this.pkceGenerator=new Ur(this.browserCrypto),this.cache=new tn(this.logger),this.performanceClient=t}return e.prototype.createNewGuid=function(){return this.guidGenerator.generateGuid()},e.prototype.base64Encode=function(e){return this.b64Encode.encode(e)},e.prototype.base64Decode=function(e){return this.b64Decode.decode(e)},e.prototype.generatePkceCodes=function(){return u(this,void 0,void 0,function(){return l(this,function(e){return[2,this.pkceGenerator.generateCodes()]})})},e.prototype.getPublicKeyThumbprint=function(t){var r;return u(this,void 0,void 0,function(){var n,o,a,s,c,u,h,d;return l(this,function(l){switch(l.label){case 0:return n=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement(i.CryptoOptsGetPublicKeyThumbprint,t.correlationId),[4,this.browserCrypto.generateKeyPair(e.EXTRACTABLE,e.POP_KEY_USAGES)];case 1:return o=l.sent(),[4,this.browserCrypto.exportJwk(o.publicKey)];case 2:return a=l.sent(),s={e:a.e,kty:a.kty,n:a.n},c=Ft.getSortedObjectString(s),[4,this.hashString(c)];case 3:return u=l.sent(),[4,this.browserCrypto.exportJwk(o.privateKey)];case 4:return h=l.sent(),[4,this.browserCrypto.importJwk(h,!1,["sign"])];case 5:return d=l.sent(),[4,this.cache.asymmetricKeys.setItem(u,{privateKey:d,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri})];case 6:return l.sent(),n&&n.endMeasurement({success:!0}),[2,u]}})})},e.prototype.removeTokenBindingKey=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,this.cache.asymmetricKeys.removeItem(e)];case 1:return t.sent(),[4,this.cache.asymmetricKeys.containsKey(e)];case 2:return[2,!t.sent()]}})})},e.prototype.clearKeystore=function(){return u(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return[4,this.cache.clear()];case 1:return[2,e.sent()]}})})},e.prototype.signJwt=function(e,t,r){var n;return u(this,void 0,void 0,function(){var o,a,s,c,u,h,d,p,f,g,m,v,y;return l(this,function(l){switch(l.label){case 0:return o=null===(n=this.performanceClient)||void 0===n?void 0:n.startMeasurement(i.CryptoOptsSignJwt,r),[4,this.cache.asymmetricKeys.getItem(t)];case 1:if(!(a=l.sent()))throw Dr.createSigningKeyNotFoundInStorageError(t);return[4,this.browserCrypto.exportJwk(a.publicKey)];case 2:return s=l.sent(),c=Ft.getSortedObjectString(s),u=this.b64Encode.urlEncode(JSON.stringify({kid:t})),h=Bt.getShrHeaderString({kid:u,alg:s.alg}),d=this.b64Encode.urlEncode(h),e.cnf={jwk:JSON.parse(c)},p=this.b64Encode.urlEncode(JSON.stringify(e)),f=d+"."+p,g=Ft.stringToArrayBuffer(f),[4,this.browserCrypto.sign(a.privateKey,g)];case 3:return m=l.sent(),v=this.b64Encode.urlEncodeArr(new Uint8Array(m)),y=f+"."+v,o&&o.endMeasurement({success:!0}),[2,y]}})})},e.prototype.hashString=function(e){return u(this,void 0,void 0,function(){var t,r;return l(this,function(n){switch(n.label){case 0:return[4,this.browserCrypto.sha256Digest(e)];case 1:return t=n.sent(),r=new Uint8Array(t),[2,this.b64Encode.urlEncodeArr(r)]}})})},e.POP_KEY_USAGES=["sign","verify"],e.EXTRACTABLE=!0,e}();!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(en||(en={}));var nn,on=function(){function e(t,r,n){this.level=en.Info;var o=t||e.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||function(){},this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level="number"==typeof o.logLevel?o.logLevel:en.Info,this.correlationId=o.correlationId||S.EMPTY_STRING,this.packageName=r||S.EMPTY_STRING,this.packageVersion=n||S.EMPTY_STRING}return e.createDefaultLoggerOptions=function(){return{loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:en.Info}},e.prototype.clone=function(t,r,n){return new e({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},t,r)},e.prototype.logMessage=function(e,t){if(!(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)){var r=(new Date).toUTCString(),n=(at.isEmpty(t.correlationId)?at.isEmpty(this.correlationId)?"["+r+"]":"["+r+"] : ["+this.correlationId+"]":"["+r+"] : ["+t.correlationId+"]")+" : "+this.packageName+"@"+this.packageVersion+" : "+en[t.logLevel]+" - "+e;this.executeCallback(t.logLevel,n,t.containsPii||!1)}},e.prototype.executeCallback=function(e,t,r){this.localCallback&&this.localCallback(e,t,r)},e.prototype.error=function(e,t){this.logMessage(e,{logLevel:en.Error,containsPii:!1,correlationId:t||S.EMPTY_STRING})},e.prototype.errorPii=function(e,t){this.logMessage(e,{logLevel:en.Error,containsPii:!0,correlationId:t||S.EMPTY_STRING})},e.prototype.warning=function(e,t){this.logMessage(e,{logLevel:en.Warning,containsPii:!1,correlationId:t||S.EMPTY_STRING})},e.prototype.warningPii=function(e,t){this.logMessage(e,{logLevel:en.Warning,containsPii:!0,correlationId:t||S.EMPTY_STRING})},e.prototype.info=function(e,t){this.logMessage(e,{logLevel:en.Info,containsPii:!1,correlationId:t||S.EMPTY_STRING})},e.prototype.infoPii=function(e,t){this.logMessage(e,{logLevel:en.Info,containsPii:!0,correlationId:t||S.EMPTY_STRING})},e.prototype.verbose=function(e,t){this.logMessage(e,{logLevel:en.Verbose,containsPii:!1,correlationId:t||S.EMPTY_STRING})},e.prototype.verbosePii=function(e,t){this.logMessage(e,{logLevel:en.Verbose,containsPii:!0,correlationId:t||S.EMPTY_STRING})},e.prototype.trace=function(e,t){this.logMessage(e,{logLevel:en.Trace,containsPii:!1,correlationId:t||S.EMPTY_STRING})},e.prototype.tracePii=function(e,t){this.logMessage(e,{logLevel:en.Trace,containsPii:!0,correlationId:t||S.EMPTY_STRING})},e.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||!1},e}(),an=function(){function e(e,t,r,n,o,i){this.authority=t,this.libraryName=n,this.libraryVersion=o,this.applicationTelemetry=i,this.clientId=e,this.logger=r,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map}return e.prototype.startPerformanceMeasurement=function(e,t){return{}},e.prototype.startPerformanceMeasuremeant=function(e,t){return{}},e.prototype.getIntFields=function(){return p},e.prototype.getPreQueueTime=function(e,t){var r=this.preQueueTimeByCorrelationId.get(t);if(r){if(r.name===e)return r.time;this.logger.trace("PerformanceClient.getPreQueueTime: no pre-queue time found for "+e+", unable to add queue measurement")}else this.logger.trace("PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: "+t+", unable to add queue measurement")},e.prototype.calculateQueuedTime=function(e,t){return e<1?(this.logger.trace("PerformanceClient: preQueueTime should be a positive integer and not "+e),0):t<1?(this.logger.trace("PerformanceClient: currentTime should be a positive integer and not "+t),0):t<e?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):t-e},e.prototype.addQueueMeasurement=function(e,t,r,n){if(t){if(0===r)this.logger.trace("PerformanceClient.addQueueMeasurement: queue time provided for "+e+" is "+r);else if(!r)return void this.logger.trace("PerformanceClient.addQueueMeasurement: no queue time provided for "+e);var o={eventName:e,queueTime:r,manuallyCompleted:n},i=this.queueMeasurements.get(t);if(i)i.push(o),this.queueMeasurements.set(t,i);else{this.logger.trace("PerformanceClient.addQueueMeasurement: adding correlationId "+t+" to queue measurements");var a=[o];this.queueMeasurements.set(t,a)}this.preQueueTimeByCorrelationId.delete(t)}else this.logger.trace("PerformanceClient.addQueueMeasurement: correlationId not provided for "+e+", cannot add queue measurement")},e.prototype.startMeasurement=function(e,t){var r,n,o=this,i=t||this.generateId();t||this.logger.info("PerformanceClient: No correlation id provided for "+e+", generating",i),this.logger.trace("PerformanceClient: Performance measurement started for "+e,i);var s=this.startPerformanceMeasuremeant(e,i);s.startMeasurement();var c={eventId:this.generateId(),status:a.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:e,startTimeMs:Date.now(),correlationId:i,appName:null===(r=this.applicationTelemetry)||void 0===r?void 0:r.appName,appVersion:null===(n=this.applicationTelemetry)||void 0===n?void 0:n.appVersion};return this.cacheEventByCorrelationId(c),{endMeasurement:function(e){return o.endMeasurement(m(m({},c),e),s)},discardMeasurement:function(){return o.discardMeasurements(c.correlationId)},addStaticFields:function(e){return o.addStaticFields(e,c.correlationId)},increment:function(e){return o.increment(e,c.correlationId)},measurement:s,event:c}},e.prototype.endMeasurement=function(e,t){var r,n,o=this,i=this.eventsByCorrelationId.get(e.correlationId);if(!i)return this.logger.trace("PerformanceClient: Measurement not found for "+e.eventId,e.correlationId),null;var s=e.eventId===i.eventId,c={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0};s?(c=this.getQueueInfo(e.correlationId),this.discardCache(i.correlationId)):null===(r=i.incompleteSubMeasurements)||void 0===r||r.delete(e.eventId),null==t||t.endMeasurement();var u=null==t?void 0:t.flushMeasurement();if(!u)return this.logger.trace("PerformanceClient: Performance measurement not taken",i.correlationId),null;if(this.logger.trace("PerformanceClient: Performance measurement ended for "+e.name+": "+u+" ms",e.correlationId),!s)return i[e.name+"DurationMs"]=Math.floor(u),m({},i);var l=m(m({},i),e),h=0;return null===(n=l.incompleteSubMeasurements)||void 0===n||n.forEach(function(t){o.logger.trace("PerformanceClient: Incomplete submeasurement "+t.name+" found for "+e.name,l.correlationId),h++}),l.incompleteSubMeasurements=void 0,l=m(m({},l),{durationMs:Math.round(u),queuedTimeMs:c.totalQueueTime,queuedCount:c.totalQueueCount,queuedManuallyCompletedCount:c.manuallyCompletedCount,status:a.Completed,incompleteSubsCount:h}),this.truncateIntegralFields(l,this.getIntFields()),this.emitEvents([l],e.correlationId),l},e.prototype.addStaticFields=function(e,t){this.logger.trace("PerformanceClient: Updating static fields");var r=this.eventsByCorrelationId.get(t);r?this.eventsByCorrelationId.set(t,m(m({},r),e)):this.logger.trace("PerformanceClient: Event not found for",t)},e.prototype.increment=function(e,t){this.logger.trace("PerformanceClient: Updating counters");var r=this.eventsByCorrelationId.get(t);if(r)for(var n in e)r.hasOwnProperty(n)||(r[n]=0),r[n]+=e[n];else this.logger.trace("PerformanceClient: Event not found for",t)},e.prototype.cacheEventByCorrelationId=function(e){var t=this.eventsByCorrelationId.get(e.correlationId);t?(this.logger.trace("PerformanceClient: Performance measurement for "+e.name+" added/updated",e.correlationId),t.incompleteSubMeasurements=t.incompleteSubMeasurements||new Map,t.incompleteSubMeasurements.set(e.eventId,{name:e.name,startTimeMs:e.startTimeMs})):(this.logger.trace("PerformanceClient: Performance measurement for "+e.name+" started",e.correlationId),this.eventsByCorrelationId.set(e.correlationId,m({},e)))},e.prototype.getQueueInfo=function(e){var t=this.queueMeasurements.get(e);t||this.logger.trace("PerformanceClient: no queue measurements found for for correlationId: "+e);var r=0,n=0,o=0;return null==t||t.forEach(function(e){r+=e.queueTime,n++,o+=e.manuallyCompleted?1:0}),{totalQueueTime:r,totalQueueCount:n,manuallyCompletedCount:o}},e.prototype.discardMeasurements=function(e){this.logger.trace("PerformanceClient: Performance measurements discarded",e),this.eventsByCorrelationId.delete(e)},e.prototype.discardCache=function(e){this.discardMeasurements(e),this.logger.trace("PerformanceClient: QueueMeasurements discarded",e),this.queueMeasurements.delete(e),this.logger.trace("PerformanceClient: Pre-queue times discarded",e),this.preQueueTimeByCorrelationId.delete(e)},e.prototype.addPerformanceCallback=function(e){var t=this.generateId();return this.callbacks.set(t,e),this.logger.verbose("PerformanceClient: Performance callback registered with id: "+t),t},e.prototype.removePerformanceCallback=function(e){var t=this.callbacks.delete(e);return t?this.logger.verbose("PerformanceClient: Performance callback "+e+" removed."):this.logger.verbose("PerformanceClient: Performance callback "+e+" not removed."),t},e.prototype.emitEvents=function(e,t){var r=this;this.logger.verbose("PerformanceClient: Emitting performance events",t),this.callbacks.forEach(function(n,o){r.logger.trace("PerformanceClient: Emitting event to callback "+o,t),n.apply(null,[e])})},e.prototype.truncateIntegralFields=function(e,t){t.forEach(function(t){t in e&&"number"==typeof e[t]&&(e[t]=Math.floor(e[t]))})},e}(),sn=function(){function e(){}return e.prototype.startMeasurement=function(){},e.prototype.endMeasurement=function(){},e.prototype.flushMeasurement=function(){return null},e}(),cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.generateId=function(){return"callback-id"},t.prototype.startPerformanceMeasuremeant=function(){return new sn},t.prototype.startPerformanceMeasurement=function(){return new sn},t.prototype.calculateQueuedTime=function(e,t){return 0},t.prototype.addQueueMeasurement=function(e,t,r){},t.prototype.setPreQueueTime=function(e,t){},t}(an),un={createNewGuid:function(){throw ae.createUnexpectedError("Crypto interface - createNewGuid() has not been implemented")},base64Decode:function(){throw ae.createUnexpectedError("Crypto interface - base64Decode() has not been implemented")},base64Encode:function(){throw ae.createUnexpectedError("Crypto interface - base64Encode() has not been implemented")},generatePkceCodes:function(){return v(this,void 0,void 0,function(){return y(this,function(e){throw ae.createUnexpectedError("Crypto interface - generatePkceCodes() has not been implemented")})})},getPublicKeyThumbprint:function(){return v(this,void 0,void 0,function(){return y(this,function(e){throw ae.createUnexpectedError("Crypto interface - getPublicKeyThumbprint() has not been implemented")})})},removeTokenBindingKey:function(){return v(this,void 0,void 0,function(){return y(this,function(e){throw ae.createUnexpectedError("Crypto interface - removeTokenBindingKey() has not been implemented")})})},clearKeystore:function(){return v(this,void 0,void 0,function(){return y(this,function(e){throw ae.createUnexpectedError("Crypto interface - clearKeystore() has not been implemented")})})},signJwt:function(){return v(this,void 0,void 0,function(){return y(this,function(e){throw ae.createUnexpectedError("Crypto interface - signJwt() has not been implemented")})})},hashString:function(){return v(this,void 0,void 0,function(){return y(this,function(e){throw ae.createUnexpectedError("Crypto interface - hashString() has not been implemented")})})}},ln=function(){function e(){}return e.prototype.generateAccountId=function(){return e.generateAccountIdForCacheKey(this.homeAccountId,this.environment)},e.prototype.generateCredentialId=function(){return e.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)},e.prototype.generateTarget=function(){return e.generateTargetForCacheKey(this.target)},e.prototype.generateCredentialKey=function(){return e.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId,this.tokenType,this.requestedClaimsHash)},e.prototype.generateType=function(){switch(this.credentialType){case N.ID_TOKEN:return D.ID_TOKEN;case N.ACCESS_TOKEN:case N.ACCESS_TOKEN_WITH_AUTH_SCHEME:return D.ACCESS_TOKEN;case N.REFRESH_TOKEN:return D.REFRESH_TOKEN;default:throw it.createUnexpectedCredentialTypeError()}},e.generateCredentialCacheKey=function(e,t,r,n,o,i,a,s,c){return[this.generateAccountIdForCacheKey(e,t),this.generateCredentialIdForCacheKey(r,n,o,a),this.generateTargetForCacheKey(i),this.generateClaimsHashForCacheKey(c),this.generateSchemeForCacheKey(s)].join(x.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateAccountIdForCacheKey=function(e,t){return[e,t].join(x.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateCredentialIdForCacheKey=function(e,t,r,n){return[e,e===N.REFRESH_TOKEN&&n||t,r||S.EMPTY_STRING].join(x.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateTargetForCacheKey=function(e){return(e||S.EMPTY_STRING).toLowerCase()},e.generateClaimsHashForCacheKey=function(e){return(e||S.EMPTY_STRING).toLowerCase()},e.generateSchemeForCacheKey=function(e){return e&&e.toLowerCase()!==z.BEARER.toLowerCase()?e.toLowerCase():S.EMPTY_STRING},e}(),hn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.createIdTokenEntity=function(e,r,n,o,i){var a=new t;return a.credentialType=N.ID_TOKEN,a.homeAccountId=e,a.environment=r,a.clientId=o,a.secret=n,a.realm=i,a},t.isIdTokenEntity=function(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===N.ID_TOKEN)},t}(ln),dn={code:"redirect_uri_empty",desc:"A redirect URI is required for all calls, and none has been set."},pn={code:"post_logout_uri_empty",desc:"A post logout redirect has not been set."},fn={code:"claims_request_parsing_error",desc:"Could not parse the given claims request object."},gn={code:"authority_uri_insecure",desc:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options"},mn={code:"url_parse_error",desc:"URL could not be parsed into appropriate segments."},vn={code:"empty_url_error",desc:"URL was empty or null."},yn={code:"empty_input_scopes_error",desc:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token."},wn={code:"clientid_input_scopes_error",desc:"Client ID can only be provided as a single scope."},_n={code:"invalid_prompt_value",desc:"Supported prompt values are 'login', 'select_account', 'consent', 'create', 'none' and 'no_session'.  Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest"},bn={code:"invalid_claims",desc:"Given claims parameter must be a stringified JSON object."},Cn={code:"token_request_empty",desc:"Token request was empty and not found in cache."},En={code:"logout_request_empty",desc:"The logout request was null or undefined."},Tn={code:"invalid_code_challenge_method",desc:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".'},Sn={code:"pkce_params_missing",desc:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request"},kn={code:"invalid_cloud_discovery_metadata",desc:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields"},In={code:"invalid_authority_metadata",desc:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields."},An={code:"untrusted_authority",desc:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter."},Rn={code:"invalid_azure_cloud_instance",desc:"Invalid AzureCloudInstance provided. Please refer MSAL JS docs: aks.ms/msaljs/azure_cloud_instance for valid values"},On={code:"missing_ssh_jwk",desc:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme."},Pn={code:"missing_ssh_kid",desc:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme."},Mn={code:"missing_nonce_authentication_header",desc:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce."},xn={code:"invalid_authentication_header",desc:"Invalid authentication header provided"},Nn={code:"authority_mismatch",desc:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},Dn=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="ClientConfigurationError",Object.setPrototypeOf(o,t.prototype),o}return g(t,e),t.createRedirectUriEmptyError=function(){return new t(dn.code,dn.desc)},t.createPostLogoutRedirectUriEmptyError=function(){return new t(pn.code,pn.desc)},t.createClaimsRequestParsingError=function(e){return new t(fn.code,fn.desc+" Given value: "+e)},t.createInsecureAuthorityUriError=function(e){return new t(gn.code,gn.desc+" Given URI: "+e)},t.createUrlParseError=function(e){return new t(mn.code,mn.desc+" Given Error: "+e)},t.createUrlEmptyError=function(){return new t(vn.code,vn.desc)},t.createEmptyScopesArrayError=function(){return new t(yn.code,""+yn.desc)},t.createClientIdSingleScopeError=function(e){return new t(wn.code,wn.desc+" Given Scopes: "+e)},t.createInvalidPromptError=function(e){return new t(_n.code,_n.desc+" Given value: "+e)},t.createInvalidClaimsRequestError=function(){return new t(bn.code,bn.desc)},t.createEmptyLogoutRequestError=function(){return new t(En.code,En.desc)},t.createEmptyTokenRequestError=function(){return new t(Cn.code,Cn.desc)},t.createInvalidCodeChallengeMethodError=function(){return new t(Tn.code,Tn.desc)},t.createInvalidCodeChallengeParamsError=function(){return new t(Sn.code,Sn.desc)},t.createInvalidCloudDiscoveryMetadataError=function(){return new t(kn.code,kn.desc)},t.createInvalidAuthorityMetadataError=function(){return new t(In.code,In.desc)},t.createUntrustedAuthorityError=function(){return new t(An.code,An.desc)},t.createInvalidAzureCloudInstanceError=function(){return new t(Rn.code,Rn.desc)},t.createMissingSshJwkError=function(){return new t(On.code,On.desc)},t.createMissingSshKidError=function(){return new t(Pn.code,Pn.desc)},t.createMissingNonceAuthenticationHeadersError=function(){return new t(Mn.code,Mn.desc)},t.createInvalidAuthenticationHeaderError=function(e,r){return new t(xn.code,xn.desc+". Invalid header: "+e+". Details: "+r)},t.createAuthorityMismatchError=function(){return new t(Nn.code,Nn.desc)},t}(it),Un=function(){function e(e){var t=this,r=e?at.trimArrayEntries(w(e)):[],n=r?at.removeEmptyStringsFromArray(r):[];this.validateInputScopes(n),this.scopes=new Set,n.forEach(function(e){return t.scopes.add(e)})}return e.fromString=function(t){return new e((t||S.EMPTY_STRING).split(" "))},e.createSearchScopes=function(t){var r=new e(t);return r.containsOnlyOIDCScopes()?r.removeScope(S.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r},e.prototype.validateInputScopes=function(e){if(!e||e.length<1)throw Dn.createEmptyScopesArrayError()},e.prototype.containsScope=function(t){var r=new e(this.printScopesLowerCase().split(" "));return!at.isEmpty(t)&&r.scopes.has(t.toLowerCase())},e.prototype.containsScopeSet=function(e){var t=this;return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every(function(e){return t.containsScope(e)}))},e.prototype.containsOnlyOIDCScopes=function(){var e=this,t=0;return I.forEach(function(r){e.containsScope(r)&&(t+=1)}),this.scopes.size===t},e.prototype.appendScope=function(e){at.isEmpty(e)||this.scopes.add(e.trim())},e.prototype.appendScopes=function(e){var t=this;try{e.forEach(function(e){return t.appendScope(e)})}catch(e){throw it.createAppendScopeSetError(e)}},e.prototype.removeScope=function(e){if(at.isEmpty(e))throw it.createRemoveEmptyScopeFromSetError(e);this.scopes.delete(e.trim())},e.prototype.removeOIDCScopes=function(){var e=this;I.forEach(function(t){e.scopes.delete(t)})},e.prototype.unionScopeSets=function(e){if(!e)throw it.createEmptyInputScopeSetError();var t=new Set;return e.scopes.forEach(function(e){return t.add(e.toLowerCase())}),this.scopes.forEach(function(e){return t.add(e.toLowerCase())}),t},e.prototype.intersectingScopeSets=function(e){if(!e)throw it.createEmptyInputScopeSetError();e.containsOnlyOIDCScopes()||e.removeOIDCScopes();var t=this.unionScopeSets(e),r=e.getScopeCount(),n=this.getScopeCount();return t.size<n+r},e.prototype.getScopeCount=function(){return this.scopes.size},e.prototype.asArray=function(){var e=[];return this.scopes.forEach(function(t){return e.push(t)}),e},e.prototype.printScopes=function(){return this.scopes?this.asArray().join(" "):S.EMPTY_STRING},e.prototype.printScopesLowerCase=function(){return this.printScopes().toLowerCase()},e}(),Ln=function(){function e(t,r){if(at.isEmpty(t))throw it.createTokenNullOrEmptyError(t);this.rawToken=t,this.claims=e.extractTokenClaims(t,r)}return e.extractTokenClaims=function(e,t){var r=at.decodeAuthToken(e);try{var n=r.JWSPayload,o=t.base64Decode(n);return JSON.parse(o)}catch(e){throw it.createTokenParsingError(e)}},e.checkMaxAge=function(e,t){if(0===t||Date.now()-3e5>e+t)throw it.createMaxAgeTranspiredError()},e}(),Bn="@azure/msal-common",Hn="13.3.3",qn=function(){function e(e,t,r){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(Bn,Hn)}return e.prototype.getAllAccounts=function(){var e=this,t=this.getAccountKeys();if(t.length<1)return[];var r=t.reduce(function(t,r){var n=e.getAccount(r);return n?(t.push(n),t):t},[]);return r.length<1?[]:r.map(function(t){return e.getAccountInfoFromEntity(t)})},e.prototype.getAccountInfoFilteredBy=function(e){var t=this.getAccountsFilteredBy(e);return t.length>0?this.getAccountInfoFromEntity(t[0]):null},e.prototype.getAccountInfoFromEntity=function(e){var t=e.getAccountInfo(),r=this.getIdToken(t);return r&&(t.idToken=r.secret,t.idTokenClaims=new Ln(r.secret,this.cryptoImpl).claims),t},e.prototype.saveCacheRecord=function(e){return v(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:if(!e)throw it.createNullOrUndefinedCacheRecord();return e.account&&this.setAccount(e.account),e.idToken&&this.setIdTokenCredential(e.idToken),e.accessToken?[4,this.saveAccessToken(e.accessToken)]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.refreshToken&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata),[2]}})})},e.prototype.saveAccessToken=function(e){return v(this,void 0,void 0,function(){var t,r,n,o,i=this;return y(this,function(a){switch(a.label){case 0:return t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),n=Un.fromString(e.target),o=[],r.accessToken.forEach(function(e){if(i.accessTokenKeyMatchesFilter(e,t,!1)){var r=i.getAccessTokenCredential(e);if(r&&i.credentialMatchesFilter(r,t))Un.fromString(r.target).intersectingScopeSets(n)&&o.push(i.removeAccessToken(e))}}),[4,Promise.all(o)];case 1:return a.sent(),this.setAccessTokenCredential(e),[2]}})})},e.prototype.getAccountsFilteredBy=function(e){var t=this,r=this.getAccountKeys(),n=[];return r.forEach(function(r){if(t.isAccountKey(r,e.homeAccountId,e.realm)){var o=t.getAccount(r);o&&(e.homeAccountId&&!t.matchHomeAccountId(o,e.homeAccountId)||e.localAccountId&&!t.matchLocalAccountId(o,e.localAccountId)||e.username&&!t.matchUsername(o,e.username)||e.environment&&!t.matchEnvironment(o,e.environment)||e.realm&&!t.matchRealm(o,e.realm)||e.nativeAccountId&&!t.matchNativeAccountId(o,e.nativeAccountId)||n.push(o))}}),n},e.prototype.isAccountKey=function(e,t,r){return!(e.split(x.CACHE_KEY_SEPARATOR).length<3)&&(!(t&&!e.toLowerCase().includes(t.toLowerCase()))&&!(r&&!e.toLowerCase().includes(r.toLowerCase())))},e.prototype.isCredentialKey=function(e){if(e.split(x.CACHE_KEY_SEPARATOR).length<6)return!1;var t=e.toLowerCase();if(-1===t.indexOf(N.ID_TOKEN.toLowerCase())&&-1===t.indexOf(N.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(N.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(N.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(N.REFRESH_TOKEN.toLowerCase())>-1){var r=""+N.REFRESH_TOKEN+x.CACHE_KEY_SEPARATOR+this.clientId+x.CACHE_KEY_SEPARATOR,n=""+N.REFRESH_TOKEN+x.CACHE_KEY_SEPARATOR+H+x.CACHE_KEY_SEPARATOR;if(-1===t.indexOf(r.toLowerCase())&&-1===t.indexOf(n.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0},e.prototype.credentialMatchesFilter=function(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===N.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===z.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0},e.prototype.getAppMetadataFilteredBy=function(e){return this.getAppMetadataFilteredByInternal(e.environment,e.clientId)},e.prototype.getAppMetadataFilteredByInternal=function(e,t){var r=this,n=this.getKeys(),o={};return n.forEach(function(n){if(r.isAppMetadata(n)){var i=r.getAppMetadata(n);i&&(e&&!r.matchEnvironment(i,e)||t&&!r.matchClientId(i,t)||(o[n]=i))}}),o},e.prototype.getAuthorityMetadataByAlias=function(e){var t=this,r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(function(r){if(t.isAuthorityMetadata(r)&&-1!==r.indexOf(t.clientId)){var o=t.getAuthorityMetadata(r);o&&-1!==o.aliases.indexOf(e)&&(n=o)}}),n},e.prototype.removeAllAccounts=function(){return v(this,void 0,void 0,function(){var e,t,r=this;return y(this,function(n){switch(n.label){case 0:return e=this.getAccountKeys(),t=[],e.forEach(function(e){t.push(r.removeAccount(e))}),[4,Promise.all(t)];case 1:return n.sent(),[2]}})})},e.prototype.removeAccount=function(e){return v(this,void 0,void 0,function(){var t;return y(this,function(r){switch(r.label){case 0:if(!(t=this.getAccount(e)))throw it.createNoAccountFoundError();return[4,this.removeAccountContext(t)];case 1:return r.sent(),this.removeItem(e),[2]}})})},e.prototype.removeAccountContext=function(e){return v(this,void 0,void 0,function(){var t,r,n,o=this;return y(this,function(i){switch(i.label){case 0:return t=this.getTokenKeys(),r=e.generateAccountId(),n=[],t.idToken.forEach(function(e){0===e.indexOf(r)&&o.removeIdToken(e)}),t.accessToken.forEach(function(e){0===e.indexOf(r)&&n.push(o.removeAccessToken(e))}),t.refreshToken.forEach(function(e){0===e.indexOf(r)&&o.removeRefreshToken(e)}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},e.prototype.removeAccessToken=function(e){return v(this,void 0,void 0,function(){var t,r;return y(this,function(n){switch(n.label){case 0:if(!(t=this.getAccessTokenCredential(e)))return[2];if(t.credentialType.toLowerCase()!==N.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())return[3,4];if(t.tokenType!==z.POP)return[3,4];if(!(r=t.keyId))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.cryptoImpl.removeTokenBindingKey(r)];case 2:return n.sent(),[3,4];case 3:throw n.sent(),it.createBindingKeyNotRemovedError();case 4:return[2,this.removeItem(e)]}})})},e.prototype.removeAppMetadata=function(){var e=this;return this.getKeys().forEach(function(t){e.isAppMetadata(t)&&e.removeItem(t)}),!0},e.prototype.readCacheRecord=function(e,t,r){var n=this.getTokenKeys(),o=this.readAccountFromCache(e),i=this.getIdToken(e,n),a=this.getAccessToken(e,t,n),s=this.getRefreshToken(e,!1,n),c=this.readAppMetadataFromCache(r);return o&&i&&(o.idTokenClaims=new Ln(i.secret,this.cryptoImpl).claims),{account:o,idToken:i,accessToken:a,refreshToken:s,appMetadata:c}},e.prototype.readAccountFromCache=function(e){var t=yt.generateAccountCacheKey(e);return this.getAccount(t)},e.prototype.getIdToken=function(e,t){var r=this;this.commonLogger.trace("CacheManager - getIdToken called");var n={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:N.ID_TOKEN,clientId:this.clientId,realm:e.tenantId},o=this.getIdTokensByFilter(n,t),i=o.length;return i<1?(this.commonLogger.info("CacheManager:getIdToken - No token found"),null):i>1?(this.commonLogger.info("CacheManager:getIdToken - Multiple id tokens found, clearing them"),o.forEach(function(e){r.removeIdToken(e.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getIdToken - Returning id token"),o[0])},e.prototype.getIdTokensByFilter=function(e,t){var r=this,n=t&&t.idToken||this.getTokenKeys().idToken,o=[];return n.forEach(function(t){if(r.idTokenKeyMatchesFilter(t,m({clientId:r.clientId},e))){var n=r.getIdTokenCredential(t);n&&r.credentialMatchesFilter(n,e)&&o.push(n)}}),o},e.prototype.idTokenKeyMatchesFilter=function(e,t){var r=e.toLowerCase();return(!t.clientId||-1!==r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase()))},e.prototype.removeIdToken=function(e){this.removeItem(e)},e.prototype.removeRefreshToken=function(e){this.removeItem(e)},e.prototype.getAccessToken=function(e,t,r){var n=this;this.commonLogger.trace("CacheManager - getAccessToken called");var o=Un.createSearchScopes(t.scopes),i=t.authenticationScheme||z.BEARER,a=i&&i.toLowerCase()!==z.BEARER.toLowerCase()?N.ACCESS_TOKEN_WITH_AUTH_SCHEME:N.ACCESS_TOKEN,s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:a,clientId:this.clientId,realm:e.tenantId,target:o,tokenType:i,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},c=r&&r.accessToken||this.getTokenKeys().accessToken,u=[];c.forEach(function(e){if(n.accessTokenKeyMatchesFilter(e,s,!0)){var t=n.getAccessTokenCredential(e);t&&n.credentialMatchesFilter(t,s)&&u.push(t)}});var l=u.length;return l<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):l>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),u.forEach(function(e){n.removeAccessToken(e.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),u[0])},e.prototype.accessTokenKeyMatchesFilter=function(e,t,r){var n=e.toLowerCase();if(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===n.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===n.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target)for(var o=t.target.asArray(),i=0;i<o.length;i++){if(r&&!n.includes(o[i].toLowerCase()))return!1;if(!r&&n.includes(o[i].toLowerCase()))return!0}return!0},e.prototype.getAccessTokensByFilter=function(e){var t=this,r=this.getTokenKeys(),n=[];return r.accessToken.forEach(function(r){if(t.accessTokenKeyMatchesFilter(r,e,!0)){var o=t.getAccessTokenCredential(r);o&&t.credentialMatchesFilter(o,e)&&n.push(o)}}),n},e.prototype.getRefreshToken=function(e,t,r){var n=this;this.commonLogger.trace("CacheManager - getRefreshToken called");var o=t?H:void 0,i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:N.REFRESH_TOKEN,clientId:this.clientId,familyId:o},a=r&&r.refreshToken||this.getTokenKeys().refreshToken,s=[];return a.forEach(function(e){if(n.refreshTokenKeyMatchesFilter(e,i)){var t=n.getRefreshTokenCredential(e);t&&n.credentialMatchesFilter(t,i)&&s.push(t)}}),s.length<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),s[0])},e.prototype.refreshTokenKeyMatchesFilter=function(e,t){var r=e.toLowerCase();return(!t.familyId||-1!==r.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase())))},e.prototype.readAppMetadataFromCache=function(e){var t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),n=Object.keys(r).map(function(e){return r[e]}),o=n.length;if(o<1)return null;if(o>1)throw it.createMultipleMatchingAppMetadataInCacheError();return n[0]},e.prototype.isAppMetadataFOCI=function(e){var t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==H)},e.prototype.matchHomeAccountId=function(e,t){return!("string"!=typeof e.homeAccountId||t!==e.homeAccountId)},e.prototype.matchLocalAccountId=function(e,t){return!("string"!=typeof e.localAccountId||t!==e.localAccountId)},e.prototype.matchUsername=function(e,t){return!("string"!=typeof e.username||t.toLowerCase()!==e.username.toLowerCase())},e.prototype.matchUserAssertionHash=function(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)},e.prototype.matchEnvironment=function(e,t){var r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)},e.prototype.matchCredentialType=function(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()},e.prototype.matchClientId=function(e,t){return!(!e.clientId||t!==e.clientId)},e.prototype.matchFamilyId=function(e,t){return!(!e.familyId||t!==e.familyId)},e.prototype.matchRealm=function(e,t){return!(!e.realm||t!==e.realm)},e.prototype.matchNativeAccountId=function(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)},e.prototype.matchTarget=function(e,t){return!(e.credentialType!==N.ACCESS_TOKEN&&e.credentialType!==N.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&Un.fromString(e.target).containsScopeSet(t)},e.prototype.matchTokenType=function(e,t){return!(!e.tokenType||e.tokenType!==t)},e.prototype.matchKeyId=function(e,t){return!(!e.keyId||e.keyId!==t)},e.prototype.isAppMetadata=function(e){return-1!==e.indexOf(B)},e.prototype.isAuthorityMetadata=function(e){return-1!==e.indexOf(q)},e.prototype.generateAuthorityMetadataCacheKey=function(e){return q+"-"+this.clientId+"-"+e},e.toObject=function(e,t){for(var r in t)e[r]=t[r];return e},e}(),Fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.setAccount=function(){throw ae.createUnexpectedError("Storage interface - setAccount() has not been implemented for the cacheStorage interface.")},t.prototype.getAccount=function(){throw ae.createUnexpectedError("Storage interface - getAccount() has not been implemented for the cacheStorage interface.")},t.prototype.setIdTokenCredential=function(){throw ae.createUnexpectedError("Storage interface - setIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getIdTokenCredential=function(){throw ae.createUnexpectedError("Storage interface - getIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAccessTokenCredential=function(){throw ae.createUnexpectedError("Storage interface - setAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getAccessTokenCredential=function(){throw ae.createUnexpectedError("Storage interface - getAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setRefreshTokenCredential=function(){throw ae.createUnexpectedError("Storage interface - setRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getRefreshTokenCredential=function(){throw ae.createUnexpectedError("Storage interface - getRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAppMetadata=function(){throw ae.createUnexpectedError("Storage interface - setAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAppMetadata=function(){throw ae.createUnexpectedError("Storage interface - getAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.setServerTelemetry=function(){throw ae.createUnexpectedError("Storage interface - setServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.getServerTelemetry=function(){throw ae.createUnexpectedError("Storage interface - getServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.setAuthorityMetadata=function(){throw ae.createUnexpectedError("Storage interface - setAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadata=function(){throw ae.createUnexpectedError("Storage interface - getAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadataKeys=function(){throw ae.createUnexpectedError("Storage interface - getAuthorityMetadataKeys() has not been implemented for the cacheStorage interface.")},t.prototype.setThrottlingCache=function(){throw ae.createUnexpectedError("Storage interface - setThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.getThrottlingCache=function(){throw ae.createUnexpectedError("Storage interface - getThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.removeItem=function(){throw ae.createUnexpectedError("Storage interface - removeItem() has not been implemented for the cacheStorage interface.")},t.prototype.containsKey=function(){throw ae.createUnexpectedError("Storage interface - containsKey() has not been implemented for the cacheStorage interface.")},t.prototype.getKeys=function(){throw ae.createUnexpectedError("Storage interface - getKeys() has not been implemented for the cacheStorage interface.")},t.prototype.getAccountKeys=function(){throw ae.createUnexpectedError("Storage interface - getAccountKeys() has not been implemented for the cacheStorage interface.")},t.prototype.getTokenKeys=function(){throw ae.createUnexpectedError("Storage interface - getTokenKeys() has not been implemented for the cacheStorage interface.")},t.prototype.clear=function(){return v(this,void 0,void 0,function(){return y(this,function(e){throw ae.createUnexpectedError("Storage interface - clear() has not been implemented for the cacheStorage interface.")})})},t.prototype.updateCredentialCacheKey=function(){throw ae.createUnexpectedError("Storage interface - updateCredentialCacheKey() has not been implemented for the cacheStorage interface.")},t}(qn),zn=function(){function e(){}return e.nowSeconds=function(){return Math.round((new Date).getTime()/1e3)},e.isTokenExpired=function(t,r){var n=Number(t)||0;return e.nowSeconds()+r>n},e.wasClockTurnedBack=function(t){return Number(t)>e.nowSeconds()},e.delay=function(e,t){return new Promise(function(r){return setTimeout(function(){return r(t)},e)})},e}(),Kn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.createAccessTokenEntity=function(e,r,n,o,i,a,s,c,u,l,h,d,p,f,g){var m,v,y=new t;y.homeAccountId=e,y.credentialType=N.ACCESS_TOKEN,y.secret=n;var w=zn.nowSeconds();if(y.cachedAt=w.toString(),y.expiresOn=s.toString(),y.extendedExpiresOn=c.toString(),l&&(y.refreshOn=l.toString()),y.environment=r,y.clientId=o,y.realm=i,y.target=a,y.userAssertionHash=d,y.tokenType=at.isEmpty(h)?z.BEARER:h,f&&(y.requestedClaims=f,y.requestedClaimsHash=g),(null===(m=y.tokenType)||void 0===m?void 0:m.toLowerCase())!==z.BEARER.toLowerCase())switch(y.credentialType=N.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case z.POP:var _=Ln.extractTokenClaims(n,u);if(!(null===(v=null==_?void 0:_.cnf)||void 0===v?void 0:v.kid))throw it.createTokenClaimsRequiredError();y.keyId=_.cnf.kid;break;case z.SSH:y.keyId=p}return y},t.isAccessTokenEntity=function(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.hasOwnProperty("target")&&(e.credentialType===N.ACCESS_TOKEN||e.credentialType===N.ACCESS_TOKEN_WITH_AUTH_SCHEME))},t}(ln),jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.createRefreshTokenEntity=function(e,r,n,o,i,a){var s=new t;return s.clientId=o,s.credentialType=N.REFRESH_TOKEN,s.environment=r,s.homeAccountId=e,s.secret=n,s.userAssertionHash=a,i&&(s.familyId=i),s},t.isRefreshTokenEntity=function(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")&&e.credentialType===N.REFRESH_TOKEN)},t}(ln),Gn=function(){function e(){}return e.prototype.generateAppMetadataKey=function(){return e.generateAppMetadataCacheKey(this.environment,this.clientId)},e.generateAppMetadataCacheKey=function(e,t){return[B,e,t].join(x.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAppMetadataEntity=function(t,r,n){var o=new e;return o.clientId=t,o.environment=r,n&&(o.familyId=n),o},e.isAppMetadataEntity=function(e,t){return!!t&&(0===e.indexOf(B)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment"))},e}(),Yn=function(){function e(){this.failedRequests=[],this.errors=[],this.cacheHits=0}return e.isServerTelemetryEntity=function(e,t){var r=0===e.indexOf(K.CACHE_KEY),n=!0;return t&&(n=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),r&&n},e}(),Wn=function(){function e(){this.expiresAt=zn.nowSeconds()+F}return e.prototype.updateCloudDiscoveryMetadata=function(e,t){this.aliases=e.aliases,this.preferred_cache=e.preferred_cache,this.preferred_network=e.preferred_network,this.aliasesFromNetwork=t},e.prototype.updateEndpointMetadata=function(e,t){this.authorization_endpoint=e.authorization_endpoint,this.token_endpoint=e.token_endpoint,this.end_session_endpoint=e.end_session_endpoint,this.issuer=e.issuer,this.endpointsFromNetwork=t,this.jwks_uri=e.jwks_uri},e.prototype.updateCanonicalAuthority=function(e){this.canonical_authority=e},e.prototype.resetExpiresAt=function(){this.expiresAt=zn.nowSeconds()+F},e.prototype.isExpired=function(){return this.expiresAt<=zn.nowSeconds()},e.isAuthorityMetadataEntity=function(e,t){return!!t&&(0===e.indexOf(q)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri"))},e}(),Qn=function(){function e(){}return e.isThrottlingEntity=function(e,t){var r=!1;e&&(r=0===e.indexOf(Z));var n=!0;return t&&(n=t.hasOwnProperty("throttleTime")),r&&n},e}(),Vn=function(){function e(){}return e.setRequestState=function(t,r,n){var o=e.generateLibraryState(t,n);return at.isEmpty(r)?o:""+o+S.RESOURCE_DELIM+r},e.generateLibraryState=function(e,t){if(!e)throw it.createNoCryptoObjectError("generateLibraryState");var r={id:e.createNewGuid()};t&&(r.meta=t);var n=JSON.stringify(r);return e.base64Encode(n)},e.parseRequestState=function(e,t){if(!e)throw it.createNoCryptoObjectError("parseRequestState");if(at.isEmpty(t))throw it.createInvalidStateError(t,"Null, undefined or empty state");try{var r=t.split(S.RESOURCE_DELIM),n=r[0],o=r.length>1?r.slice(1).join(S.RESOURCE_DELIM):S.EMPTY_STRING,i=e.base64Decode(n),a=JSON.parse(i);return{userRequestState:at.isEmpty(o)?S.EMPTY_STRING:o,libraryState:a}}catch(e){throw it.createInvalidStateError(t,e)}},e}();!function(e){e.HOME_ACCOUNT_ID="home_account_id",e.UPN="UPN"}(nn||(nn={}));var Xn,Jn=function(e,t,r,n,o){this.account=e||null,this.idToken=t||null,this.accessToken=r||null,this.refreshToken=n||null,this.appMetadata=o||null},Zn=function(){function e(e){this.validateWindowStorage(e),this.windowStorage=window[e]}return e.prototype.validateWindowStorage=function(e){if(e!==lt.LocalStorage&&e!==lt.SessionStorage)throw Wr.createStorageNotSupportedError(e);if(!!!window[e])throw Wr.createStorageNotSupportedError(e)},e.prototype.getItem=function(e){return this.windowStorage.getItem(e)},e.prototype.setItem=function(e,t){this.windowStorage.setItem(e,t)},e.prototype.removeItem=function(e){this.windowStorage.removeItem(e)},e.prototype.getKeys=function(){return Object.keys(this.windowStorage)},e.prototype.containsKey=function(e){return this.windowStorage.hasOwnProperty(e)},e}(),$n=function(){function e(t){if(this._urlString=t,at.isEmpty(this._urlString))throw Dn.createUrlEmptyError();at.isEmpty(this.getHash())&&(this._urlString=e.canonicalizeUri(t))}return Object.defineProperty(e.prototype,"urlString",{get:function(){return this._urlString},enumerable:!1,configurable:!0}),e.canonicalizeUri=function(e){if(e){var t=e.toLowerCase();return at.endsWith(t,"?")?t=t.slice(0,-1):at.endsWith(t,"?/")&&(t=t.slice(0,-2)),at.endsWith(t,"/")||(t+="/"),t}return e},e.prototype.validateAsUri=function(){var e;try{e=this.getUrlComponents()}catch(e){throw Dn.createUrlParseError(e)}if(!e.HostNameAndPort||!e.PathSegments)throw Dn.createUrlParseError("Given url string: "+this.urlString);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Dn.createInsecureAuthorityUriError(this.urlString)},e.appendQueryString=function(e,t){return at.isEmpty(t)?e:e.indexOf("?")<0?e+"?"+t:e+"&"+t},e.removeHashFromUrl=function(t){return e.canonicalizeUri(t.split("#")[0])},e.prototype.replaceTenantPath=function(t){var r=this.getUrlComponents(),n=r.PathSegments;return!t||0===n.length||n[0]!==C.COMMON&&n[0]!==C.ORGANIZATIONS||(n[0]=t),e.constructAuthorityUriFromObject(r)},e.prototype.getHash=function(){return e.parseHash(this.urlString)},e.prototype.getUrlComponents=function(){var e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Dn.createUrlParseError("Given url string: "+this.urlString);var r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},n=r.AbsolutePath.split("/");return n=n.filter(function(e){return e&&e.length>0}),r.PathSegments=n,!at.isEmpty(r.QueryString)&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r},e.getDomainFromUrl=function(e){var t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw Dn.createUrlParseError("Given url string: "+e);return r[2]},e.getAbsoluteUrl=function(t,r){if(t[0]===S.FORWARD_SLASH){var n=new e(r).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+t}return t},e.parseHash=function(e){var t=e.indexOf("#"),r=e.indexOf("#/");return r>-1?e.substring(r+2):t>-1?e.substring(t+1):S.EMPTY_STRING},e.parseQueryString=function(e){var t=e.indexOf("?"),r=e.indexOf("/?");return r>-1?e.substring(r+2):t>-1?e.substring(t+1):S.EMPTY_STRING},e.constructAuthorityUriFromObject=function(t){return new e(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))},e.getDeserializedHash=function(t){if(at.isEmpty(t))return{};var r=e.parseHash(t),n=at.queryStringToObject(at.isEmpty(r)?t:r);if(!n)throw it.createHashNotDeserializedError(JSON.stringify(n));return n},e.getDeserializedQueryString=function(t){if(at.isEmpty(t))return{};var r=e.parseQueryString(t),n=at.queryStringToObject(at.isEmpty(r)?t:r);if(!n)throw it.createHashNotDeserializedError(JSON.stringify(n));return n},e.hashContainsKnownProperties=function(t){if(at.isEmpty(t)||t.indexOf("=")<0)return!1;var r=e.getDeserializedHash(t);return!!(r.code||r.error_description||r.error||r.state)},e}(),eo=function(){function e(){}return e.extractBrowserRequestState=function(e,t){if(at.isEmpty(t))return null;try{return Vn.parseRequestState(e,t).libraryState.meta}catch(e){throw it.createInvalidStateError(t,e)}},e.parseServerResponseFromHash=function(e){if(!e)return{};var t=new $n(e);return $n.getDeserializedHash(t.getHash())},e}(),to=function(e){function t(t,r,n,o){var i=e.call(this,t,n,o)||this;return i.COOKIE_LIFE_MULTIPLIER=864e5,i.cacheConfig=r,i.logger=o,i.internalStorage=new Zr,i.browserStorage=i.setupBrowserStorage(i.cacheConfig.cacheLocation),i.temporaryCacheStorage=i.setupTemporaryCacheStorage(i.cacheConfig.temporaryCacheLocation,i.cacheConfig.cacheLocation),r.cacheMigrationEnabled&&(i.migrateCacheEntries(),i.createKeyMaps()),i}return o(t,e),t.prototype.setupBrowserStorage=function(e){switch(e){case lt.LocalStorage:case lt.SessionStorage:try{return new Zn(e)}catch(e){this.logger.verbose(e);break}}return this.cacheConfig.cacheLocation=lt.MemoryStorage,new Zr},t.prototype.setupTemporaryCacheStorage=function(e,t){switch(t){case lt.LocalStorage:case lt.SessionStorage:try{return new Zn(e||lt.SessionStorage)}catch(e){return this.logger.verbose(e),this.internalStorage}case lt.MemoryStorage:default:return this.internalStorage}},t.prototype.migrateCacheEntries=function(){var e=this,t=S.CACHE_PREFIX+"."+b.ID_TOKEN,r=S.CACHE_PREFIX+"."+b.CLIENT_INFO,n=S.CACHE_PREFIX+"."+b.ERROR,o=S.CACHE_PREFIX+"."+b.ERROR_DESC,i=[this.browserStorage.getItem(t),this.browserStorage.getItem(r),this.browserStorage.getItem(n),this.browserStorage.getItem(o)];[b.ID_TOKEN,b.CLIENT_INFO,b.ERROR,b.ERROR_DESC].forEach(function(t,r){return e.migrateCacheEntry(t,i[r])})},t.prototype.migrateCacheEntry=function(e,t){t&&this.setTemporaryCache(e,t,!0)},t.prototype.createKeyMaps=function(){var e=this;this.logger.trace("BrowserCacheManager - createKeyMaps called.");var t=this.getItem(pt.ACCOUNT_KEYS),r=this.getItem(pt.TOKEN_KEYS+"."+this.clientId);t&&r?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach(function(t){var r;if(e.isCredentialKey(t)&&(r=e.getItem(t))){var n=e.validateAndParseJson(r);if(n&&n.hasOwnProperty("credentialType"))switch(n.credentialType){case N.ID_TOKEN:if(hn.isIdTokenEntity(n)){e.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - idToken with key: "+t+" found, saving key to token key map");var o=qn.toObject(new hn,n),i=e.updateCredentialCacheKey(t,o);return void e.addTokenKey(i,N.ID_TOKEN)}e.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),e.logger.tracePii("BrowserCacheManager:createKeyMaps - failed idToken validation on key: "+t);break;case N.ACCESS_TOKEN:case N.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(Kn.isAccessTokenEntity(n)){e.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - accessToken with key: "+t+" found, saving key to token key map");var a=qn.toObject(new Kn,n);i=e.updateCredentialCacheKey(t,a);return void e.addTokenKey(i,N.ACCESS_TOKEN)}e.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),e.logger.tracePii("BrowserCacheManager:createKeyMaps - failed accessToken validation on key: "+t);break;case N.REFRESH_TOKEN:if(jn.isRefreshTokenEntity(n)){e.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - refreshToken with key: "+t+" found, saving key to token key map");var s=qn.toObject(new jn,n);i=e.updateCredentialCacheKey(t,s);return void e.addTokenKey(i,N.REFRESH_TOKEN)}e.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),e.logger.tracePii("BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: "+t)}}if(e.isAccountKey(t)&&(r=e.getItem(t))){var c=e.validateAndParseJson(r);c&&yt.isAccountEntity(c)&&(e.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),e.logger.tracePii("BrowserCacheManager:createKeyMaps - account with key: "+t+" found, saving key to account key map"),e.addAccountKeyToMap(t))}})},t.prototype.validateAndParseJson=function(e){try{var t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch(e){return null}},t.prototype.getItem=function(e){return this.browserStorage.getItem(e)},t.prototype.setItem=function(e,t){this.browserStorage.setItem(e,t)},t.prototype.getAccount=function(e){this.logger.trace("BrowserCacheManager.getAccount called");var t=this.getItem(e);if(!t)return this.removeAccountKeyFromMap(e),null;var r=this.validateAndParseJson(t);return r&&yt.isAccountEntity(r)?qn.toObject(new yt,r):(this.removeAccountKeyFromMap(e),null)},t.prototype.setAccount=function(e){this.logger.trace("BrowserCacheManager.setAccount called");var t=e.generateAccountKey();this.setItem(t,JSON.stringify(e)),this.addAccountKeyToMap(t)},t.prototype.getAccountKeys=function(){this.logger.trace("BrowserCacheManager.getAccountKeys called");var e=this.getItem(pt.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])},t.prototype.addAccountKeyToMap=function(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: "+e);var t=this.getAccountKeys();-1===t.indexOf(e)?(t.push(e),this.setItem(pt.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")},t.prototype.removeAccountKeyFromMap=function(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: "+e);var t=this.getAccountKeys(),r=t.indexOf(e);r>-1?(t.splice(r,1),this.setItem(pt.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")},t.prototype.removeAccount=function(t){return u(this,void 0,void 0,function(){return l(this,function(r){return e.prototype.removeAccount.call(this,t),this.removeAccountKeyFromMap(t),[2]})})},t.prototype.removeIdToken=function(t){e.prototype.removeIdToken.call(this,t),this.removeTokenKey(t,N.ID_TOKEN)},t.prototype.removeAccessToken=function(t){return u(this,void 0,void 0,function(){return l(this,function(r){return e.prototype.removeAccessToken.call(this,t),this.removeTokenKey(t,N.ACCESS_TOKEN),[2]})})},t.prototype.removeRefreshToken=function(t){e.prototype.removeRefreshToken.call(this,t),this.removeTokenKey(t,N.REFRESH_TOKEN)},t.prototype.getTokenKeys=function(){this.logger.trace("BrowserCacheManager.getTokenKeys called");var e=this.getItem(pt.TOKEN_KEYS+"."+this.clientId);if(e){var t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}},t.prototype.addTokenKey=function(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");var r=this.getTokenKeys();switch(t){case N.ID_TOKEN:-1===r.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case N.ACCESS_TOKEN:-1===r.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case N.REFRESH_TOKEN:-1===r.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:this.logger.error("BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: "+t),it.createUnexpectedCredentialTypeError()}this.setItem(pt.TOKEN_KEYS+"."+this.clientId,JSON.stringify(r))},t.prototype.removeTokenKey=function(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");var r=this.getTokenKeys();switch(t){case N.ID_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: "+e+" from map");var n=r.idToken.indexOf(e);n>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(n,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case N.ACCESS_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: "+e+" from map");var o=r.accessToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case N.REFRESH_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: "+e+" from map");var i=r.refreshToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:this.logger.error("BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: "+t),it.createUnexpectedCredentialTypeError()}this.setItem(pt.TOKEN_KEYS+"."+this.clientId,JSON.stringify(r))},t.prototype.getIdTokenCredential=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,N.ID_TOKEN),null;var r=this.validateAndParseJson(t);return r&&hn.isIdTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),qn.toObject(new hn,r)):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,N.ID_TOKEN),null)},t.prototype.setIdTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,N.ID_TOKEN)},t.prototype.getAccessTokenCredential=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,N.ACCESS_TOKEN),null;var r=this.validateAndParseJson(t);return r&&Kn.isAccessTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),qn.toObject(new Kn,r)):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,N.ACCESS_TOKEN),null)},t.prototype.setAccessTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,N.ACCESS_TOKEN)},t.prototype.getRefreshTokenCredential=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,N.REFRESH_TOKEN),null;var r=this.validateAndParseJson(t);return r&&jn.isRefreshTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),qn.toObject(new jn,r)):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,N.REFRESH_TOKEN),null)},t.prototype.setRefreshTokenCredential=function(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");var t=e.generateCredentialKey();this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,N.REFRESH_TOKEN)},t.prototype.getAppMetadata=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;var r=this.validateAndParseJson(t);return r&&Gn.isAppMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),qn.toObject(new Gn,r)):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)},t.prototype.setAppMetadata=function(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");var t=e.generateAppMetadataKey();this.setItem(t,JSON.stringify(e))},t.prototype.getServerTelemetry=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;var r=this.validateAndParseJson(t);return r&&Yn.isServerTelemetryEntity(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),qn.toObject(new Yn,r)):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)},t.prototype.setServerTelemetry=function(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))},t.prototype.getAuthorityMetadata=function(e){var t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;var r=this.validateAndParseJson(t);return r&&Wn.isAuthorityMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),qn.toObject(new Wn,r)):null},t.prototype.getAuthorityMetadataKeys=function(){var e=this;return this.internalStorage.getKeys().filter(function(t){return e.isAuthorityMetadata(t)})},t.prototype.setWrapperMetadata=function(e,t){this.internalStorage.setItem(ft.WRAPPER_SKU,e),this.internalStorage.setItem(ft.WRAPPER_VER,t)},t.prototype.getWrapperMetadata=function(){return[this.internalStorage.getItem(ft.WRAPPER_SKU)||S.EMPTY_STRING,this.internalStorage.getItem(ft.WRAPPER_VER)||S.EMPTY_STRING]},t.prototype.setAuthorityMetadata=function(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))},t.prototype.getActiveAccount=function(){var e=this.generateCacheKey(b.ACTIVE_ACCOUNT_FILTERS),t=this.getItem(e);if(!t){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");var r=this.generateCacheKey(b.ACTIVE_ACCOUNT),n=this.getItem(r);if(!n)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;var o=this.getAccountInfoByFilter({localAccountId:n})[0]||null;return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(o),o):null}var i=this.validateAndParseJson(t);return i?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoByFilter({homeAccountId:i.homeAccountId,localAccountId:i.localAccountId})[0]||null):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)},t.prototype.setActiveAccount=function(e){var t=this.generateCacheKey(b.ACTIVE_ACCOUNT_FILTERS),r=this.generateCacheKey(b.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");var n={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId};this.browserStorage.setItem(t,JSON.stringify(n)),this.browserStorage.setItem(r,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t),this.browserStorage.removeItem(r)},t.prototype.getAccountInfoByFilter=function(e){var t=this.getAllAccounts();return this.logger.trace("BrowserCacheManager.getAccountInfoByFilter: total "+t.length+" accounts found"),t.filter(function(t){return(!e.username||e.username.toLowerCase()===t.username.toLowerCase())&&((!e.homeAccountId||e.homeAccountId===t.homeAccountId)&&((!e.localAccountId||e.localAccountId===t.localAccountId)&&((!e.tenantId||e.tenantId===t.tenantId)&&(!e.environment||e.environment===t.environment))))})},t.prototype.getAccountInfoByHints=function(e,t){var r=this.getAllAccounts().filter(function(r){if(t){var n=r.idTokenClaims&&r.idTokenClaims.sid;return t===n}return!!e&&e===r.username});if(1===r.length)return r[0];if(r.length>1)throw it.createMultipleMatchingAccountsInCacheError();return null},t.prototype.getThrottlingCache=function(e){var t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;var r=this.validateAndParseJson(t);return r&&Qn.isThrottlingEntity(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),qn.toObject(new Qn,r)):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)},t.prototype.setThrottlingCache=function(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))},t.prototype.getTemporaryCache=function(e,t){var r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){var n=this.getItemCookie(r);if(n)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),n}var o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===lt.LocalStorage){var i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o},t.prototype.setTemporaryCache=function(e,t,r){var n=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(n,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(n,t))},t.prototype.removeItem=function(e){this.browserStorage.removeItem(e),this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))},t.prototype.containsKey=function(e){return this.browserStorage.containsKey(e)||this.temporaryCacheStorage.containsKey(e)},t.prototype.getKeys=function(){return d(this.browserStorage.getKeys(),this.temporaryCacheStorage.getKeys())},t.prototype.clear=function(){return u(this,void 0,void 0,function(){var e=this;return l(this,function(t){switch(t.label){case 0:return[4,this.removeAllAccounts()];case 1:return t.sent(),this.removeAppMetadata(),this.getKeys().forEach(function(t){!e.browserStorage.containsKey(t)&&!e.temporaryCacheStorage.containsKey(t)||-1===t.indexOf(S.CACHE_PREFIX)&&-1===t.indexOf(e.clientId)||e.removeItem(t)}),this.internalStorage.clear(),[2]}})})},t.prototype.clearTokensAndKeysWithClaims=function(){return u(this,void 0,void 0,function(){var e,t,r=this;return l(this,function(n){switch(n.label){case 0:return this.logger.trace("BrowserCacheManager.clearTokensAndKeysWithClaims called"),e=this.getTokenKeys(),t=[],e.accessToken.forEach(function(e){var n=r.getAccessTokenCredential(e);(null==n?void 0:n.requestedClaimsHash)&&e.includes(n.requestedClaimsHash.toLowerCase())&&t.push(r.removeAccessToken(e))}),[4,Promise.all(t)];case 1:return n.sent(),t.length>0&&this.logger.warning(t.length+" access tokens with claims in the cache keys have been removed from the cache."),[2]}})})},t.prototype.setItemCookie=function(e,t,r){var n=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path=/;SameSite=Lax;";r&&(n+="expires="+this.getCookieExpirationTime(r)+";");this.cacheConfig.secureCookies&&(n+="Secure;"),document.cookie=n},t.prototype.getItemCookie=function(e){for(var t=encodeURIComponent(e)+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var o=r[n];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return decodeURIComponent(o.substring(t.length,o.length))}return S.EMPTY_STRING},t.prototype.clearMsalCookies=function(){var e=this,t=S.CACHE_PREFIX+"."+this.clientId;document.cookie.split(";").forEach(function(r){for(;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t)){var n=r.split("=")[0];e.clearItemCookie(n)}})},t.prototype.clearItemCookie=function(e){this.setItemCookie(e,S.EMPTY_STRING,-1)},t.prototype.getCookieExpirationTime=function(e){var t=new Date;return new Date(t.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()},t.prototype.getCache=function(){return this.browserStorage},t.prototype.setCache=function(){},t.prototype.generateCacheKey=function(e){return this.validateAndParseJson(e)?JSON.stringify(e):at.startsWith(e,S.CACHE_PREFIX)||at.startsWith(e,b.ADAL_ID_TOKEN)?e:S.CACHE_PREFIX+"."+this.clientId+"."+e},t.prototype.generateAuthorityKey=function(e){var t=Vn.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(dt.AUTHORITY+"."+t)},t.prototype.generateNonceKey=function(e){var t=Vn.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(dt.NONCE_IDTOKEN+"."+t)},t.prototype.generateStateKey=function(e){var t=Vn.parseRequestState(this.cryptoImpl,e).libraryState.id;return this.generateCacheKey(dt.REQUEST_STATE+"."+t)},t.prototype.getCachedAuthority=function(e){var t=this.generateStateKey(e),r=this.getTemporaryCache(t);if(!r)return null;var n=this.generateAuthorityKey(r);return this.getTemporaryCache(n)},t.prototype.updateCacheEntries=function(e,t,r,n,o){this.logger.trace("BrowserCacheManager.updateCacheEntries called");var i=this.generateStateKey(e);this.setTemporaryCache(i,e,!1);var a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);var s=this.generateAuthorityKey(e);if(this.setTemporaryCache(s,r,!1),o){var c={credential:o.homeAccountId,type:nn.HOME_ACCOUNT_ID};this.setTemporaryCache(dt.CCS_CREDENTIAL,JSON.stringify(c),!0)}else if(!at.isEmpty(n)){c={credential:n,type:nn.UPN};this.setTemporaryCache(dt.CCS_CREDENTIAL,JSON.stringify(c),!0)}},t.prototype.resetRequestCache=function(e){var t=this;this.logger.trace("BrowserCacheManager.resetRequestCache called"),at.isEmpty(e)||this.getKeys().forEach(function(r){-1!==r.indexOf(e)&&t.removeItem(r)}),e&&(this.removeItem(this.generateStateKey(e)),this.removeItem(this.generateNonceKey(e)),this.removeItem(this.generateAuthorityKey(e))),this.removeItem(this.generateCacheKey(dt.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(dt.ORIGIN_URI)),this.removeItem(this.generateCacheKey(dt.URL_HASH)),this.removeItem(this.generateCacheKey(dt.CORRELATION_ID)),this.removeItem(this.generateCacheKey(dt.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(dt.NATIVE_REQUEST)),this.setInteractionInProgress(!1)},t.prototype.cleanRequestByState=function(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){var t=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(t);this.logger.infoPii("BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: "+r),this.resetRequestCache(r||S.EMPTY_STRING)}this.clearMsalCookies()},t.prototype.cleanRequestByInteractionType=function(e){var t=this;this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach(function(r){if(-1!==r.indexOf(dt.REQUEST_STATE)){var n=t.temporaryCacheStorage.getItem(r);if(n){var o=eo.extractBrowserRequestState(t.cryptoImpl,n);o&&o.interactionType===e&&(t.logger.infoPii("BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: "+n),t.resetRequestCache(n))}}}),this.clearMsalCookies(),this.setInteractionInProgress(!1)},t.prototype.cacheCodeRequest=function(e,t){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");var r=t.base64Encode(JSON.stringify(e));this.setTemporaryCache(dt.REQUEST_PARAMS,r,!0)},t.prototype.getCachedRequest=function(e,t){this.logger.trace("BrowserCacheManager.getCachedRequest called");var r=this.getTemporaryCache(dt.REQUEST_PARAMS,!0);if(!r)throw Dr.createNoTokenRequestCacheError();var n=this.validateAndParseJson(t.base64Decode(r));if(!n)throw Dr.createUnableToParseTokenRequestCacheError();if(this.removeItem(this.generateCacheKey(dt.REQUEST_PARAMS)),at.isEmpty(n.authority)){var o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw Dr.createNoCachedAuthorityError();n.authority=i}return n},t.prototype.getCachedNativeRequest=function(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");var e=this.getTemporaryCache(dt.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;var t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)},t.prototype.isInteractionInProgress=function(e){var t=this.getInteractionInProgress();return e?t===this.clientId:!!t},t.prototype.getInteractionInProgress=function(){var e=S.CACHE_PREFIX+"."+dt.INTERACTION_STATUS_KEY;return this.getTemporaryCache(e,!1)},t.prototype.setInteractionInProgress=function(e){var t=S.CACHE_PREFIX+"."+dt.INTERACTION_STATUS_KEY;if(e){if(this.getInteractionInProgress())throw Dr.createInteractionInProgressError();this.setTemporaryCache(t,this.clientId,!1)}else e||this.getInteractionInProgress()!==this.clientId||this.removeItem(t)},t.prototype.getLegacyLoginHint=function(){var e=this.getTemporaryCache(b.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(b.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));var t=this.getTemporaryCache(b.ID_TOKEN,!0);t&&(this.removeItem(this.generateCacheKey(b.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));var r=t||e;if(r){var n=new Ln(r,this.cryptoImpl);if(n.claims&&n.claims.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),n.claims.preferred_username;if(n.claims&&n.claims.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),n.claims.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null},t.prototype.updateCredentialCacheKey=function(e,t){var r=t.generateCredentialKey();if(e!==r){var n=this.getItem(e);if(n)return this.removeItem(e),this.setItem(r,n),this.logger.verbose("Updated an outdated "+t.credentialType+" cache key"),r;this.logger.error("Attempted to update an outdated "+t.credentialType+" cache key but no item matching the outdated key was found in storage")}return e},t.prototype.getRedirectRequestContext=function(){return this.getTemporaryCache(dt.REDIRECT_CONTEXT,!0)},t.prototype.setRedirectRequestContext=function(e){this.setTemporaryCache(dt.REDIRECT_CONTEXT,e,!0)},t.prototype.hydrateCache=function(e,t){var r,n,o,i,a,s;return u(this,void 0,void 0,function(){var c,u,h,d;return l(this,function(l){switch(l.label){case 0:return c=hn.createIdTokenEntity((null===(r=e.account)||void 0===r?void 0:r.homeAccountId)||"",(null===(n=e.account)||void 0===n?void 0:n.environment)||"",e.idToken,this.clientId,e.tenantId),t.claims?[4,this.cryptoImpl.hashString(t.claims)]:[3,2];case 1:u=l.sent(),l.label=2;case 2:return h=Kn.createAccessTokenEntity((null===(o=e.account)||void 0===o?void 0:o.homeAccountId)||"",(null===(i=e.account)||void 0===i?void 0:i.environment)||"",e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),(null===(a=e.expiresOn)||void 0===a?void 0:a.getTime())||0,(null===(s=e.extExpiresOn)||void 0===s?void 0:s.getTime())||0,this.cryptoImpl,void 0,e.tokenType,void 0,t.sshKid,t.claims,u),d=new Jn(void 0,c,h),[2,this.saveCacheRecord(d)]}})})},t}(qn);!function(e){e[e.None=0]="None",e.AzurePublic="https://login.microsoftonline.com",e.AzurePpe="https://login.windows-ppe.net",e.AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureUsGovernment="https://login.microsoftonline.us"}(Xn||(Xn={}));var ro={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},no={loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:en.Info,correlationId:S.EMPTY_STRING},oo={claimsBasedCachingEnabled:!0},io={sendGetRequestAsync:function(){return v(this,void 0,void 0,function(){return y(this,function(e){throw ae.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented")})})},sendPostRequestAsync:function(){return v(this,void 0,void 0,function(){return y(this,function(e){throw ae.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented")})})}},ao={sku:S.SKU,version:Hn,cpu:S.EMPTY_STRING,os:S.EMPTY_STRING},so={clientSecret:S.EMPTY_STRING,clientAssertion:void 0},co={azureCloudInstance:Xn.None,tenant:""+S.DEFAULT_COMMON_TENANT},uo={application:{appName:"",appVersion:""}};var lo={sendGetRequestAsync:function(){return Promise.reject(ae.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented for the Network interface."))},sendPostRequestAsync:function(){return Promise.reject(ae.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented for the Network interface."))}},ho=function(){function e(){}return e.prototype.sendGetRequestAsync=function(e,t){return u(this,void 0,void 0,function(){var r,n,o;return l(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,fetch(e,{method:ht.GET,headers:this.getFetchHeaders(t)})];case 1:return r=i.sent(),[3,3];case 2:throw n=i.sent(),window.navigator.onLine?Dr.createGetRequestFailedError(n,e):Dr.createNoNetworkConnectivityError();case 3:return i.trys.push([3,5,,6]),o={headers:this.getHeaderDict(r.headers)},[4,r.json()];case 4:return[2,(o.body=i.sent(),o.status=r.status,o)];case 5:throw i.sent(),Dr.createFailedToParseNetworkResponseError(e);case 6:return[2]}})})},e.prototype.sendPostRequestAsync=function(e,t){return u(this,void 0,void 0,function(){var r,n,o,i;return l(this,function(a){switch(a.label){case 0:r=t&&t.body||S.EMPTY_STRING,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,fetch(e,{method:ht.POST,headers:this.getFetchHeaders(t),body:r})];case 2:return n=a.sent(),[3,4];case 3:throw o=a.sent(),window.navigator.onLine?Dr.createPostRequestFailedError(o,e):Dr.createNoNetworkConnectivityError();case 4:return a.trys.push([4,6,,7]),i={headers:this.getHeaderDict(n.headers)},[4,n.json()];case 5:return[2,(i.body=a.sent(),i.status=n.status,i)];case 6:throw a.sent(),Dr.createFailedToParseNetworkResponseError(e);case 7:return[2]}})})},e.prototype.getFetchHeaders=function(e){var t=new Headers;if(!e||!e.headers)return t;var r=e.headers;return Object.keys(r).forEach(function(e){t.append(e,r[e])}),t},e.prototype.getHeaderDict=function(e){var t={};return e.forEach(function(e,r){t[r]=e}),t},e}(),po=function(){function e(){}return e.prototype.sendGetRequestAsync=function(e,t){return u(this,void 0,void 0,function(){return l(this,function(r){return[2,this.sendRequestAsync(e,ht.GET,t)]})})},e.prototype.sendPostRequestAsync=function(e,t){return u(this,void 0,void 0,function(){return l(this,function(r){return[2,this.sendRequestAsync(e,ht.POST,t)]})})},e.prototype.sendRequestAsync=function(e,t,r){var n=this;return new Promise(function(o,i){var a=new XMLHttpRequest;if(a.open(t,e,!0),n.setXhrHeaders(a,r),a.onload=function(){(a.status<200||a.status>=300)&&(t===ht.POST?i(Dr.createPostRequestFailedError("Failed with status "+a.status,e)):i(Dr.createGetRequestFailedError("Failed with status "+a.status,e)));try{var r=JSON.parse(a.responseText),s={headers:n.getHeaderDict(a),body:r,status:a.status};o(s)}catch(t){i(Dr.createFailedToParseNetworkResponseError(e))}},a.onerror=function(){window.navigator.onLine?t===ht.POST?i(Dr.createPostRequestFailedError("Failed with status "+a.status,e)):i(Dr.createGetRequestFailedError("Failed with status "+a.status,e)):i(Dr.createNoNetworkConnectivityError())},t===ht.POST&&r&&r.body)a.send(r.body);else{if(t!==ht.GET)throw Dr.createHttpMethodNotImplementedError(t);a.send()}})},e.prototype.setXhrHeaders=function(e,t){if(t&&t.headers){var r=t.headers;Object.keys(r).forEach(function(t){e.setRequestHeader(t,r[t])})}},e.prototype.getHeaderDict=function(e){var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return t.forEach(function(e){var t=e.split(": "),n=t.shift(),o=t.join(": ");n&&o&&(r[n]=o)}),r},e}(),fo=function(){function e(){}return e.clearHash=function(e){e.location.hash=S.EMPTY_STRING,"function"==typeof e.history.replaceState&&e.history.replaceState(null,S.EMPTY_STRING,""+e.location.origin+e.location.pathname+e.location.search)},e.replaceHash=function(e){var t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):S.EMPTY_STRING},e.isInIframe=function(){return window.parent!==window},e.isInPopup=function(){return"undefined"!=typeof window&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(Ct+".")},e.getCurrentUri=function(){return window.location.href.split("?")[0].split("#")[0]},e.getHomepage=function(){var e=new $n(window.location.href).getUrlComponents();return e.Protocol+"//"+e.HostNameAndPort+"/"},e.getBrowserNetworkClient=function(){return window.fetch&&window.Headers?new ho:new po},e.blockReloadInHiddenIframes=function(){if($n.hashContainsKnownProperties(window.location.hash)&&e.isInIframe())throw Dr.createBlockReloadInHiddenIframeError()},e.blockRedirectInIframe=function(t,r){var n=e.isInIframe();if(t===mt.Redirect&&n&&!r)throw Dr.createRedirectInIframeError(n)},e.blockAcquireTokenInPopups=function(){if(e.isInPopup())throw Dr.createBlockAcquireTokenInPopupsError()},e.blockNonBrowserEnvironment=function(e){if(!e)throw Dr.createNonBrowserEnvironmentError()},e.blockNativeBrokerCalledBeforeInitialized=function(e,t){if(e&&!t)throw Dr.createNativeBrokerCalledBeforeInitialize()},e.detectIEOrEdge=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),r=e.indexOf("Trident/"),n=e.indexOf("Edge/");return t>0||r>0||n>0},e}(),go=function(){function e(){}return e.prototype.navigateInternal=function(t,r){return e.defaultNavigateWindow(t,r)},e.prototype.navigateExternal=function(t,r){return e.defaultNavigateWindow(t,r)},e.defaultNavigateWindow=function(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(function(e){setTimeout(function(){e(!0)},t.timeout)})},e}(),mo=6e3;var vo,yo="@azure/msal-browser",wo="2.39.0";!function(e){e.INITIALIZE_START="msal:initializeStart",e.INITIALIZE_END="msal:initializeEnd",e.ACCOUNT_ADDED="msal:accountAdded",e.ACCOUNT_REMOVED="msal:accountRemoved",e.LOGIN_START="msal:loginStart",e.LOGIN_SUCCESS="msal:loginSuccess",e.LOGIN_FAILURE="msal:loginFailure",e.ACQUIRE_TOKEN_START="msal:acquireTokenStart",e.ACQUIRE_TOKEN_SUCCESS="msal:acquireTokenSuccess",e.ACQUIRE_TOKEN_FAILURE="msal:acquireTokenFailure",e.ACQUIRE_TOKEN_NETWORK_START="msal:acquireTokenFromNetworkStart",e.SSO_SILENT_START="msal:ssoSilentStart",e.SSO_SILENT_SUCCESS="msal:ssoSilentSuccess",e.SSO_SILENT_FAILURE="msal:ssoSilentFailure",e.ACQUIRE_TOKEN_BY_CODE_START="msal:acquireTokenByCodeStart",e.ACQUIRE_TOKEN_BY_CODE_SUCCESS="msal:acquireTokenByCodeSuccess",e.ACQUIRE_TOKEN_BY_CODE_FAILURE="msal:acquireTokenByCodeFailure",e.HANDLE_REDIRECT_START="msal:handleRedirectStart",e.HANDLE_REDIRECT_END="msal:handleRedirectEnd",e.POPUP_OPENED="msal:popupOpened",e.LOGOUT_START="msal:logoutStart",e.LOGOUT_SUCCESS="msal:logoutSuccess",e.LOGOUT_FAILURE="msal:logoutFailure",e.LOGOUT_END="msal:logoutEnd",e.RESTORE_FROM_BFCACHE="msal:restoreFromBFCache"}(vo||(vo={}));var _o,bo=function(){function e(e,t){this.eventCallbacks=new Map,this.logger=e,this.browserCrypto=t,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}return e.prototype.addEventCallback=function(e){if("undefined"!=typeof window){var t=this.browserCrypto.createNewGuid();return this.eventCallbacks.set(t,e),this.logger.verbose("Event callback registered with id: "+t),t}return null},e.prototype.removeEventCallback=function(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback "+e+" removed.")},e.prototype.enableAccountStorageEvents=function(){"undefined"!=typeof window&&(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))},e.prototype.disableAccountStorageEvents=function(){"undefined"!=typeof window&&(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))},e.prototype.emitEvent=function(e,t,r,n){var o=this;if("undefined"!=typeof window){var i={eventType:e,interactionType:t||null,payload:r||null,error:n||null,timestamp:Date.now()};this.logger.info("Emitting event: "+e),this.eventCallbacks.forEach(function(t,r){o.logger.verbose("Emitting event to callback "+r+": "+e),t.apply(null,[i])})}},e.prototype.handleAccountCacheChange=function(e){try{var t=e.newValue||e.oldValue;if(!t)return;var r=JSON.parse(t);if("object"!=typeof r||!yt.isAccountEntity(r))return;var n=qn.toObject(new yt,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(vo.ACCOUNT_ADDED,void 0,n)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(vo.ACCOUNT_REMOVED,void 0,n))}catch(e){return}},e}(),Co=function(){function e(){}return e.generateThrottlingStorageKey=function(e){return Z+"."+JSON.stringify(e)},e.preProcess=function(t,r){var n,o=e.generateThrottlingStorageKey(r),i=t.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now())return void t.removeItem(o);throw new se((null===(n=i.errorCodes)||void 0===n?void 0:n.join(" "))||S.EMPTY_STRING,i.errorMessage,i.subError)}},e.postProcess=function(t,r,n){if(e.checkResponseStatus(n)||e.checkResponseForRetryAfter(n)){var o={throttleTime:e.calculateThrottleTime(parseInt(n.headers[_.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};t.setThrottlingCache(e.generateThrottlingStorageKey(r),o)}},e.checkResponseStatus=function(e){return 429===e.status||e.status>=500&&e.status<600},e.checkResponseForRetryAfter=function(e){return!!e.headers&&(e.headers.hasOwnProperty(_.RETRY_AFTER)&&(e.status<200||e.status>=300))},e.calculateThrottleTime=function(e){var t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(t||X),r+J))},e.removeThrottle=function(e,t,r,n){var o={clientId:t,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:n,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},i=this.generateThrottlingStorageKey(o);e.removeItem(i)},e}(),Eo=function(){function e(e,t){this.networkClient=e,this.cacheManager=t}return e.prototype.sendPostRequest=function(e,t,r){return v(this,void 0,void 0,function(){var n,o;return y(this,function(i){switch(i.label){case 0:Co.preProcess(this.cacheManager,e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.networkClient.sendPostRequestAsync(t,r)];case 2:return n=i.sent(),[3,4];case 3:throw(o=i.sent())instanceof ae?o:it.createNetworkError(t,o);case 4:return Co.postProcess(this.cacheManager,e,n),[2,n]}})})},e}(),To=function(){function e(){}return e.validateRedirectUri=function(e){if(at.isEmpty(e))throw Dn.createRedirectUriEmptyError()},e.validatePrompt=function(e){var t=[];for(var r in R)t.push(R[r]);if(t.indexOf(e)<0)throw Dn.createInvalidPromptError(e)},e.validateClaims=function(e){try{JSON.parse(e)}catch(e){throw Dn.createInvalidClaimsRequestError()}},e.validateCodeChallengeParams=function(e,t){if(at.isEmpty(e)||at.isEmpty(t))throw Dn.createInvalidCodeChallengeParamsError();this.validateCodeChallengeMethod(t)},e.validateCodeChallengeMethod=function(e){if([U.PLAIN,U.S256].indexOf(e)<0)throw Dn.createInvalidCodeChallengeMethodError()},e.sanitizeEQParams=function(e,t){return e?(t.forEach(function(t,r){e[r]&&delete e[r]}),Object.fromEntries(Object.entries(e).filter(function(e){return""!==e[1]}))):{}},e}(),So=function(){function e(){this.parameters=new Map}return e.prototype.addResponseTypeCode=function(){this.parameters.set(E.RESPONSE_TYPE,encodeURIComponent(S.CODE_RESPONSE_TYPE))},e.prototype.addResponseTypeForTokenAndIdToken=function(){this.parameters.set(E.RESPONSE_TYPE,encodeURIComponent(S.TOKEN_RESPONSE_TYPE+" "+S.ID_TOKEN_RESPONSE_TYPE))},e.prototype.addResponseMode=function(e){this.parameters.set(E.RESPONSE_MODE,encodeURIComponent(e||O.QUERY))},e.prototype.addNativeBroker=function(){this.parameters.set(E.NATIVE_BROKER,encodeURIComponent("1"))},e.prototype.addScopes=function(e,t){void 0===t&&(t=!0);var r=t?w(e||[],k):e||[],n=new Un(r);this.parameters.set(E.SCOPE,encodeURIComponent(n.printScopes()))},e.prototype.addClientId=function(e){this.parameters.set(E.CLIENT_ID,encodeURIComponent(e))},e.prototype.addRedirectUri=function(e){To.validateRedirectUri(e),this.parameters.set(E.REDIRECT_URI,encodeURIComponent(e))},e.prototype.addPostLogoutRedirectUri=function(e){To.validateRedirectUri(e),this.parameters.set(E.POST_LOGOUT_URI,encodeURIComponent(e))},e.prototype.addIdTokenHint=function(e){this.parameters.set(E.ID_TOKEN_HINT,encodeURIComponent(e))},e.prototype.addDomainHint=function(e){this.parameters.set(A.DOMAIN_HINT,encodeURIComponent(e))},e.prototype.addLoginHint=function(e){this.parameters.set(A.LOGIN_HINT,encodeURIComponent(e))},e.prototype.addCcsUpn=function(e){this.parameters.set(_.CCS_HEADER,encodeURIComponent("UPN:"+e))},e.prototype.addCcsOid=function(e){this.parameters.set(_.CCS_HEADER,encodeURIComponent("Oid:"+e.uid+"@"+e.utid))},e.prototype.addSid=function(e){this.parameters.set(A.SID,encodeURIComponent(e))},e.prototype.addClaims=function(e,t){var r=this.addClientCapabilitiesToClaims(e,t);To.validateClaims(r),this.parameters.set(E.CLAIMS,encodeURIComponent(r))},e.prototype.addCorrelationId=function(e){this.parameters.set(E.CLIENT_REQUEST_ID,encodeURIComponent(e))},e.prototype.addLibraryInfo=function(e){this.parameters.set(E.X_CLIENT_SKU,e.sku),this.parameters.set(E.X_CLIENT_VER,e.version),e.os&&this.parameters.set(E.X_CLIENT_OS,e.os),e.cpu&&this.parameters.set(E.X_CLIENT_CPU,e.cpu)},e.prototype.addApplicationTelemetry=function(e){(null==e?void 0:e.appName)&&this.parameters.set(E.X_APP_NAME,e.appName),(null==e?void 0:e.appVersion)&&this.parameters.set(E.X_APP_VER,e.appVersion)},e.prototype.addPrompt=function(e){To.validatePrompt(e),this.parameters.set(""+E.PROMPT,encodeURIComponent(e))},e.prototype.addState=function(e){at.isEmpty(e)||this.parameters.set(E.STATE,encodeURIComponent(e))},e.prototype.addNonce=function(e){this.parameters.set(E.NONCE,encodeURIComponent(e))},e.prototype.addCodeChallengeParams=function(e,t){if(To.validateCodeChallengeParams(e,t),!e||!t)throw Dn.createInvalidCodeChallengeParamsError();this.parameters.set(E.CODE_CHALLENGE,encodeURIComponent(e)),this.parameters.set(E.CODE_CHALLENGE_METHOD,encodeURIComponent(t))},e.prototype.addAuthorizationCode=function(e){this.parameters.set(E.CODE,encodeURIComponent(e))},e.prototype.addDeviceCode=function(e){this.parameters.set(E.DEVICE_CODE,encodeURIComponent(e))},e.prototype.addRefreshToken=function(e){this.parameters.set(E.REFRESH_TOKEN,encodeURIComponent(e))},e.prototype.addCodeVerifier=function(e){this.parameters.set(E.CODE_VERIFIER,encodeURIComponent(e))},e.prototype.addClientSecret=function(e){this.parameters.set(E.CLIENT_SECRET,encodeURIComponent(e))},e.prototype.addClientAssertion=function(e){at.isEmpty(e)||this.parameters.set(E.CLIENT_ASSERTION,encodeURIComponent(e))},e.prototype.addClientAssertionType=function(e){at.isEmpty(e)||this.parameters.set(E.CLIENT_ASSERTION_TYPE,encodeURIComponent(e))},e.prototype.addOboAssertion=function(e){this.parameters.set(E.OBO_ASSERTION,encodeURIComponent(e))},e.prototype.addRequestTokenUse=function(e){this.parameters.set(E.REQUESTED_TOKEN_USE,encodeURIComponent(e))},e.prototype.addGrantType=function(e){this.parameters.set(E.GRANT_TYPE,encodeURIComponent(e))},e.prototype.addClientInfo=function(){this.parameters.set("client_info","1")},e.prototype.addExtraQueryParameters=function(e){var t=this,r=To.sanitizeEQParams(e,this.parameters);Object.keys(r).forEach(function(r){t.parameters.set(r,e[r])})},e.prototype.addClientCapabilitiesToClaims=function(e,t){var r;if(e)try{r=JSON.parse(e)}catch(e){throw Dn.createInvalidClaimsRequestError()}else r={};return t&&t.length>0&&(r.hasOwnProperty(T.ACCESS_TOKEN)||(r[T.ACCESS_TOKEN]={}),r[T.ACCESS_TOKEN][T.XMS_CC]={values:t}),JSON.stringify(r)},e.prototype.addUsername=function(e){this.parameters.set(j.username,encodeURIComponent(e))},e.prototype.addPassword=function(e){this.parameters.set(j.password,encodeURIComponent(e))},e.prototype.addPopToken=function(e){at.isEmpty(e)||(this.parameters.set(E.TOKEN_TYPE,z.POP),this.parameters.set(E.REQ_CNF,encodeURIComponent(e)))},e.prototype.addSshJwk=function(e){at.isEmpty(e)||(this.parameters.set(E.TOKEN_TYPE,z.SSH),this.parameters.set(E.REQ_CNF,encodeURIComponent(e)))},e.prototype.addServerTelemetry=function(e){this.parameters.set(E.X_CLIENT_CURR_TELEM,e.generateCurrentRequestHeaderValue()),this.parameters.set(E.X_CLIENT_LAST_TELEM,e.generateLastRequestHeaderValue())},e.prototype.addThrottling=function(){this.parameters.set(E.X_MS_LIB_CAPABILITY,$)},e.prototype.addLogoutHint=function(e){this.parameters.set(E.LOGOUT_HINT,encodeURIComponent(e))},e.prototype.createQueryString=function(){var e=new Array;return this.parameters.forEach(function(t,r){e.push(r+"="+t)}),e.join("&")},e}(),ko=function(){function e(e,t){var r,n,o,i,a,s,c,u,l,h,d,p,f,g,v,y;this.config=(o=(r=e).authOptions,i=r.systemOptions,a=r.loggerOptions,s=r.cacheOptions,c=r.storageInterface,u=r.networkInterface,l=r.cryptoInterface,h=r.clientCredentials,d=r.libraryInfo,p=r.telemetry,f=r.serverTelemetryManager,g=r.persistencePlugin,v=r.serializableCache,y=m(m({},no),a),{authOptions:(n=o,m({clientCapabilities:[],azureCloudOptions:co,skipAuthorityMetadataCache:!1},n)),systemOptions:m(m({},ro),i),loggerOptions:y,cacheOptions:m(m({},oo),s),storageInterface:c||new Fn(o.clientId,un,new on(y)),networkInterface:u||io,cryptoInterface:l||un,clientCredentials:h||so,libraryInfo:m(m({},ao),d),telemetry:m(m({},uo),p),serverTelemetryManager:f||null,persistencePlugin:g||null,serializableCache:v||null}),this.logger=new on(this.config.loggerOptions,Bn,Hn),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new Eo(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}return e.prototype.createTokenRequestHeaders=function(e){var t={};if(t[_.CONTENT_TYPE]=S.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case nn.HOME_ACCOUNT_ID:try{var r=ct(e.credential);t[_.CCS_HEADER]="Oid:"+r.uid+"@"+r.utid}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case nn.UPN:t[_.CCS_HEADER]="UPN: "+e.credential}return t},e.prototype.executePostToTokenEndpoint=function(e,t,r,n){return v(this,void 0,void 0,function(){var o;return y(this,function(i){switch(i.label){case 0:return[4,this.networkManager.sendPostRequest(n,e,{body:t,headers:r})];case 1:return o=i.sent(),this.config.serverTelemetryManager&&o.status<500&&429!==o.status&&this.config.serverTelemetryManager.clearTelemetryCache(),[2,o]}})})},e.prototype.updateAuthority=function(e){if(!e.discoveryComplete())throw it.createEndpointDiscoveryIncompleteError("Updated authority has not completed endpoint discovery.");this.authority=e},e.prototype.createTokenQueryParameters=function(e){var t=new So;return e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.createQueryString()},e}();!function(e){e.SW="sw",e.UHW="uhw"}(_o||(_o={}));var Io=function(){function e(e,t){this.cryptoUtils=e,this.performanceClient=t}return e.prototype.generateCnf=function(e){var t,r;return v(this,void 0,void 0,function(){var n,o,a;return y(this,function(s){switch(s.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.PopTokenGenerateCnf,e.correlationId),null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(i.PopTokenGenerateKid,e.correlationId),[4,this.generateKid(e)];case 1:return n=s.sent(),o=this.cryptoUtils.base64Encode(JSON.stringify(n)),a={kid:n.kid,reqCnfString:o},[4,this.cryptoUtils.hashString(o)];case 2:return[2,(a.reqCnfHash=s.sent(),a)]}})})},e.prototype.generateKid=function(e){var t;return v(this,void 0,void 0,function(){return y(this,function(r){switch(r.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.PopTokenGenerateKid,e.correlationId),[4,this.cryptoUtils.getPublicKeyThumbprint(e)];case 1:return[2,{kid:r.sent(),xms_ksl:_o.SW}]}})})},e.prototype.signPopToken=function(e,t,r){return v(this,void 0,void 0,function(){return y(this,function(n){return[2,this.signPayload(e,t,r)]})})},e.prototype.signPayload=function(e,t,r,n){return v(this,void 0,void 0,function(){var o,i,a,s,c,u;return y(this,function(l){switch(l.label){case 0:return o=r.resourceRequestMethod,i=r.resourceRequestUri,a=r.shrClaims,s=r.shrNonce,c=i?new $n(i):void 0,u=null==c?void 0:c.getUrlComponents(),[4,this.cryptoUtils.signJwt(m({at:e,ts:zn.nowSeconds(),m:null==o?void 0:o.toUpperCase(),u:null==u?void 0:u.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:null==u?void 0:u.AbsolutePath,q:(null==u?void 0:u.QueryString)?[[],u.QueryString]:void 0,client_claims:a||void 0},n),t,r.correlationId)];case 1:return[2,l.sent()]}})})},e}(),Ao=function(){function e(e,t){this.cache=e,this.hasChanged=t}return Object.defineProperty(e.prototype,"cacheHasChanged",{get:function(){return this.hasChanged},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenCache",{get:function(){return this.cache},enumerable:!1,configurable:!0}),e}(),Ro=function(){function e(e,t,r,n,o,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=n,this.serializableCache=o,this.persistencePlugin=i,this.performanceClient=a}return e.prototype.validateServerAuthorizationCodeResponse=function(e,t,r){if(!e.state||!t)throw e.state?it.createStateNotFoundError("Cached State"):it.createStateNotFoundError("Server State");if(decodeURIComponent(e.state)!==decodeURIComponent(t))throw it.createStateMismatchError();if(e.error||e.error_description||e.suberror){if(de.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new de(e.error||S.EMPTY_STRING,e.error_description,e.suberror,e.timestamp||S.EMPTY_STRING,e.trace_id||S.EMPTY_STRING,e.correlation_id||S.EMPTY_STRING,e.claims||S.EMPTY_STRING);throw new se(e.error||S.EMPTY_STRING,e.error_description,e.suberror)}e.client_info&&st(e.client_info,r)},e.prototype.validateTokenResponse=function(e){if(e.error||e.error_description||e.suberror){if(de.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new de(e.error,e.error_description,e.suberror,e.timestamp||S.EMPTY_STRING,e.trace_id||S.EMPTY_STRING,e.correlation_id||S.EMPTY_STRING,e.claims||S.EMPTY_STRING);var t=e.error_codes+" - ["+e.timestamp+"]: "+e.error_description+" - Correlation ID: "+e.correlation_id+" - Trace ID: "+e.trace_id;throw new se(e.error,t,e.suberror)}},e.prototype.handleServerTokenResponse=function(t,r,n,o,a,s,c,u,l){var h;return v(this,void 0,void 0,function(){var d,p,f,g,m,v;return y(this,function(y){switch(y.label){case 0:if(null===(h=this.performanceClient)||void 0===h||h.addQueueMeasurement(i.HandleServerTokenResponse,t.correlation_id),t.id_token){if(d=new Ln(t.id_token||S.EMPTY_STRING,this.cryptoObj),a&&!at.isEmpty(a.nonce)&&d.claims.nonce!==a.nonce)throw it.createNonceMismatchError();if(o.maxAge||0===o.maxAge){if(!(p=d.claims.auth_time))throw it.createAuthTimeNotFoundError();Ln.checkMaxAge(p,o.maxAge)}}this.homeAccountIdentifier=yt.generateHomeAccountId(t.client_info||S.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,null==d?void 0:d.claims),a&&a.state&&(f=Vn.parseRequestState(this.cryptoObj,a.state)),t.key_id=t.key_id||o.sshKid||void 0,g=this.generateCacheRecord(t,r,n,o,d,s,a),y.label=1;case 1:return y.trys.push([1,,5,8]),this.persistencePlugin&&this.serializableCache?(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),m=new Ao(this.serializableCache,!0),[4,this.persistencePlugin.beforeCacheAccess(m)]):[3,3];case 2:y.sent(),y.label=3;case 3:return!c||u||!g.account||(v=g.account.generateAccountKey(),this.cacheStorage.getAccount(v))?[4,this.cacheStorage.saveCacheRecord(g)]:(this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),[2,e.generateAuthenticationResult(this.cryptoObj,r,g,!1,o,d,f,void 0,l)]);case 4:return y.sent(),[3,8];case 5:return this.persistencePlugin&&this.serializableCache&&m?(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),[4,this.persistencePlugin.afterCacheAccess(m)]):[3,7];case 6:y.sent(),y.label=7;case 7:return[7];case 8:return[2,e.generateAuthenticationResult(this.cryptoObj,r,g,!1,o,d,f,t,l)]}})})},e.prototype.generateCacheRecord=function(e,t,r,n,o,i,a){var s,c,u=t.getPreferredCache();if(at.isEmpty(u))throw it.createInvalidCacheEnvironmentError();!at.isEmpty(e.id_token)&&o&&(s=hn.createIdTokenEntity(this.homeAccountIdentifier,u,e.id_token||S.EMPTY_STRING,this.clientId,o.claims.tid||S.EMPTY_STRING),c=yt.createAccount({homeAccountId:this.homeAccountIdentifier,idTokenClaims:o.claims,clientInfo:e.client_info||S.EMPTY_STRING,cloudGraphHostName:null==a?void 0:a.cloud_graph_host_name,msGraphHost:null==a?void 0:a.msgraph_host},t));var l=null;if(!at.isEmpty(e.access_token)){var h=e.scope?Un.fromString(e.scope):new Un(n.scopes||[]),d=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,p=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,f=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,g=r+d,m=g+p,v=f&&f>0?r+f:void 0;l=Kn.createAccessTokenEntity(this.homeAccountIdentifier,u,e.access_token||S.EMPTY_STRING,this.clientId,o?o.claims.tid||S.EMPTY_STRING:t.tenant,h.printScopes(),g,m,this.cryptoObj,v,e.token_type,i,e.key_id,n.claims,n.requestedClaimsHash)}var y=null;at.isEmpty(e.refresh_token)||(y=jn.createRefreshTokenEntity(this.homeAccountIdentifier,u,e.refresh_token||S.EMPTY_STRING,this.clientId,e.foci,i));var w=null;return at.isEmpty(e.foci)||(w=Gn.createAppMetadataEntity(this.clientId,u,e.foci)),new Jn(c,s,l,y,w)},e.generateAuthenticationResult=function(e,t,r,n,o,i,a,s,c){var u,l,h;return v(this,void 0,void 0,function(){var d,p,f,g,m,v,w,_,b,C,E;return y(this,function(y){switch(y.label){case 0:if(d=S.EMPTY_STRING,p=[],f=null,m=S.EMPTY_STRING,!r.accessToken)return[3,4];if(r.accessToken.tokenType!==z.POP)return[3,2];if(v=new Io(e),w=r.accessToken,_=w.secret,!(b=w.keyId))throw it.createKeyIdMissingError();return[4,v.signPopToken(_,b,o)];case 1:return d=y.sent(),[3,3];case 2:d=r.accessToken.secret,y.label=3;case 3:p=Un.fromString(r.accessToken.target).asArray(),f=new Date(1e3*Number(r.accessToken.expiresOn)),g=new Date(1e3*Number(r.accessToken.extendedExpiresOn)),y.label=4;case 4:return r.appMetadata&&(m=r.appMetadata.familyId===H?H:S.EMPTY_STRING),C=(null==i?void 0:i.claims.oid)||(null==i?void 0:i.claims.sub)||S.EMPTY_STRING,E=(null==i?void 0:i.claims.tid)||S.EMPTY_STRING,(null==s?void 0:s.spa_accountid)&&r.account&&(r.account.nativeAccountId=null==s?void 0:s.spa_accountid),[2,{authority:t.canonicalAuthority,uniqueId:C,tenantId:E,scopes:p,account:r.account?r.account.getAccountInfo():null,idToken:i?i.rawToken:S.EMPTY_STRING,idTokenClaims:i?i.claims:{},accessToken:d,fromCache:n,expiresOn:f,correlationId:o.correlationId,requestId:c||S.EMPTY_STRING,extExpiresOn:g,familyId:m,tokenType:(null===(u=r.accessToken)||void 0===u?void 0:u.tokenType)||S.EMPTY_STRING,state:a?a.userRequestState:S.EMPTY_STRING,cloudGraphHostName:(null===(l=r.account)||void 0===l?void 0:l.cloudGraphHostName)||S.EMPTY_STRING,msGraphHost:(null===(h=r.account)||void 0===h?void 0:h.msGraphHost)||S.EMPTY_STRING,code:null==s?void 0:s.spa_code,fromNativeBroker:!1}]}})})},e}(),Oo=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.includeRedirectUri=!0,n}return g(t,e),t.prototype.getAuthCodeUrl=function(e){var t,r;return v(this,void 0,void 0,function(){var n;return y(this,function(o){switch(o.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.GetAuthCodeUrl,e.correlationId),null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(i.AuthClientCreateQueryString,e.correlationId),[4,this.createAuthCodeUrlQueryString(e)];case 1:return n=o.sent(),[2,$n.appendQueryString(this.authority.authorizationEndpoint,n)]}})})},t.prototype.acquireToken=function(e,t){var r,n,o,a,s,c;return v(this,void 0,void 0,function(){var u,l,h,d,p,f,g=this;return y(this,function(m){switch(m.label){case 0:if(!e||!e.code)throw it.createTokenRequestCannotBeMadeError();return null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(i.AuthClientAcquireToken,e.correlationId),u=null===(n=this.performanceClient)||void 0===n?void 0:n.startMeasurement("AuthCodeClientAcquireToken",e.correlationId),this.logger.info("in acquireToken call in auth-code client"),l=zn.nowSeconds(),null===(o=this.performanceClient)||void 0===o||o.setPreQueueTime(i.AuthClientExecuteTokenRequest,e.correlationId),[4,this.executeTokenRequest(this.authority,e)];case 1:return h=m.sent(),d=null===(a=h.headers)||void 0===a?void 0:a[_.X_MS_REQUEST_ID],(p=null===(s=h.headers)||void 0===s?void 0:s[_.X_MS_HTTP_VERSION])&&(null==u||u.addStaticFields({httpVerAuthority:p})),(f=new Ro(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient)).validateTokenResponse(h.body),null===(c=this.performanceClient)||void 0===c||c.setPreQueueTime(i.HandleServerTokenResponse,e.correlationId),[2,f.handleServerTokenResponse(h.body,this.authority,l,e,t,void 0,void 0,void 0,d).then(function(e){return null==u||u.endMeasurement({success:!0}),e}).catch(function(t){throw g.logger.verbose("Error in fetching token in ACC",e.correlationId),null==u||u.endMeasurement({errorCode:t.errorCode,subErrorCode:t.subError,success:!1}),t})]}})})},t.prototype.handleFragmentResponse=function(e,t){var r=new Ro(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null),n=new $n(e),o=$n.getDeserializedHash(n.getHash());if(r.validateServerAuthorizationCodeResponse(o,t,this.cryptoUtils),!o.code)throw it.createNoAuthCodeInServerResponseError();return m(m({},o),{code:o.code})},t.prototype.getLogoutUri=function(e){if(!e)throw Dn.createEmptyLogoutRequestError();var t=this.createLogoutUrlQueryString(e);return $n.appendQueryString(this.authority.endSessionEndpoint,t)},t.prototype.executeTokenRequest=function(e,t){var r,n;return v(this,void 0,void 0,function(){var o,a,s,c,u,l,h;return y(this,function(d){switch(d.label){case 0:return null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(i.AuthClientExecuteTokenRequest,t.correlationId),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(i.AuthClientCreateTokenRequestBody,t.correlationId),o=this.createTokenQueryParameters(t),a=$n.appendQueryString(e.tokenEndpoint,o),[4,this.createTokenRequestBody(t)];case 1:if(s=d.sent(),c=void 0,t.clientInfo)try{u=st(t.clientInfo,this.cryptoUtils),c={credential:""+u.uid+x.CLIENT_INFO_SEPARATOR+u.utid,type:nn.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}return l=this.createTokenRequestHeaders(c||t.ccsCredential),h={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid},[2,this.executePostToTokenEndpoint(a,s,l,h)]}})})},t.prototype.createTokenRequestBody=function(e){var t,r;return v(this,void 0,void 0,function(){var n,o,a,s,c,u,l,h;return y(this,function(d){switch(d.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.AuthClientCreateTokenRequestBody,e.correlationId),(n=new So).addClientId(this.config.authOptions.clientId),this.includeRedirectUri?n.addRedirectUri(e.redirectUri):To.validateRedirectUri(e.redirectUri),n.addScopes(e.scopes),n.addAuthorizationCode(e.code),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&n.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(o=this.config.clientCredentials.clientAssertion,n.addClientAssertion(o.assertion),n.addClientAssertionType(o.assertionType)),n.addGrantType(P.AUTHORIZATION_CODE_GRANT),n.addClientInfo(),e.authenticationScheme!==z.POP?[3,2]:(a=new Io(this.cryptoUtils,this.performanceClient),null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(i.PopTokenGenerateCnf,e.correlationId),[4,a.generateCnf(e)]);case 1:return s=d.sent(),n.addPopToken(s.reqCnfString),[3,3];case 2:if(e.authenticationScheme===z.SSH){if(!e.sshJwk)throw Dn.createMissingSshJwkError();n.addSshJwk(e.sshJwk)}d.label=3;case 3:if(c=e.correlationId||this.config.cryptoInterface.createNewGuid(),n.addCorrelationId(c),(!at.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),u=void 0,e.clientInfo)try{l=st(e.clientInfo,this.cryptoUtils),u={credential:""+l.uid+x.CLIENT_INFO_SEPARATOR+l.utid,type:nn.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else u=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&u)switch(u.type){case nn.HOME_ACCOUNT_ID:try{l=ct(u.credential),n.addCcsOid(l)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case nn.UPN:n.addCcsUpn(u.credential)}return e.tokenBodyParameters&&n.addExtraQueryParameters(e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[E.RETURN_SPA_CODE]||n.addExtraQueryParameters(((h={})[E.RETURN_SPA_CODE]="1",h)),[2,n.createQueryString()]}})})},t.prototype.createAuthCodeUrlQueryString=function(e){var t;return v(this,void 0,void 0,function(){var r,n,o,a,s,c,u;return y(this,function(l){switch(l.label){case 0:if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.AuthClientCreateQueryString,e.correlationId),(r=new So).addClientId(this.config.authOptions.clientId),n=w(e.scopes||[],e.extraScopesToConsent||[]),r.addScopes(n),r.addRedirectUri(e.redirectUri),o=e.correlationId||this.config.cryptoInterface.createNewGuid(),r.addCorrelationId(o),r.addResponseMode(e.responseMode),r.addResponseTypeCode(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&r.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&r.addPrompt(e.prompt),e.domainHint&&r.addDomainHint(e.domainHint),e.prompt!==R.SELECT_ACCOUNT)if(e.sid&&e.prompt===R.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),r.addSid(e.sid);else if(e.account){if(a=this.extractAccountSid(e.account),s=this.extractLoginHint(e.account)){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),r.addLoginHint(s);try{c=ct(e.account.homeAccountId),r.addCcsOid(c)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===R.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),r.addSid(a);try{c=ct(e.account.homeAccountId),r.addCcsOid(c)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),r.addLoginHint(e.account.username);try{c=ct(e.account.homeAccountId),r.addCcsOid(c)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&r.addNonce(e.nonce),e.state&&r.addState(e.state),(!at.isEmpty(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&r.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker?(r.addNativeBroker(),e.authenticationScheme!==z.POP?[3,2]:[4,new Io(this.cryptoUtils).generateCnf(e)]):[3,2];case 1:u=l.sent(),r.addPopToken(u.reqCnfString),l.label=2;case 2:return[2,r.createQueryString()]}})})},t.prototype.createLogoutUrlQueryString=function(e){var t=new So;return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()},t.prototype.extractAccountSid=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.sid)||null},t.prototype.extractLoginHint=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.login_hint)||null},t}(ko);function Po(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}var Mo={"https://login.microsoftonline.com/common/":{token_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/common/":{token_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/common/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/common/":{token_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/consumers/":{token_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/consumers/":{token_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/consumers/":{token_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/organizations/":{token_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/organizations/":{token_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/organizations/":{token_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"}},xo={"https://login.microsoftonline.com/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/common/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/consumers/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/organizations/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}};var No,Do=function(){function e(e,t,r){this.networkInterface=e,this.performanceClient=t,this.correlationId=r}return e.prototype.detectRegion=function(t,r){var n,o,a,s;return v(this,void 0,void 0,function(){var c,u,l,h,d;return y(this,function(p){switch(p.label){case 0:if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(i.RegionDiscoveryDetectRegion,this.correlationId),c=t)return[3,8];u=e.IMDS_OPTIONS,p.label=1;case 1:return p.trys.push([1,6,,7]),null===(o=this.performanceClient)||void 0===o||o.setPreQueueTime(i.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[4,this.getRegionFromIMDS(S.IMDS_VERSION,u)];case 2:return(l=p.sent()).status===G.httpSuccess&&(c=l.body,r.region_source=Y.IMDS),l.status!==G.httpBadRequest?[3,5]:(null===(a=this.performanceClient)||void 0===a||a.setPreQueueTime(i.RegionDiscoveryGetCurrentVersion,this.correlationId),[4,this.getCurrentVersion(u)]);case 3:return(h=p.sent())?(null===(s=this.performanceClient)||void 0===s||s.setPreQueueTime(i.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[4,this.getRegionFromIMDS(h,u)]):(r.region_source=Y.FAILED_AUTO_DETECTION,[2,null]);case 4:(d=p.sent()).status===G.httpSuccess&&(c=d.body,r.region_source=Y.IMDS),p.label=5;case 5:return[3,7];case 6:return p.sent(),r.region_source=Y.FAILED_AUTO_DETECTION,[2,null];case 7:return[3,9];case 8:r.region_source=Y.ENVIRONMENT_VARIABLE,p.label=9;case 9:return c||(r.region_source=Y.FAILED_AUTO_DETECTION),[2,c||null]}})})},e.prototype.getRegionFromIMDS=function(e,t){var r;return v(this,void 0,void 0,function(){return y(this,function(n){return null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(i.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[2,this.networkInterface.sendGetRequestAsync(S.IMDS_ENDPOINT+"?api-version="+e+"&format=text",t,S.IMDS_TIMEOUT)]})})},e.prototype.getCurrentVersion=function(e){var t;return v(this,void 0,void 0,function(){var r;return y(this,function(n){switch(n.label){case 0:null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.RegionDiscoveryGetCurrentVersion,this.correlationId),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(S.IMDS_ENDPOINT+"?format=json",e)];case 2:return(r=n.sent()).status===G.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?[2,r.body["newest-versions"][0]]:[2,null];case 3:return n.sent(),[2,null];case 4:return[2]}})})},e.IMDS_OPTIONS={headers:{Metadata:"true"}},e}(),Uo=function(){function e(e,t,r,n,o,i,a){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=n,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=i,this.correlationId=a,this.regionDiscovery=new Do(t,this.performanceClient,this.correlationId)}return e.prototype.getAuthorityType=function(e){if(e.HostNameAndPort.endsWith(S.CIAM_AUTH_URL))return re.Ciam;var t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case S.ADFS:return re.Adfs;case S.DSTS:return re.Dsts}return re.Default},Object.defineProperty(e.prototype,"authorityType",{get:function(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"protocolMode",{get:function(){return this.authorityOptions.protocolMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.authorityOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthority",{get:function(){return this._canonicalAuthority.urlString},set:function(e){this._canonicalAuthority=new $n(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthorityUrlComponents",{get:function(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hostnameAndPort",{get:function(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tenant",{get:function(){return this.canonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authorizationEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw it.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw it.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceCodeEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw it.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endSessionEndpoint",{get:function(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw it.createLogoutNotSupportedError();return this.replacePath(this.metadata.end_session_endpoint)}throw it.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selfSignedJwtAudience",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw it.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jwksUri",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw it.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),e.prototype.canReplaceTenant=function(t){return 1===t.PathSegments.length&&!e.reservedTenantDomains.has(t.PathSegments[0])&&this.getAuthorityType(t)===re.Default&&this.protocolMode===ne.AAD},e.prototype.replaceTenant=function(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)},e.prototype.replacePath=function(e){var t=this,r=e,n=new $n(this.metadata.canonical_authority).getUrlComponents(),o=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach(function(e,i){var a=o[i];if(0===i&&t.canReplaceTenant(n)){var s=new $n(t.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];a!==s&&(t.logger.verbose("Replacing tenant domain name "+a+" with id "+s),a=s)}e!==a&&(r=r.replace("/"+a+"/","/"+e+"/"))}),this.replaceTenant(r)},Object.defineProperty(e.prototype,"defaultOpenIdConfigurationEndpoint",{get:function(){return this.authorityType===re.Adfs||this.authorityType===re.Dsts||this.protocolMode===ne.OIDC?this.canonicalAuthority+".well-known/openid-configuration":this.canonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!1,configurable:!0}),e.prototype.discoveryComplete=function(){return!!this.metadata},e.prototype.resolveEndpointsAsync=function(){var e,t,r;return v(this,void 0,void 0,function(){var n,o,a,s;return y(this,function(c){switch(c.label){case 0:return null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(i.AuthorityResolveEndpointsAsync,this.correlationId),(n=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort))||(n=new Wn).updateCanonicalAuthority(this.canonicalAuthority),null===(t=this.performanceClient)||void 0===t||t.setPreQueueTime(i.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId),[4,this.updateCloudDiscoveryMetadata(n)];case 1:return o=c.sent(),this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network),null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(i.AuthorityUpdateEndpointMetadata,this.correlationId),[4,this.updateEndpointMetadata(n)];case 2:return a=c.sent(),o!==L.CACHE&&a!==L.CACHE&&(n.resetExpiresAt(),n.updateCanonicalAuthority(this.canonicalAuthority)),s=this.cacheManager.generateAuthorityMetadataCacheKey(n.preferred_cache),this.cacheManager.setAuthorityMetadata(s,n),this.metadata=n,[2]}})})},e.prototype.updateEndpointMetadata=function(e){var t,r,n,o,a,s;return v(this,void 0,void 0,function(){var c,u;return y(this,function(l){switch(l.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.AuthorityUpdateEndpointMetadata,this.correlationId),(c=this.getEndpointMetadataFromConfig())?(e.updateEndpointMetadata(c,!1),[2,L.CONFIG]):this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!e.isExpired()?[2,L.CACHE]:(null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(i.AuthorityGetEndpointMetadataFromNetwork,this.correlationId),[4,this.getEndpointMetadataFromNetwork()]);case 1:return(c=l.sent())?(null===(n=this.authorityOptions.azureRegionConfiguration)||void 0===n?void 0:n.azureRegion)?(null===(o=this.performanceClient)||void 0===o||o.setPreQueueTime(i.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),[4,this.updateMetadataWithRegionalInformation(c)]):[3,3]:[3,4];case 2:c=l.sent(),l.label=3;case 3:return e.updateEndpointMetadata(c,!0),[2,L.NETWORK];case 4:return!(u=this.getEndpointMetadataFromHardcodedValues())||this.authorityOptions.skipAuthorityMetadataCache?[3,7]:(null===(a=this.authorityOptions.azureRegionConfiguration)||void 0===a?void 0:a.azureRegion)?(null===(s=this.performanceClient)||void 0===s||s.setPreQueueTime(i.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),[4,this.updateMetadataWithRegionalInformation(u)]):[3,6];case 5:u=l.sent(),l.label=6;case 6:return e.updateEndpointMetadata(u,!1),[2,L.HARDCODED_VALUES];case 7:throw it.createUnableToGetOpenidConfigError(this.defaultOpenIdConfigurationEndpoint)}})})},e.prototype.isAuthoritySameType=function(e){return new $n(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length},e.prototype.getEndpointMetadataFromConfig=function(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw Dn.createInvalidAuthorityMetadataError()}return null},e.prototype.getEndpointMetadataFromNetwork=function(){var e;return v(this,void 0,void 0,function(){var t,r;return y(this,function(n){switch(n.label){case 0:null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(i.AuthorityGetEndpointMetadataFromNetwork,this.correlationId),t={},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(this.defaultOpenIdConfigurationEndpoint,t)];case 2:return[2,Po((r=n.sent()).body)?r.body:null];case 3:return n.sent(),[2,null];case 4:return[2]}})})},e.prototype.getEndpointMetadataFromHardcodedValues=function(){return this.canonicalAuthority in Mo?Mo[this.canonicalAuthority]:null},e.prototype.updateMetadataWithRegionalInformation=function(t){var r,n,o,a;return v(this,void 0,void 0,function(){var s,c;return y(this,function(u){switch(u.label){case 0:return null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(i.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),(s=null===(n=this.authorityOptions.azureRegionConfiguration)||void 0===n?void 0:n.azureRegion)?s!==S.AZURE_REGION_AUTO_DISCOVER_FLAG?(this.regionDiscoveryMetadata.region_outcome=W.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=s,[2,e.replaceWithRegionalInformation(t,s)]):(null===(o=this.performanceClient)||void 0===o||o.setPreQueueTime(i.RegionDiscoveryDetectRegion,this.correlationId),[4,this.regionDiscovery.detectRegion(null===(a=this.authorityOptions.azureRegionConfiguration)||void 0===a?void 0:a.environmentRegion,this.regionDiscoveryMetadata)]):[3,2];case 1:if(c=u.sent())return this.regionDiscoveryMetadata.region_outcome=W.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=c,[2,e.replaceWithRegionalInformation(t,c)];this.regionDiscoveryMetadata.region_outcome=W.AUTO_DETECTION_REQUESTED_FAILED,u.label=2;case 2:return[2,t]}})})},e.prototype.updateCloudDiscoveryMetadata=function(e){var t,r;return v(this,void 0,void 0,function(){var n,o,a;return y(this,function(s){switch(s.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId),this.logger.verbose("Attempting to get cloud discovery metadata in the config"),this.logger.verbosePii("Known Authorities: "+(this.authorityOptions.knownAuthorities||S.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: "+(this.authorityOptions.authorityMetadata||S.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: "+(e.canonical_authority||S.NOT_APPLICABLE)),(n=this.getCloudDiscoveryMetadataFromConfig())?(this.logger.verbose("Found cloud discovery metadata in the config."),e.updateCloudDiscoveryMetadata(n,!1),[2,L.CONFIG]):(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the cache."),o=e.isExpired(),this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!o?(this.logger.verbose("Found metadata in the cache."),[2,L.CACHE]):(o&&this.logger.verbose("The metadata entity is expired."),this.logger.verbose("Did not find cloud discovery metadata in the cache... Attempting to get cloud discovery metadata from the network."),null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(i.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId),[4,this.getCloudDiscoveryMetadataFromNetwork()]));case 1:if(n=s.sent())return this.logger.verbose("cloud discovery metadata was successfully returned from getCloudDiscoveryMetadataFromNetwork()"),e.updateCloudDiscoveryMetadata(n,!0),[2,L.NETWORK];if(this.logger.verbose("Did not find cloud discovery metadata from the network... Attempting to get cloud discovery metadata from hardcoded values."),(a=this.getCloudDiscoveryMetadataFromHarcodedValues())&&!this.options.skipAuthorityMetadataCache)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),e.updateCloudDiscoveryMetadata(a,!1),[2,L.HARDCODED_VALUES];throw this.logger.error("Did not find cloud discovery metadata from hardcoded values... Metadata could not be obtained from config, cache, network or hardcoded values. Throwing Untrusted Authority Error."),Dn.createUntrustedAuthorityError()}})})},e.prototype.getCloudDiscoveryMetadataFromConfig=function(){if(this.authorityType===re.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");var t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=e.getCloudDiscoveryMetadataFromNetworkResponse(t.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Dn.createInvalidCloudDiscoveryMetadataError()}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null},e.prototype.getCloudDiscoveryMetadataFromNetwork=function(){var t;return v(this,void 0,void 0,function(){var r,n,o,a,s,c,u,l;return y(this,function(h){switch(h.label){case 0:null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId),r=""+S.AAD_INSTANCE_DISCOVERY_ENDPT+this.canonicalAuthority+"oauth2/v2.0/authorize",n={},o=null,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(r,n)];case 2:if(a=h.sent(),s=void 0,c=void 0,function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(a.body))s=a.body,c=s.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: "+s.tenant_discovery_endpoint);else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(a.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),[2,null];if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: "+a.status),(s=a.body).error===S.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),[2,null];this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is "+s.error),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is "+s.error_description),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),c=[]}return this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=e.getCloudDiscoveryMetadataFromNetworkResponse(c,this.hostnameAndPort),[3,4];case 3:return(u=h.sent())instanceof ae?this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: "+u.errorCode+"\nError Description: "+u.errorMessage):(l=u,this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: "+l.name+"\nError Description: "+l.message)),[2,null];case 4:return o||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),o=e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),[2,o]}})})},e.prototype.getCloudDiscoveryMetadataFromHarcodedValues=function(){return this.canonicalAuthority in xo?xo[this.canonicalAuthority]:null},e.prototype.isInKnownAuthorities=function(){var e=this;return this.authorityOptions.knownAuthorities.filter(function(t){return $n.getDomainFromUrl(t).toLowerCase()===e.hostnameAndPort}).length>0},e.generateAuthority=function(e,t){var r;if(t&&t.azureCloudInstance!==Xn.None){var n=t.tenant?t.tenant:S.DEFAULT_COMMON_TENANT;r=t.azureCloudInstance+"/"+n+"/"}return r||e},e.createCloudDiscoveryMetadataFromHost=function(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}},e.getCloudDiscoveryMetadataFromNetworkResponse=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.aliases.indexOf(t)>-1)return n}return null},e.prototype.getPreferredCache=function(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw it.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},e.prototype.isAlias=function(e){return this.metadata.aliases.indexOf(e)>-1},e.isPublicCloudAuthority=function(e){return S.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0},e.buildRegionalAuthorityString=function(e,t,r){var n=new $n(e);n.validateAsUri();var o=n.getUrlComponents(),i=t+"."+o.HostNameAndPort;this.isPublicCloudAuthority(o.HostNameAndPort)&&(i=t+"."+S.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX);var a=$n.constructAuthorityUriFromObject(m(m({},n.getUrlComponents()),{HostNameAndPort:i})).urlString;return r?a+"?"+r:a},e.replaceWithRegionalInformation=function(t,r){return t.authorization_endpoint=e.buildRegionalAuthorityString(t.authorization_endpoint,r),t.token_endpoint=e.buildRegionalAuthorityString(t.token_endpoint,r,S.REGIONAL_AUTH_NON_MSI_QUERY_STRING),t.end_session_endpoint&&(t.end_session_endpoint=e.buildRegionalAuthorityString(t.end_session_endpoint,r)),t},e.transformCIAMAuthority=function(e){var t=e.endsWith(S.FORWARD_SLASH)?e:""+e+S.FORWARD_SLASH,r=new $n(e).getUrlComponents();0===r.PathSegments.length&&r.HostNameAndPort.endsWith(S.CIAM_AUTH_URL)&&(t=""+t+r.HostNameAndPort.split(".")[0]+S.AAD_TENANT_DOMAIN_SUFFIX);return t},e.reservedTenantDomains=new Set(["{tenant}","{tenantid}",C.COMMON,C.CONSUMERS,C.ORGANIZATIONS]),e}(),Lo=function(){function e(){}return e.createDiscoveredInstance=function(t,r,n,o,a,s,c){return v(this,void 0,void 0,function(){var u,l,h;return y(this,function(d){switch(d.label){case 0:null==s||s.addQueueMeasurement(i.AuthorityFactoryCreateDiscoveredInstance,c),u=Uo.transformCIAMAuthority(t),l=e.createInstance(u,r,n,o,a,s,c),d.label=1;case 1:return d.trys.push([1,3,,4]),null==s||s.setPreQueueTime(i.AuthorityResolveEndpointsAsync,c),[4,l.resolveEndpointsAsync()];case 2:return d.sent(),[2,l];case 3:throw h=d.sent(),it.createEndpointDiscoveryIncompleteError(h);case 4:return[2]}})})},e.createInstance=function(e,t,r,n,o,i,a){if(at.isEmpty(e))throw Dn.createUrlEmptyError();return new Uo(e,t,r,n,o,i,a)},e}(),Bo=function(){function e(e,t){this.cacheOutcome=Q.NO_CACHE_HIT,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||S.EMPTY_STRING,this.wrapperVer=e.wrapperVer||S.EMPTY_STRING,this.telemetryCacheKey=K.CACHE_KEY+x.CACHE_KEY_SEPARATOR+e.clientId}return e.prototype.generateCurrentRequestHeaderValue=function(){var e=""+this.apiId+K.VALUE_SEPARATOR+this.cacheOutcome,t=[this.wrapperSKU,this.wrapperVer].join(K.VALUE_SEPARATOR),r=[e,this.getRegionDiscoveryFields()].join(K.VALUE_SEPARATOR);return[K.SCHEMA_VERSION,r,t].join(K.CATEGORY_SEPARATOR)},e.prototype.generateLastRequestHeaderValue=function(){var t=this.getLastRequests(),r=e.maxErrorsToSend(t),n=t.failedRequests.slice(0,2*r).join(K.VALUE_SEPARATOR),o=t.errors.slice(0,r).join(K.VALUE_SEPARATOR),i=t.errors.length,a=[i,r<i?K.OVERFLOW_TRUE:K.OVERFLOW_FALSE].join(K.VALUE_SEPARATOR);return[K.SCHEMA_VERSION,t.cacheHits,n,o,a].join(K.CATEGORY_SEPARATOR)},e.prototype.cacheFailedRequest=function(e){var t=this.getLastRequests();t.errors.length>=K.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),at.isEmpty(e.subError)?at.isEmpty(e.errorCode)?e&&e.toString()?t.errors.push(e.toString()):t.errors.push(K.UNKNOWN_ERROR):t.errors.push(e.errorCode):t.errors.push(e.subError),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)},e.prototype.incrementCacheHits=function(){var e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits},e.prototype.getLastRequests=function(){var e=new Yn;return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e},e.prototype.clearTelemetryCache=function(){var t=this.getLastRequests(),r=e.maxErrorsToSend(t);if(r===t.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{var n=new Yn;n.failedRequests=t.failedRequests.slice(2*r),n.errors=t.errors.slice(r),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}},e.maxErrorsToSend=function(e){var t,r=0,n=0,o=e.errors.length;for(t=0;t<o;t++){var i=e.failedRequests[2*t]||S.EMPTY_STRING,a=e.failedRequests[2*t+1]||S.EMPTY_STRING,s=e.errors[t]||S.EMPTY_STRING;if(!((n+=i.toString().length+a.toString().length+s.length+3)<K.MAX_LAST_HEADER_BYTES))break;r+=1}return r},e.prototype.getRegionDiscoveryFields=function(){var e=[];return e.push(this.regionUsed||S.EMPTY_STRING),e.push(this.regionSource||S.EMPTY_STRING),e.push(this.regionOutcome||S.EMPTY_STRING),e.join(",")},e.prototype.updateRegionDiscoveryMetadata=function(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome},e.prototype.setCacheOutcome=function(e){this.cacheOutcome=e},e}(),Ho=function(){function e(e,t,r,n,o,i,a,s,c){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.nativeMessageHandler=s,this.correlationId=c||this.browserCrypto.createNewGuid(),this.logger=n.clone(Tt,wo,this.correlationId),this.performanceClient=a}return e.prototype.clearCacheOnLogout=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:if(!e)return[3,5];yt.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null)),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.browserStorage.removeAccount(yt.generateAccountCacheKey(e))];case 2:return t.sent(),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request."),[3,4];case 3:return t.sent(),this.logger.error("Account provided in logout request was not found. Local cache unchanged."),[3,4];case 4:return[3,9];case 5:return t.trys.push([5,8,,9]),this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),[4,this.browserStorage.clear()];case 6:return t.sent(),[4,this.browserCrypto.clearKeystore()];case 7:return t.sent(),[3,9];case 8:return t.sent(),this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged."),[3,9];case 9:return[2]}})})},e.prototype.initializeBaseRequest=function(e,t){return u(this,void 0,void 0,function(){var r,n,o,a;return l(this,function(c){switch(c.label){case 0:return this.performanceClient.addQueueMeasurement(i.InitializeBaseRequest,e.correlationId),this.logger.verbose("Initializing BaseAuthRequest"),r=e.authority||this.config.auth.authority,t?[4,this.validateRequestAuthority(r,t)]:[3,2];case 1:c.sent(),c.label=2;case 2:if(n=d(e&&e.scopes||[]),(o=s(s({},e),{correlationId:this.correlationId,authority:r,scopes:n})).authenticationScheme){if(o.authenticationScheme===z.SSH){if(!e.sshJwk)throw Dn.createMissingSshJwkError();if(!e.sshKid)throw Dn.createMissingSshKidError()}this.logger.verbose('Authentication Scheme set to "'+o.authenticationScheme+'" as configured in Auth request')}else o.authenticationScheme=z.BEARER,this.logger.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return this.config.cache.claimsBasedCachingEnabled&&e.claims&&!at.isEmptyObj(e.claims)?(a=o,[4,this.browserCrypto.hashString(e.claims)]):[3,4];case 3:a.requestedClaimsHash=c.sent(),c.label=4;case 4:return[2,o]}})})},e.prototype.getRedirectUri=function(e){this.logger.verbose("getRedirectUri called");var t=e||this.config.auth.redirectUri||fo.getCurrentUri();return $n.getAbsoluteUrl(t,fo.getCurrentUri())},e.prototype.validateRequestAuthority=function(e,t){return u(this,void 0,void 0,function(){return l(this,function(r){switch(r.label){case 0:return[4,this.getDiscoveredAuthority(e)];case 1:if(!r.sent().isAlias(t.environment))throw Dn.createAuthorityMismatchError();return[2]}})})},e.prototype.initializeServerTelemetryManager=function(e,t){this.logger.verbose("initializeServerTelemetryManager called");var r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Bo(r,this.browserStorage)},e.prototype.getDiscoveredAuthority=function(e){return u(this,void 0,void 0,function(){var t;return l(this,function(r){switch(r.label){case 0:return this.logger.verbose("getDiscoveredAuthority called"),t={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata},e?(this.logger.verbose("Creating discovered authority with request authority"),[4,Lo.createDiscoveredInstance(e,this.config.system.networkClient,this.browserStorage,t,this.logger)]):[3,2];case 1:case 3:return[2,r.sent()];case 2:return this.logger.verbose("Creating discovered authority with configured authority"),[4,Lo.createDiscoveredInstance(this.config.auth.authority,this.config.system.networkClient,this.browserStorage,t,this.logger)]}})})},e}(),qo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initializeAuthorizationCodeRequest=function(e){return u(this,void 0,void 0,function(){var t,r;return l(this,function(n){switch(n.label){case 0:return this.performanceClient.addQueueMeasurement(i.StandardInteractionClientInitializeAuthorizationCodeRequest,e.correlationId),this.logger.verbose("initializeAuthorizationRequest called",e.correlationId),[4,this.browserCrypto.generatePkceCodes()];case 1:return t=n.sent(),r=s(s({},e),{redirectUri:e.redirectUri,code:S.EMPTY_STRING,codeVerifier:t.verifier}),e.codeChallenge=t.challenge,e.codeChallengeMethod=S.S256_CODE_CHALLENGE_METHOD,[2,r]}})})},t.prototype.initializeLogoutRequest=function(e){this.logger.verbose("initializeLogoutRequest called",null==e?void 0:e.correlationId);var t=s({correlationId:this.correlationId||this.browserCrypto.createNewGuid()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){var r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=$n.getAbsoluteUrl(e.postLogoutRedirectUri,fo.getCurrentUri())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=$n.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,fo.getCurrentUri())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=$n.getAbsoluteUrl(fo.getCurrentUri(),fo.getCurrentUri())),t},t.prototype.getLogoutHintFromIdTokenClaims=function(e){var t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null},t.prototype.createAuthCodeClient=function(e,t,r){return u(this,void 0,void 0,function(){var n;return l(this,function(o){switch(o.label){case 0:return this.performanceClient.addQueueMeasurement(i.StandardInteractionClientCreateAuthCodeClient,this.correlationId),this.performanceClient.setPreQueueTime(i.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(e,t,r)];case 1:return n=o.sent(),[2,new Oo(n,this.performanceClient)]}})})},t.prototype.getClientConfiguration=function(e,t,r){return u(this,void 0,void 0,function(){var n,o;return l(this,function(a){switch(a.label){case 0:return this.performanceClient.addQueueMeasurement(i.StandardInteractionClientGetClientConfiguration,this.correlationId),this.logger.verbose("getClientConfiguration called",this.correlationId),this.performanceClient.setPreQueueTime(i.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),[4,this.getDiscoveredAuthority(t,r)];case 1:return n=a.sent(),o=this.config.system.loggerOptions,[2,{authOptions:{clientId:this.config.auth.clientId,authority:n,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:o.loggerCallback,piiLoggingEnabled:o.piiLoggingEnabled,logLevel:o.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:Tt,version:wo,cpu:S.EMPTY_STRING,os:S.EMPTY_STRING},telemetry:this.config.telemetry}]}})})},t.prototype.validateAndExtractStateFromHash=function(e,t,r){if(this.logger.verbose("validateAndExtractStateFromHash called",r),!e.state)throw Dr.createHashDoesNotContainStateError();var n=eo.extractBrowserRequestState(this.browserCrypto,e.state);if(!n)throw Dr.createUnableToParseStateError();if(n.interactionType!==t)throw Dr.createStateInteractionTypeMismatchError();return this.logger.verbose("Returning state from hash",r),e.state},t.prototype.getDiscoveredAuthority=function(e,t){var r;return u(this,void 0,void 0,function(){var n,o,a,s;return l(this,function(c){switch(c.label){case 0:return this.performanceClient.addQueueMeasurement(i.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),this.logger.verbose("getDiscoveredAuthority called",this.correlationId),n=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement(i.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e||this.config.auth.authority,s=Uo.generateAuthority(a,t||this.config.auth.azureCloudOptions),this.logger.verbose("Creating discovered authority with configured authority",this.correlationId),this.performanceClient.setPreQueueTime(i.AuthorityFactoryCreateDiscoveredInstance,this.correlationId),[4,Lo.createDiscoveredInstance(s,this.config.system.networkClient,this.browserStorage,o,this.logger,this.performanceClient,this.correlationId).then(function(e){return n.endMeasurement({success:!0}),e}).catch(function(e){throw n.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e})];case 1:return[2,c.sent()]}})})},t.prototype.initializeAuthorizationRequest=function(e,t){return u(this,void 0,void 0,function(){var r,n,o,a,c,u,h;return l(this,function(l){switch(l.label){case 0:return this.performanceClient.addQueueMeasurement(i.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId),this.logger.verbose("initializeAuthorizationRequest called",this.correlationId),r=this.getRedirectUri(e.redirectUri),n={interactionType:t},o=Vn.setRequestState(this.browserCrypto,e&&e.state||S.EMPTY_STRING,n),this.performanceClient.setPreQueueTime(i.InitializeBaseRequest,this.correlationId),c=[{}],[4,this.initializeBaseRequest(e)];case 1:return a=s.apply(void 0,[s.apply(void 0,c.concat([l.sent()])),{redirectUri:r,state:o,nonce:e.nonce||this.browserCrypto.createNewGuid(),responseMode:O.FRAGMENT}]),(u=e.account||this.browserStorage.getActiveAccount())&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: "+u.homeAccountId,this.correlationId),a.account=u),at.isEmpty(a.loginHint)&&!u&&(h=this.browserStorage.getLegacyLoginHint())&&(a.loginHint=h),[2,a]}})})},t}(Ho);!function(e){e.USER_INTERACTION_REQUIRED="USER_INTERACTION_REQUIRED",e.USER_CANCEL="USER_CANCEL",e.NO_NETWORK="NO_NETWORK",e.TRANSIENT_ERROR="TRANSIENT_ERROR",e.PERSISTENT_ERROR="PERSISTENT_ERROR",e.DISABLED="DISABLED",e.ACCOUNT_UNAVAILABLE="ACCOUNT_UNAVAILABLE"}(No||(No={}));var Fo={code:"ContentError"},zo={code:"user_switch",desc:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},Ko={code:"tokens_not_found_in_internal_memory_cache",desc:"Tokens not cached in MSAL JS internal memory, please make the WAM request"},jo=function(e){function t(r,n,o){var i=e.call(this,r,n)||this;return Object.setPrototypeOf(i,t.prototype),i.name="NativeAuthError",i.ext=o,i}return o(t,e),t.prototype.isFatal=function(){return!(!this.ext||!this.ext.status||this.ext.status!==No.PERSISTENT_ERROR&&this.ext.status!==No.DISABLED)||this.errorCode===Fo.code},t.createError=function(e,r,n){if(n&&n.status)switch(n.status){case No.ACCOUNT_UNAVAILABLE:return de.createNativeAccountUnavailableError();case No.USER_INTERACTION_REQUIRED:return new de(e,r);case No.USER_CANCEL:return Dr.createUserCancelledError();case No.NO_NETWORK:return Dr.createNoNetworkConnectivityError()}return new t(e,r,n)},t.createUserSwitchError=function(){return new t(zo.code,zo.desc)},t.createTokensNotFoundInCacheError=function(){return new t(Ko.code,Ko.desc)},t}(ae),Go=function(e){function t(t,r){return e.call(this,t,r)||this}return g(t,e),t.prototype.acquireToken=function(e){var t,r,n,o,a,s,c;return v(this,void 0,void 0,function(){var u,l,h,d,p,f,g=this;return y(this,function(m){switch(m.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.RefreshTokenClientAcquireToken,e.correlationId),u=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement(i.RefreshTokenClientAcquireToken,e.correlationId),this.logger.verbose("RefreshTokenClientAcquireToken called",e.correlationId),l=zn.nowSeconds(),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(i.RefreshTokenClientExecuteTokenRequest,e.correlationId),[4,this.executeTokenRequest(e,this.authority)];case 1:return h=m.sent(),d=null===(o=h.headers)||void 0===o?void 0:o[_.X_MS_HTTP_VERSION],null==u||u.addStaticFields({refreshTokenSize:(null===(a=h.body.refresh_token)||void 0===a?void 0:a.length)||0}),d&&(null==u||u.addStaticFields({httpVerToken:d})),p=null===(s=h.headers)||void 0===s?void 0:s[_.X_MS_REQUEST_ID],(f=new Ro(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(h.body),null===(c=this.performanceClient)||void 0===c||c.setPreQueueTime(i.HandleServerTokenResponse,e.correlationId),[2,f.handleServerTokenResponse(h.body,this.authority,l,e,void 0,void 0,!0,e.forceCache,p).then(function(e){return null==u||u.endMeasurement({success:!0}),e}).catch(function(t){throw g.logger.verbose("Error in fetching refresh token",e.correlationId),null==u||u.endMeasurement({errorCode:t.errorCode,subErrorCode:t.subError,success:!1}),t})]}})})},t.prototype.acquireTokenByRefreshToken=function(e){var t,r,n,o;return v(this,void 0,void 0,function(){var a,s;return y(this,function(c){if(!e)throw Dn.createEmptyTokenRequestError();if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw it.createNoAccountInSilentRequestError();if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return null===(r=this.performanceClient)||void 0===r||r.setPreQueueTime(i.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!0)]}catch(t){if(a=t instanceof de&&t.errorCode===le.code,s=t instanceof se&&t.errorCode===ee&&t.subError===te,a||s)return null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(i.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!1)];throw t}return null===(o=this.performanceClient)||void 0===o||o.setPreQueueTime(i.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),[2,this.acquireTokenWithCachedRefreshToken(e,!1)]})})},t.prototype.acquireTokenWithCachedRefreshToken=function(e,t){var r,n,o;return v(this,void 0,void 0,function(){var a,s,c;return y(this,function(u){if(null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(i.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),a=null===(n=this.performanceClient)||void 0===n?void 0:n.startMeasurement(i.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId),this.logger.verbose("RefreshTokenClientAcquireTokenWithCachedRefreshToken called",e.correlationId),!(s=this.cacheManager.getRefreshToken(e.account,t)))throw null==a||a.discardMeasurement(),de.createNoTokensFoundError();return null==a||a.endMeasurement({success:!0}),c=m(m({},e),{refreshToken:s.secret,authenticationScheme:e.authenticationScheme||z.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:nn.HOME_ACCOUNT_ID}}),null===(o=this.performanceClient)||void 0===o||o.setPreQueueTime(i.RefreshTokenClientAcquireToken,e.correlationId),[2,this.acquireToken(c)]})})},t.prototype.executeTokenRequest=function(e,t){var r,n,o;return v(this,void 0,void 0,function(){var a,s,c,u,l,h;return y(this,function(d){switch(d.label){case 0:return null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(i.RefreshTokenClientExecuteTokenRequest,e.correlationId),a=null===(n=this.performanceClient)||void 0===n?void 0:n.startMeasurement(i.RefreshTokenClientExecuteTokenRequest,e.correlationId),null===(o=this.performanceClient)||void 0===o||o.setPreQueueTime(i.RefreshTokenClientCreateTokenRequestBody,e.correlationId),s=this.createTokenQueryParameters(e),c=$n.appendQueryString(t.tokenEndpoint,s),[4,this.createTokenRequestBody(e)];case 1:return u=d.sent(),l=this.createTokenRequestHeaders(e.ccsCredential),h={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},[2,this.executePostToTokenEndpoint(c,u,l,h).then(function(e){return null==a||a.endMeasurement({success:!0}),e}).catch(function(e){throw null==a||a.endMeasurement({success:!1}),e})]}})})},t.prototype.createTokenRequestBody=function(e){var t,r,n;return v(this,void 0,void 0,function(){var o,a,s,c,u,l,h;return y(this,function(d){switch(d.label){case 0:return null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(i.RefreshTokenClientCreateTokenRequestBody,e.correlationId),o=e.correlationId,a=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement(i.BaseClientCreateTokenRequestHeaders,o),(s=new So).addClientId(this.config.authOptions.clientId),s.addScopes(e.scopes),s.addGrantType(P.REFRESH_TOKEN_GRANT),s.addClientInfo(),s.addLibraryInfo(this.config.libraryInfo),s.addApplicationTelemetry(this.config.telemetry.application),s.addThrottling(),this.serverTelemetryManager&&s.addServerTelemetry(this.serverTelemetryManager),s.addCorrelationId(o),s.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&s.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(c=this.config.clientCredentials.clientAssertion,s.addClientAssertion(c.assertion),s.addClientAssertionType(c.assertionType)),e.authenticationScheme!==z.POP?[3,2]:(u=new Io(this.cryptoUtils,this.performanceClient),null===(n=this.performanceClient)||void 0===n||n.setPreQueueTime(i.PopTokenGenerateCnf,e.correlationId),[4,u.generateCnf(e)]);case 1:return l=d.sent(),s.addPopToken(l.reqCnfString),[3,3];case 2:if(e.authenticationScheme===z.SSH){if(!e.sshJwk)throw null==a||a.endMeasurement({success:!1}),Dn.createMissingSshJwkError();s.addSshJwk(e.sshJwk)}d.label=3;case 3:if((!at.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&s.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case nn.HOME_ACCOUNT_ID:try{h=ct(e.ccsCredential.credential),s.addCcsOid(h)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case nn.UPN:s.addCcsUpn(e.ccsCredential.credential)}return null==a||a.endMeasurement({success:!0}),[2,s.createQueryString()]}})})},t}(ko),Yo=function(e){function t(t,r){return e.call(this,t,r)||this}return g(t,e),t.prototype.acquireToken=function(e){return v(this,void 0,void 0,function(){var t;return y(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.acquireCachedToken(e)];case 1:return[2,r.sent()];case 2:if((t=r.sent())instanceof it&&t.errorCode===Xe.code)return[2,new Go(this.config,this.performanceClient).acquireTokenByRefreshToken(e)];throw t;case 3:return[2]}})})},t.prototype.acquireCachedToken=function(e){var t,r,n,o,i;return v(this,void 0,void 0,function(){var a,s;return y(this,function(c){switch(c.label){case 0:if(!e)throw Dn.createEmptyTokenRequestError();if(e.forceRefresh)throw null===(t=this.serverTelemetryManager)||void 0===t||t.setCacheOutcome(Q.FORCE_REFRESH),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because forceRefresh is true."),it.createRefreshRequiredError();if(!this.config.cacheOptions.claimsBasedCachingEnabled&&!at.isEmptyObj(e.claims))throw null===(r=this.serverTelemetryManager)||void 0===r||r.setCacheOutcome(Q.CLAIMS_REQUESTED_CACHE_SKIPPED),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because claims-based caching is disabled and claims were requested."),it.createRefreshRequiredError();if(!e.account)throw it.createNoAccountInSilentRequestError();if(a=e.authority||this.authority.getPreferredCache(),!(s=this.cacheManager.readCacheRecord(e.account,e,a)).accessToken)throw null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(Q.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),it.createRefreshRequiredError();if(zn.wasClockTurnedBack(s.accessToken.cachedAt)||zn.isTokenExpired(s.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw null===(o=this.serverTelemetryManager)||void 0===o||o.setCacheOutcome(Q.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token is expired or will expire within "+this.config.systemOptions.tokenRenewalOffsetSeconds+" seconds."),it.createRefreshRequiredError();if(s.accessToken.refreshOn&&zn.isTokenExpired(s.accessToken.refreshOn,0))throw null===(i=this.serverTelemetryManager)||void 0===i||i.setCacheOutcome(Q.REFRESH_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'."),it.createRefreshRequiredError();return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[4,this.generateResultFromCacheRecord(s,e)];case 1:return[2,c.sent()]}})})},t.prototype.generateResultFromCacheRecord=function(e,t){return v(this,void 0,void 0,function(){var r,n;return y(this,function(o){switch(o.label){case 0:if(e.idToken&&(r=new Ln(e.idToken.secret,this.config.cryptoInterface)),t.maxAge||0===t.maxAge){if(!(n=null==r?void 0:r.claims.auth_time))throw it.createAuthTimeNotFoundError();Ln.checkMaxAge(n,t.maxAge)}return[4,Ro.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)];case 1:return[2,o.sent()]}})})},t}(ko),Wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.acquireToken=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,a;return l(this,function(s){switch(s.label){case 0:return t=this.performanceClient.startMeasurement(i.SilentCacheClientAcquireToken,e.correlationId),r=this.initializeServerTelemetryManager(gt.acquireTokenSilent_silentFlow),[4,this.createSilentFlowClient(r,e.authority,e.azureCloudOptions)];case 1:n=s.sent(),this.logger.verbose("Silent auth client created"),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,n.acquireCachedToken(e)];case 3:return o=s.sent(),t.endMeasurement({success:!0,fromCache:!0}),[2,o];case 4:throw(a=s.sent())instanceof Dr&&a.errorCode===Tr.code&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),t.endMeasurement({errorCode:a instanceof ae&&a.errorCode||void 0,subErrorCode:a instanceof ae&&a.subError||void 0,success:!1}),a;case 5:return[2]}})})},t.prototype.logout=function(){return Promise.reject(Dr.createSilentLogoutUnsupportedError())},t.prototype.createSilentFlowClient=function(e,t,r){return u(this,void 0,void 0,function(){var n;return l(this,function(o){switch(o.label){case 0:return this.performanceClient.setPreQueueTime(i.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(e,t,r)];case 1:return n=o.sent(),[2,new Yo(n,this.performanceClient)]}})})},t.prototype.initializeSilentRequest=function(e,t){return u(this,void 0,void 0,function(){var r;return l(this,function(n){switch(n.label){case 0:return this.performanceClient.addQueueMeasurement(i.InitializeSilentRequest,this.correlationId),this.performanceClient.setPreQueueTime(i.InitializeBaseRequest,this.correlationId),r=[s({},e)],[4,this.initializeBaseRequest(e,t)];case 1:return[2,s.apply(void 0,[s.apply(void 0,r.concat([n.sent()])),{account:t,forceRefresh:e.forceRefresh||!1}])]}})})},t}(qo),Qo=function(e){function t(t,r,n,o,i,a,s,c,u,l,h,d){var p=e.call(this,t,r,n,o,i,a,c,u,d)||this;return p.apiId=s,p.accountId=l,p.nativeMessageHandler=u,p.nativeStorageManager=h,p.silentCacheClient=new Wo(t,p.nativeStorageManager,n,o,i,a,c,u,d),p}return o(t,e),t.prototype.acquireToken=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,a,s,c;return l(this,function(u){switch(u.label){case 0:return this.logger.trace("NativeInteractionClient - acquireToken called."),t=this.performanceClient.startMeasurement(i.NativeInteractionClientAcquireToken,e.correlationId),r=zn.nowSeconds(),[4,this.initializeNativeRequest(e)];case 1:n=u.sent(),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.acquireTokensFromCache(this.accountId,n)];case 3:return o=u.sent(),t.endMeasurement({success:!0,isNativeBroker:!1,fromCache:!0}),[2,o];case 4:return u.sent(),this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call"),[3,5];case 5:return a={method:ut.GetToken,request:n},[4,this.nativeMessageHandler.sendMessage(a)];case 6:return s=u.sent(),c=this.validateNativeResponse(s),[2,this.handleNativeResponse(c,n,r).then(function(e){return t.endMeasurement({success:!0,isNativeBroker:!0,requestId:e.requestId}),e}).catch(function(e){throw t.endMeasurement({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e})]}})})},t.prototype.createSilentCacheRequest=function(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:Un.fromString(e.scope).asArray(),account:t,forceRefresh:!1}},t.prototype.acquireTokensFromCache=function(e,t){return u(this,void 0,void 0,function(){var r,n,o,i;return l(this,function(a){switch(a.label){case 0:if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),it.createNoAccountFoundError();if(!(r=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:e})))throw it.createNoAccountFoundError();a.label=1;case 1:return a.trys.push([1,3,,4]),n=this.createSilentCacheRequest(t,r),[4,this.silentCacheClient.acquireToken(n)];case 2:return o=a.sent(),i=s(s({},r),{idTokenClaims:o.idTokenClaims}),[2,s(s({},o),{account:i})];case 3:throw a.sent();case 4:return[2]}})})},t.prototype.acquireTokenRedirect=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,i,a;return l(this,function(s){switch(s.label){case 0:return this.logger.trace("NativeInteractionClient - acquireTokenRedirect called."),[4,this.initializeNativeRequest(e)];case 1:t=s.sent(),r={method:ut.GetToken,request:t},s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.nativeMessageHandler.sendMessage(r)];case 3:return n=s.sent(),this.validateNativeResponse(n),[3,5];case 4:if((o=s.sent())instanceof jo&&o.isFatal())throw o;return[3,5];case 5:return this.browserStorage.setTemporaryCache(dt.NATIVE_REQUEST,JSON.stringify(t),!0),i={apiId:gt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri),[4,this.navigationClient.navigateExternal(a,i)];case 6:return s.sent(),[2]}})})},t.prototype.handleRedirectPromise=function(){return u(this,void 0,void 0,function(){var e,t,r,n,o,i,a,s;return l(this,function(u){switch(u.label){case 0:if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),[2,null];if(!(e=this.browserStorage.getCachedNativeRequest()))return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),[2,null];t=e.prompt,r=c(e,["prompt"]),t&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(dt.NATIVE_REQUEST)),n={method:ut.GetToken,request:r},o=zn.nowSeconds(),u.label=1;case 1:return u.trys.push([1,3,,4]),this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker."),[4,this.nativeMessageHandler.sendMessage(n)];case 2:return i=u.sent(),this.validateNativeResponse(i),a=this.handleNativeResponse(i,r,o),this.browserStorage.setInteractionInProgress(!1),[2,a];case 3:throw s=u.sent(),this.browserStorage.setInteractionInProgress(!1),s;case 4:return[2]}})})},t.prototype.logout=function(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")},t.prototype.handleNativeResponse=function(e,t,r){return u(this,void 0,void 0,function(){var n,o,i,a,s;return l(this,function(c){switch(c.label){case 0:if(this.logger.trace("NativeInteractionClient - handleNativeResponse called."),e.account.id!==t.accountId)throw jo.createUserSwitchError();return[4,this.getDiscoveredAuthority(t.authority)];case 1:return n=c.sent(),o=this.createIdTokenObj(e),i=this.createHomeAccountIdentifier(e,o),a=yt.createAccount({homeAccountId:i,idTokenClaims:o.claims,clientInfo:e.client_info,nativeAccountId:e.account.id},n),[4,this.generateAuthenticationResult(e,t,o,a,n.canonicalAuthority,r)];case 2:return s=c.sent(),this.cacheAccount(a),this.cacheNativeTokens(e,t,i,o,s.accessToken,s.tenantId,r),[2,s]}})})},t.prototype.createIdTokenObj=function(e){return new Ln(e.id_token||S.EMPTY_STRING,this.browserCrypto)},t.prototype.createHomeAccountIdentifier=function(e,t){return yt.generateHomeAccountId(e.client_info||S.EMPTY_STRING,re.Default,this.logger,this.browserCrypto,t.claims)},t.prototype.generateScopes=function(e,t){return e.scope?Un.fromString(e.scope):Un.fromString(t.scope)},t.prototype.generatePopAccessToken=function(e,t){return u(this,void 0,void 0,function(){var r,n;return l(this,function(o){switch(o.label){case 0:if(t.tokenType!==z.POP)return[3,2];if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),[2,e.shr];if(r=new Io(this.browserCrypto),n={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce},!t.keyId)throw it.createKeyIdMissingError();return[4,r.signPopToken(e.access_token,t.keyId,n)];case 1:return[2,o.sent()];case 2:return[2,e.access_token]}})})},t.prototype.generateAuthenticationResult=function(e,t,r,n,o,i){return u(this,void 0,void 0,function(){var a,s,c,u,h,d,p;return l(this,function(l){switch(l.label){case 0:return a=this.addTelemetryFromNativeResponse(e),s=e.scope?Un.fromString(e.scope):Un.fromString(t.scope),c=e.account.properties||{},u=c.UID||r.claims.oid||r.claims.sub||S.EMPTY_STRING,h=c.TenantId||r.claims.tid||S.EMPTY_STRING,[4,this.generatePopAccessToken(e,t)];case 1:return d=l.sent(),p=t.tokenType===z.POP?z.POP:z.BEARER,[2,{authority:o,uniqueId:u,tenantId:h,scopes:s.asArray(),account:n.getAccountInfo(),idToken:e.id_token,idTokenClaims:r.claims,accessToken:d,fromCache:!!a&&this.isResponseFromCache(a),expiresOn:new Date(1e3*Number(i+e.expires_in)),tokenType:p,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}]}})})},t.prototype.cacheAccount=function(e){var t=this;this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(function(e){t.logger.error("Error occurred while removing account context from browser storage. "+e)})},t.prototype.cacheNativeTokens=function(e,t,r,n,o,i,a){var s=hn.createIdTokenEntity(r,t.authority,e.id_token||S.EMPTY_STRING,t.clientId,n.claims.tid||S.EMPTY_STRING),c=a+(t.tokenType===z.POP?S.SHR_NONCE_VALIDITY:("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),u=this.generateScopes(e,t),l=Kn.createAccessTokenEntity(r,t.authority,o,t.clientId,n?n.claims.tid||S.EMPTY_STRING:i,u.printScopes(),c,0,this.browserCrypto),h=new Jn(void 0,s,l);this.nativeStorageManager.saveCacheRecord(h)},t.prototype.addTelemetryFromNativeResponse=function(e){var t=this.getMATSFromResponse(e);return t?(this.performanceClient.addStaticFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null},t.prototype.validateNativeResponse=function(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw jo.createUnexpectedError("Response missing expected properties.")},t.prototype.getMATSFromResponse=function(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch(e){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null},t.prototype.isResponseFromCache=function(e){return void 0===e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached},t.prototype.initializeNativeRequest=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,i,a,u,h,d,p=this;return l(this,function(l){switch(l.label){case 0:return this.logger.trace("NativeInteractionClient - initializeNativeRequest called"),t=e.authority||this.config.auth.authority,e.account?[4,this.validateRequestAuthority(t,e.account)]:[3,2];case 1:l.sent(),l.label=2;case 2:return(r=new $n(t)).validateAsUri(),n=e.scopes,o=c(e,["scopes"]),(i=new Un(n||[])).appendScopes(k),a=function(){switch(p.apiId){case gt.ssoSilent:case gt.acquireTokenSilent_silentFlow:return p.logger.trace("initializeNativeRequest: silent request sets prompt to none"),R.NONE}if(e.prompt)switch(e.prompt){case R.NONE:case R.CONSENT:case R.LOGIN:return p.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw p.logger.trace("initializeNativeRequest: prompt = "+e.prompt+" is not compatible with native flow"),Dr.createNativePromptParameterNotSupportedError()}else p.logger.trace("initializeNativeRequest: prompt was not provided")},u=s(s({},o),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:s(s(s({},e.extraQueryParameters),e.tokenQueryParameters),{telemetry:It}),extendedExpiryToken:!1}),e.authenticationScheme!==z.POP?[3,4]:(h={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},[4,new Io(this.browserCrypto).generateCnf(h)]);case 3:d=l.sent(),u.reqCnf=d.reqCnfString,u.keyId=d.kid,l.label=4;case 4:return[2,u]}})})},t}(Ho),Vo=function(){function e(e,t,r,n){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=n,this.resolvers=new Map,this.handshakeResolvers=new Map,this.responseId=0,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(i.NativeMessageHandlerHandshake)}return e.prototype.sendMessage=function(e){return u(this,void 0,void 0,function(){var t,r=this;return l(this,function(n){return this.logger.trace("NativeMessageHandler - sendMessage called."),t={channel:St,extensionId:this.extensionId,responseId:this.responseId++,body:e},this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii("NativeMessageHandler - Sending request to browser extension: "+JSON.stringify(t)),this.messageChannel.port1.postMessage(t),[2,new Promise(function(e,n){r.resolvers.set(t.responseId,{resolve:e,reject:n})})]})})},e.createProvider=function(t,r,n){return u(this,void 0,void 0,function(){var o,i;return l(this,function(a){switch(a.label){case 0:t.trace("NativeMessageHandler - createProvider called."),a.label=1;case 1:return a.trys.push([1,3,,5]),[4,(o=new e(t,r,n,kt)).sendHandshakeRequest()];case 2:return a.sent(),[2,o];case 3:return a.sent(),[4,(i=new e(t,r,n)).sendHandshakeRequest()];case 4:return a.sent(),[2,i];case 5:return[2]}})})},e.prototype.sendHandshakeRequest=function(){return u(this,void 0,void 0,function(){var e,t=this;return l(this,function(r){return this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1),e={channel:St,extensionId:this.extensionId,responseId:this.responseId++,body:{method:ut.HandshakeRequest}},this.handshakeEvent.addStaticFields({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=function(e){t.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),[2,new Promise(function(r,n){t.handshakeResolvers.set(e.responseId,{resolve:r,reject:n}),t.timeoutId=window.setTimeout(function(){window.removeEventListener("message",t.windowListener,!1),t.messageChannel.port1.close(),t.messageChannel.port2.close(),t.handshakeEvent.endMeasurement({extensionHandshakeTimedOut:!0,success:!1}),n(Dr.createNativeHandshakeTimeoutError()),t.handshakeResolvers.delete(e.responseId)},t.handshakeTimeoutMs)})]})})},e.prototype.onWindowMessage=function(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source===window){var t=e.data;if(t.channel&&t.channel===St&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===ut.HandshakeRequest){this.logger.verbose(t.extensionId?"Extension with id: "+t.extensionId+" not installed":"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1);var r=this.handshakeResolvers.get(t.responseId);r&&(this.handshakeEvent.endMeasurement({success:!1,extensionInstalled:!1}),r.reject(Dr.createNativeExtensionNotInstalledError()))}}},e.prototype.onChannelMessage=function(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");var t=e.data,r=this.resolvers.get(t.responseId),n=this.handshakeResolvers.get(t.responseId);try{var o=t.body.method;if(o===ut.Response){if(!r)return;var i=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii("NativeMessageHandler - Received response from browser extension: "+JSON.stringify(i)),"Success"!==i.status)r.reject(jo.createError(i.code,i.description,i.ext));else{if(!i.result)throw ae.createUnexpectedError("Event does not contain result.");i.result.code&&i.result.description?r.reject(jo.createError(i.result.code,i.result.description,i.result.ext)):r.resolve(i.result)}this.resolvers.delete(t.responseId)}else if(o===ut.HandshakeResponse){if(!n)return;clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose("NativeMessageHandler - Received HandshakeResponse from extension: "+this.extensionId),this.handshakeEvent.endMeasurement({extensionInstalled:!0,success:!0}),n.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(t){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: "+t.toString()),this.logger.errorPii("Unable to parse "+e),r?r.reject(t):n&&n.reject(t)}},e.prototype.getExtensionId=function(){return this.extensionId},e.prototype.getExtensionVersion=function(){return this.extensionVersion},e.isNativeAvailable=function(e,t,r,n){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(n)switch(n){case z.BEARER:case z.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0},e}(),Xo=function(){function e(e,t,r,n,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=n,this.performanceClient=o}return e.prototype.handleCodeResponseFromHash=function(e,t,r,n){return u(this,void 0,void 0,function(){var o,a,s;return l(this,function(c){if(this.performanceClient.addQueueMeasurement(i.HandleCodeResponseFromHash,this.authCodeRequest.correlationId),this.logger.verbose("InteractionHandler.handleCodeResponse called"),at.isEmpty(e))throw Dr.createEmptyHashError(e);if(o=this.browserStorage.generateStateKey(t),!(a=this.browserStorage.getTemporaryCache(o)))throw it.createStateNotFoundError("Cached State");try{s=this.authModule.handleFragmentResponse(e,a)}catch(e){throw e instanceof se&&e.subError===rr.code?Dr.createUserCancelledError():e}return this.performanceClient.setPreQueueTime(i.HandleCodeResponseFromServer,this.authCodeRequest.correlationId),[2,this.handleCodeResponseFromServer(s,t,r,n)]})})},e.prototype.handleCodeResponseFromServer=function(e,t,r,n,o){return void 0===o&&(o=!0),u(this,void 0,void 0,function(){var a,s,c,u,h,d;return l(this,function(l){switch(l.label){case 0:if(this.performanceClient.addQueueMeasurement(i.HandleCodeResponseFromServer,this.authCodeRequest.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),a=this.browserStorage.generateStateKey(t),!(s=this.browserStorage.getTemporaryCache(a)))throw it.createStateNotFoundError("Cached State");return c=this.browserStorage.generateNonceKey(s),u=this.browserStorage.getTemporaryCache(c),this.authCodeRequest.code=e.code,e.cloud_instance_host_name?(this.performanceClient.setPreQueueTime(i.UpdateTokenEndpointAuthority,this.authCodeRequest.correlationId),[4,this.updateTokenEndpointAuthority(e.cloud_instance_host_name,r,n)]):[3,2];case 1:l.sent(),l.label=2;case 2:return o&&(e.nonce=u||void 0),e.state=s,e.client_info?this.authCodeRequest.clientInfo=e.client_info:(h=this.checkCcsCredentials())&&(this.authCodeRequest.ccsCredential=h),this.performanceClient.setPreQueueTime(i.AuthClientAcquireToken,this.authCodeRequest.correlationId),[4,this.authModule.acquireToken(this.authCodeRequest,e)];case 3:return d=l.sent(),this.browserStorage.cleanRequestByState(t),[2,d]}})})},e.prototype.updateTokenEndpointAuthority=function(e,t,r){return u(this,void 0,void 0,function(){var n,o;return l(this,function(a){switch(a.label){case 0:return this.performanceClient.addQueueMeasurement(i.UpdateTokenEndpointAuthority,this.authCodeRequest.correlationId),n="https://"+e+"/"+t.tenant+"/",[4,Lo.createDiscoveredInstance(n,r,this.browserStorage,t.options,this.logger,this.performanceClient,this.authCodeRequest.correlationId)];case 1:return o=a.sent(),this.authModule.updateAuthority(o),[2]}})})},e.prototype.checkCcsCredentials=function(){var e=this.browserStorage.getTemporaryCache(dt.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch(t){this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii("Cache credential could not be parsed: "+e)}return null},e}(),Jo=function(e){function t(t,r,n,o,i,a,s,c,u,l){var h=e.call(this,t,r,n,o,i,a,s,u,l)||this;return h.unloadWindow=h.unloadWindow.bind(h),h.nativeStorage=c,h}return o(t,e),t.prototype.acquireToken=function(e){try{var t=this.generatePopupName(e.scopes||k,e.authority||this.config.auth.authority),r=e.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,t,r);this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");var n=this.openSizedPopup("about:blank",t,r);return this.acquireTokenPopupAsync(e,t,r,n)}catch(e){return Promise.reject(e)}},t.prototype.logout=function(e){try{this.logger.verbose("logoutPopup called");var t=this.initializeLogoutRequest(e),r=this.generateLogoutPopupName(t),n=e&&e.authority,o=e&&e.mainWindowRedirectUri,i=(null==e?void 0:e.popupWindowAttributes)||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,i,n,void 0,o);this.logger.verbose("asyncPopup set to false, opening popup");var a=this.openSizedPopup("about:blank",r,i);return this.logoutPopupAsync(t,r,i,n,a,o)}catch(e){return Promise.reject(e)}},t.prototype.acquireTokenPopupAsync=function(e,t,r,n){return u(this,void 0,void 0,function(){var o,a,c,u,h,d,p,f,g,m,v,y,w,_,b,C,E=this;return l(this,function(l){switch(l.label){case 0:return this.logger.verbose("acquireTokenPopupAsync called"),o=this.initializeServerTelemetryManager(gt.acquireTokenPopup),this.performanceClient.setPreQueueTime(i.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(e,mt.Popup)];case 1:a=l.sent(),this.browserStorage.updateCacheEntries(a.state,a.nonce,a.authority,a.loginHint||S.EMPTY_STRING,a.account||null),l.label=2;case 2:return l.trys.push([2,8,,9]),this.performanceClient.setPreQueueTime(i.StandardInteractionClientInitializeAuthorizationCodeRequest,e.correlationId),[4,this.initializeAuthorizationCodeRequest(a)];case 3:return c=l.sent(),this.performanceClient.setPreQueueTime(i.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(o,a.authority,a.azureCloudOptions)];case 4:return u=l.sent(),this.logger.verbose("Auth code client created"),h=Vo.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme),d=void 0,h&&(d=this.performanceClient.startMeasurement(i.FetchAccountIdWithNativeBroker,e.correlationId)),[4,u.getAuthCodeUrl(s(s({},a),{nativeBroker:h}))];case 5:return p=l.sent(),f=new Xo(u,this.browserStorage,c,this.logger,this.performanceClient),g={popup:n,popupName:t,popupWindowAttributes:r},m=this.initiateAuthRequest(p,g),this.eventHandler.emitEvent(vo.POPUP_OPENED,mt.Popup,{popupWindow:m},null),[4,this.monitorPopupForHash(m)];case 6:if(v=l.sent(),y=$n.getDeserializedHash(v),w=this.validateAndExtractStateFromHash(y,mt.Popup,a.correlationId),Co.removeThrottle(this.browserStorage,this.config.auth.clientId,c),y.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),d&&d.endMeasurement({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw Dr.createNativeConnectionNotEstablishedError();return _=new Qo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,gt.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,y.accountId,this.nativeStorage,a.correlationId),b=Vn.parseRequestState(this.browserCrypto,w).userRequestState,[2,_.acquireToken(s(s({},a),{state:b,prompt:void 0})).finally(function(){E.browserStorage.cleanRequestByState(w)})]}return[4,f.handleCodeResponseFromHash(v,w,u.authority,this.networkClient)];case 7:return[2,l.sent()];case 8:throw C=l.sent(),n&&n.close(),C instanceof ae&&C.setCorrelationId(this.correlationId),o.cacheFailedRequest(C),this.browserStorage.cleanRequestByState(a.state),C;case 9:return[2]}})})},t.prototype.logoutPopupAsync=function(e,t,r,n,o,a){return u(this,void 0,void 0,function(){var s,c,u,h,d,p,f;return l(this,function(l){switch(l.label){case 0:this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(vo.LOGOUT_START,mt.Popup,e),s=this.initializeServerTelemetryManager(gt.logoutPopup),l.label=1;case 1:return l.trys.push([1,5,,6]),[4,this.clearCacheOnLogout(e.account)];case 2:return l.sent(),this.performanceClient.setPreQueueTime(i.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(s,n)];case 3:return c=l.sent(),this.logger.verbose("Auth code client created"),u=c.getLogoutUri(e),this.eventHandler.emitEvent(vo.LOGOUT_SUCCESS,mt.Popup,e),h=this.openPopup(u,{popupName:t,popupWindowAttributes:r,popup:o}),this.eventHandler.emitEvent(vo.POPUP_OPENED,mt.Popup,{popupWindow:h},null),[4,this.waitForLogoutPopup(h)];case 4:return l.sent(),a?(d={apiId:gt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},p=$n.getAbsoluteUrl(a,fo.getCurrentUri()),this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: "+p),this.navigationClient.navigateInternal(p,d)):this.logger.verbose("No main window navigation requested"),[3,6];case 5:throw f=l.sent(),o&&o.close(),f instanceof ae&&f.setCorrelationId(this.correlationId),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(vo.LOGOUT_FAILURE,mt.Popup,null,f),this.eventHandler.emitEvent(vo.LOGOUT_END,mt.Popup),s.cacheFailedRequest(f),f;case 6:return this.eventHandler.emitEvent(vo.LOGOUT_END,mt.Popup),[2]}})})},t.prototype.initiateAuthRequest=function(e,t){if(at.isEmpty(e))throw this.logger.error("Navigate url is empty"),Dr.createEmptyNavigationUriError();return this.logger.infoPii("Navigate to: "+e),this.openPopup(e,t)},t.prototype.monitorPopupForHash=function(e){var t=this;return new Promise(function(r,n){var o=t.config.system.windowHashTimeout/t.config.system.pollIntervalMilliseconds,i=0;t.logger.verbose("PopupHandler.monitorPopupForHash - polling started");var a=setInterval(function(){if(e.closed)return t.logger.error("PopupHandler.monitorPopupForHash - window closed"),t.cleanPopup(),clearInterval(a),void n(Dr.createUserCancelledError());var s=S.EMPTY_STRING,c=S.EMPTY_STRING;try{s=e.location.href,c=e.location.hash}catch(e){}at.isEmpty(s)||"about:blank"===s||(t.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),i++,c?(t.logger.verbose("PopupHandler.monitorPopupForHash - found hash in url"),clearInterval(a),t.cleanPopup(e),$n.hashContainsKnownProperties(c)?(t.logger.verbose("PopupHandler.monitorPopupForHash - hash contains known properties, returning."),r(c)):(t.logger.error("PopupHandler.monitorPopupForHash - found hash in url but it does not contain known properties. Check that your router is not changing the hash prematurely."),t.logger.errorPii("PopupHandler.monitorPopupForHash - hash found: "+c),n(Dr.createHashDoesNotContainKnownPropertiesError()))):i>o&&(t.logger.error("PopupHandler.monitorPopupForHash - unable to find hash in url, timing out"),clearInterval(a),n(Dr.createMonitorPopupTimeoutError())))},t.config.system.pollIntervalMilliseconds)})},t.prototype.waitForLogoutPopup=function(e){var t=this;return new Promise(function(r){t.logger.verbose("PopupHandler.waitForLogoutPopup - polling started");var n=setInterval(function(){e.closed&&(t.logger.error("PopupHandler.waitForLogoutPopup - window closed"),t.cleanPopup(),clearInterval(n),r());var o=S.EMPTY_STRING;try{o=e.location.href}catch(e){}at.isEmpty(o)||"about:blank"===o||(t.logger.verbose("PopupHandler.waitForLogoutPopup - popup window is on same origin as caller, closing."),clearInterval(n),t.cleanPopup(e),r())},t.config.system.pollIntervalMilliseconds)})},t.prototype.openPopup=function(e,t){try{var r=void 0;if(t.popup?(r=t.popup,this.logger.verbosePii("Navigating popup window to: "+e),r.location.assign(e)):void 0===t.popup&&(this.logger.verbosePii("Opening popup window to: "+e),r=this.openSizedPopup(e,t.popupName,t.popupWindowAttributes)),!r)throw Dr.createEmptyWindowCreatedError();return r.focus&&r.focus(),this.currentWindow=r,window.addEventListener("beforeunload",this.unloadWindow),r}catch(e){throw this.logger.error("error opening popup "+e.message),this.browserStorage.setInteractionInProgress(!1),Dr.createPopupWindowError(e.toString())}},t.prototype.openSizedPopup=function(e,t,r){var n,o,i,a,s=window.screenLeft?window.screenLeft:window.screenX,c=window.screenTop?window.screenTop:window.screenY,u=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,h=null===(n=r.popupSize)||void 0===n?void 0:n.width,d=null===(o=r.popupSize)||void 0===o?void 0:o.height,p=null===(i=r.popupPosition)||void 0===i?void 0:i.top,f=null===(a=r.popupPosition)||void 0===a?void 0:a.left;return(!h||h<0||h>u)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),h=_t),(!d||d<0||d>l)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),d=bt),(!p||p<0||p>l)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),p=Math.max(0,l/2-bt/2+c)),(!f||f<0||f>u)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),f=Math.max(0,u/2-_t/2+s)),window.open(e,t,"width="+h+", height="+d+", top="+p+", left="+f+", scrollbars=yes")},t.prototype.unloadWindow=function(e){this.browserStorage.cleanRequestByInteractionType(mt.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()},t.prototype.cleanPopup=function(e){e&&e.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)},t.prototype.generatePopupName=function(e,t){return Ct+"."+this.config.auth.clientId+"."+e.join("-")+"."+t+"."+this.correlationId},t.prototype.generateLogoutPopupName=function(e){var t=e.account&&e.account.homeAccountId;return Ct+"."+this.config.auth.clientId+"."+t+"."+this.correlationId},t}(qo),Zo=function(e){function t(t,r,n,o,i,a){var s=e.call(this,t,r,n,o,a)||this;return s.browserCrypto=i,s}return o(t,e),t.prototype.initiateAuthRequest=function(e,t){return u(this,void 0,void 0,function(){var r;return l(this,function(n){switch(n.label){case 0:return this.logger.verbose("RedirectHandler.initiateAuthRequest called"),at.isEmpty(e)?[3,7]:(t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(dt.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(dt.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest,this.browserCrypto),this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: "+e),r={apiId:gt.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1},"function"!=typeof t.onRedirectNavigate?[3,4]:(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1===t.onRedirectNavigate(e)?[3,2]:(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),[4,t.navigationClient.navigateExternal(e,r)])));case 1:case 5:return n.sent(),[2];case 2:return this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation"),[2];case 3:return[3,6];case 4:return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),[4,t.navigationClient.navigateExternal(e,r)];case 6:return[3,8];case 7:throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Dr.createEmptyNavigationUriError();case 8:return[2]}})})},t.prototype.handleCodeResponseFromHash=function(e,t,r,n){return u(this,void 0,void 0,function(){var o,i,a,s,c,u,h;return l(this,function(l){switch(l.label){case 0:if(this.logger.verbose("RedirectHandler.handleCodeResponse called"),at.isEmpty(e))throw Dr.createEmptyHashError(e);if(this.browserStorage.setInteractionInProgress(!1),o=this.browserStorage.generateStateKey(t),!(i=this.browserStorage.getTemporaryCache(o)))throw it.createStateNotFoundError("Cached State");try{a=this.authModule.handleFragmentResponse(e,i)}catch(e){throw e instanceof se&&e.subError===rr.code?Dr.createUserCancelledError():e}return s=this.browserStorage.generateNonceKey(i),c=this.browserStorage.getTemporaryCache(s),this.authCodeRequest.code=a.code,a.cloud_instance_host_name?[4,this.updateTokenEndpointAuthority(a.cloud_instance_host_name,r,n)]:[3,2];case 1:l.sent(),l.label=2;case 2:return a.nonce=c||void 0,a.state=i,a.client_info?this.authCodeRequest.clientInfo=a.client_info:(u=this.checkCcsCredentials())&&(this.authCodeRequest.ccsCredential=u),[4,this.authModule.acquireToken(this.authCodeRequest,a)];case 3:return h=l.sent(),this.browserStorage.cleanRequestByState(t),[2,h]}})})},t}(Xo),$o=function(e){function t(t,r,n,o,i,a,s,c,u,l){var h=e.call(this,t,r,n,o,i,a,s,u,l)||this;return h.nativeStorage=c,h}return o(t,e),t.prototype.acquireToken=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,a,c,u,h,d,p=this;return l(this,function(l){switch(l.label){case 0:return this.performanceClient.setPreQueueTime(i.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(e,mt.Redirect)];case 1:t=l.sent(),this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||S.EMPTY_STRING,t.account||null),r=this.initializeServerTelemetryManager(gt.acquireTokenRedirect),n=function(e){e.persisted&&(p.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),p.browserStorage.cleanRequestByState(t.state),p.eventHandler.emitEvent(vo.RESTORE_FROM_BFCACHE,mt.Redirect))},l.label=2;case 2:return l.trys.push([2,7,,8]),this.performanceClient.setPreQueueTime(i.StandardInteractionClientInitializeAuthorizationCodeRequest,e.correlationId),[4,this.initializeAuthorizationCodeRequest(t)];case 3:return o=l.sent(),this.performanceClient.setPreQueueTime(i.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(r,t.authority,t.azureCloudOptions)];case 4:return a=l.sent(),this.logger.verbose("Auth code client created"),c=new Zo(a,this.browserStorage,o,this.logger,this.browserCrypto,this.performanceClient),[4,a.getAuthCodeUrl(s(s({},t),{nativeBroker:Vo.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}))];case 5:return u=l.sent(),h=this.getRedirectStartPage(e.redirectStartPage),this.logger.verbosePii("Redirect start page: "+h),window.addEventListener("pageshow",n),[4,c.initiateAuthRequest(u,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:h,onRedirectNavigate:e.onRedirectNavigate})];case 6:return[2,l.sent()];case 7:throw(d=l.sent())instanceof ae&&d.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",n),r.cacheFailedRequest(d),this.browserStorage.cleanRequestByState(t.state),d;case 8:return[2]}})})},t.prototype.handleRedirectPromise=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,i,a,s,c,u,h,d,p;return l(this,function(l){switch(l.label){case 0:t=this.initializeServerTelemetryManager(gt.handleRedirectPromise),l.label=1;case 1:if(l.trys.push([1,10,,11]),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),[2,null];if(!(r=this.getRedirectResponseHash(e||window.location.hash)))return this.logger.info("handleRedirectPromise did not detect a response hash as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(mt.Redirect),[2,null];n=void 0;try{o=$n.getDeserializedHash(r),n=this.validateAndExtractStateFromHash(o,mt.Redirect),this.logger.verbose("State extracted from hash")}catch(e){return this.logger.info("handleRedirectPromise was unable to extract state due to: "+e),this.browserStorage.cleanRequestByInteractionType(mt.Redirect),[2,null]}return i=this.browserStorage.getTemporaryCache(dt.ORIGIN_URI,!0)||S.EMPTY_STRING,a=$n.removeHashFromUrl(i),s=$n.removeHashFromUrl(window.location.href),a===s&&this.config.auth.navigateToLoginRequestUrl?(this.logger.verbose("Current page is loginRequestUrl, handling hash"),[4,this.handleHash(r,n,t)]):[3,3];case 2:return c=l.sent(),i.indexOf("#")>-1&&fo.replaceHash(i),[2,c];case 3:return this.config.auth.navigateToLoginRequestUrl?[3,4]:(this.logger.verbose("NavigateToLoginRequestUrl set to false, handling hash"),[2,this.handleHash(r,n,t)]);case 4:return fo.isInIframe()&&!this.config.system.allowRedirectInIframe?[3,9]:(this.browserStorage.setTemporaryCache(dt.URL_HASH,r,!0),u={apiId:gt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},h=!0,i&&"null"!==i?[3,6]:(d=fo.getHomepage(),this.browserStorage.setTemporaryCache(dt.ORIGIN_URI,d,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),[4,this.navigationClient.navigateInternal(d,u)]));case 5:return h=l.sent(),[3,8];case 6:return this.logger.verbose("Navigating to loginRequestUrl: "+i),[4,this.navigationClient.navigateInternal(i,u)];case 7:h=l.sent(),l.label=8;case 8:if(!h)return[2,this.handleHash(r,n,t)];l.label=9;case 9:return[2,null];case 10:throw(p=l.sent())instanceof ae&&p.setCorrelationId(this.correlationId),t.cacheFailedRequest(p),this.browserStorage.cleanRequestByInteractionType(mt.Redirect),p;case 11:return[2]}})})},t.prototype.getRedirectResponseHash=function(e){if(this.logger.verbose("getRedirectResponseHash called"),$n.hashContainsKnownProperties(e))return fo.clearHash(window),this.logger.verbose("Hash contains known properties, returning response hash"),e;var t=this.browserStorage.getTemporaryCache(dt.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(dt.URL_HASH)),this.logger.verbose("Hash does not contain known properties, returning cached hash"),t},t.prototype.handleHash=function(e,t,r){return u(this,void 0,void 0,function(){var n,o,a,c,u,h,d=this;return l(this,function(l){switch(l.label){case 0:if(n=this.browserStorage.getCachedRequest(t,this.browserCrypto),this.logger.verbose("handleHash called, retrieved cached request"),(o=$n.getDeserializedHash(e)).accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Dr.createNativeConnectionNotEstablishedError();return a=new Qo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,gt.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,o.accountId,this.nativeStorage,n.correlationId),c=Vn.parseRequestState(this.browserCrypto,t).userRequestState,[2,a.acquireToken(s(s({},n),{state:c,prompt:void 0})).finally(function(){d.browserStorage.cleanRequestByState(t)})]}if(!(u=this.browserStorage.getCachedAuthority(t)))throw Dr.createNoCachedAuthorityError();return this.performanceClient.setPreQueueTime(i.StandardInteractionClientCreateAuthCodeClient,n.correlationId),[4,this.createAuthCodeClient(r,u)];case 1:return h=l.sent(),this.logger.verbose("Auth code client created"),Co.removeThrottle(this.browserStorage,this.config.auth.clientId,n),[4,new Zo(h,this.browserStorage,n,this.logger,this.browserCrypto,this.performanceClient).handleCodeResponseFromHash(e,t,h.authority,this.networkClient)];case 2:return[2,l.sent()]}})})},t.prototype.logout=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,a,s;return l(this,function(c){switch(c.label){case 0:this.logger.verbose("logoutRedirect called"),t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(gt.logout),c.label=1;case 1:return c.trys.push([1,10,,11]),this.eventHandler.emitEvent(vo.LOGOUT_START,mt.Redirect,e),[4,this.clearCacheOnLogout(t.account)];case 2:return c.sent(),n={apiId:gt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},this.performanceClient.setPreQueueTime(i.StandardInteractionClientCreateAuthCodeClient,t.correlationId),[4,this.createAuthCodeClient(r,e&&e.authority)];case 3:return o=c.sent(),this.logger.verbose("Auth code client created"),a=o.getLogoutUri(t),this.eventHandler.emitEvent(vo.LOGOUT_SUCCESS,mt.Redirect,t),e&&"function"==typeof e.onRedirectNavigate?!1===e.onRedirectNavigate(a)?[3,5]:(this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),[4,this.navigationClient.navigateExternal(a,n)]):[3,7];case 4:return c.sent(),[2];case 5:this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation"),c.label=6;case 6:return[3,9];case 7:return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),[4,this.navigationClient.navigateExternal(a,n)];case 8:return c.sent(),[2];case 9:return[3,11];case 10:throw(s=c.sent())instanceof ae&&s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s),this.eventHandler.emitEvent(vo.LOGOUT_FAILURE,mt.Redirect,null,s),this.eventHandler.emitEvent(vo.LOGOUT_END,mt.Redirect),s;case 11:return this.eventHandler.emitEvent(vo.LOGOUT_END,mt.Redirect),[2]}})})},t.prototype.getRedirectStartPage=function(e){var t=e||window.location.href;return $n.getAbsoluteUrl(t,fo.getCurrentUri())},t}(qo),ei=function(e){function t(t,r,n,o,i,a){var s=e.call(this,t,r,n,o,a)||this;return s.navigateFrameWait=i.navigateFrameWait,s.pollIntervalMilliseconds=i.pollIntervalMilliseconds,s}return o(t,e),t.prototype.initiateAuthRequest=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:if(this.performanceClient.addQueueMeasurement(i.SilentHandlerInitiateAuthRequest,this.authCodeRequest.correlationId),at.isEmpty(e))throw this.logger.info("Navigate url is empty"),Dr.createEmptyNavigationUriError();return this.navigateFrameWait?(this.performanceClient.setPreQueueTime(i.SilentHandlerLoadFrame,this.authCodeRequest.correlationId),[4,this.loadFrame(e)]):[3,2];case 1:return[2,t.sent()];case 2:return[2,this.loadFrameSync(e)]}})})},t.prototype.monitorIframeForHash=function(e,t){var r=this;return this.performanceClient.addQueueMeasurement(i.SilentHandlerMonitorIframeForHash,this.authCodeRequest.correlationId),new Promise(function(n,o){t<mo&&r.logger.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower ("+t+"ms) than the default ("+mo+"ms). This may result in timeouts.");var i=window.performance.now()+t,a=setInterval(function(){if(window.performance.now()>i)return r.removeHiddenIframe(e),clearInterval(a),void o(Dr.createMonitorIframeTimeoutError());var t=S.EMPTY_STRING,s=e.contentWindow;try{t=s?s.location.href:S.EMPTY_STRING}catch(e){}if(!at.isEmpty(t)){var c=s?s.location.hash:S.EMPTY_STRING;return $n.hashContainsKnownProperties(c)?(r.removeHiddenIframe(e),clearInterval(a),void n(c)):void 0}},r.pollIntervalMilliseconds)})},t.prototype.loadFrame=function(e){var t=this;return this.performanceClient.addQueueMeasurement(i.SilentHandlerLoadFrame,this.authCodeRequest.correlationId),new Promise(function(r,n){var o=t.createHiddenIframe();setTimeout(function(){o?(o.src=e,r(o)):n("Unable to load iframe")},t.navigateFrameWait)})},t.prototype.loadFrameSync=function(e){var t=this.createHiddenIframe();return t.src=e,t},t.prototype.createHiddenIframe=function(){var e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.getElementsByTagName("body")[0].appendChild(e),e},t.prototype.removeHiddenIframe=function(e){document.body===e.parentNode&&document.body.removeChild(e)},t}(Xo),ti=function(e){function t(t,r,n,o,i,a,s,c,u,l,h){var d=e.call(this,t,r,n,o,i,a,c,l,h)||this;return d.apiId=s,d.nativeStorage=u,d}return o(t,e),t.prototype.acquireToken=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,a;return l(this,function(c){switch(c.label){case 0:if(this.performanceClient.addQueueMeasurement(i.SilentIframeClientAcquireToken,e.correlationId),this.logger.verbose("acquireTokenByIframe called"),t=this.performanceClient.startMeasurement(i.SilentIframeClientAcquireToken,e.correlationId),at.isEmpty(e.loginHint)&&at.isEmpty(e.sid)&&(!e.account||at.isEmpty(e.account.username))&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request."),e.prompt&&e.prompt!==R.NONE&&e.prompt!==R.NO_SESSION)throw t.endMeasurement({success:!1}),Dr.createSilentPromptValueError(e.prompt);return this.performanceClient.setPreQueueTime(i.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(s(s({},e),{prompt:e.prompt||R.NONE}),mt.Silent)];case 1:r=c.sent(),this.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||S.EMPTY_STRING,r.account||null),n=this.initializeServerTelemetryManager(this.apiId),c.label=2;case 2:return c.trys.push([2,5,,6]),this.performanceClient.setPreQueueTime(i.StandardInteractionClientCreateAuthCodeClient,e.correlationId),[4,this.createAuthCodeClient(n,r.authority,r.azureCloudOptions)];case 3:return o=c.sent(),this.logger.verbose("Auth code client created"),this.performanceClient.setPreQueueTime(i.SilentIframeClientTokenHelper,e.correlationId),[4,this.silentTokenHelper(o,r).then(function(e){return t.endMeasurement({success:!0,fromCache:!1,requestId:e.requestId}),e})];case 4:return[2,c.sent()];case 5:throw(a=c.sent())instanceof ae&&a.setCorrelationId(this.correlationId),n.cacheFailedRequest(a),this.browserStorage.cleanRequestByState(r.state),t.endMeasurement({errorCode:a instanceof ae&&a.errorCode||void 0,subErrorCode:a instanceof ae&&a.subError||void 0,success:!1}),a;case 6:return[2]}})})},t.prototype.logout=function(){return Promise.reject(Dr.createSilentLogoutUnsupportedError())},t.prototype.silentTokenHelper=function(e,t){return u(this,void 0,void 0,function(){var r,n,o,a,c,u,h,d,p,f=this;return l(this,function(l){switch(l.label){case 0:return this.performanceClient.addQueueMeasurement(i.SilentIframeClientTokenHelper,t.correlationId),this.performanceClient.setPreQueueTime(i.StandardInteractionClientInitializeAuthorizationCodeRequest,t.correlationId),[4,this.initializeAuthorizationCodeRequest(t)];case 1:return r=l.sent(),this.performanceClient.setPreQueueTime(i.GetAuthCodeUrl,t.correlationId),[4,e.getAuthCodeUrl(s(s({},t),{nativeBroker:Vo.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)}))];case 2:return n=l.sent(),o=new ei(e,this.browserStorage,r,this.logger,this.config.system,this.performanceClient),this.performanceClient.setPreQueueTime(i.SilentHandlerInitiateAuthRequest,t.correlationId),[4,o.initiateAuthRequest(n)];case 3:return a=l.sent(),this.performanceClient.setPreQueueTime(i.SilentHandlerMonitorIframeForHash,t.correlationId),[4,o.monitorIframeForHash(a,this.config.system.iframeHashTimeout)];case 4:if(c=l.sent(),u=$n.getDeserializedHash(c),h=this.validateAndExtractStateFromHash(u,mt.Silent,r.correlationId),u.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Dr.createNativeConnectionNotEstablishedError();return d=new Qo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,u.accountId,this.browserStorage,this.correlationId),p=Vn.parseRequestState(this.browserCrypto,h).userRequestState,[2,d.acquireToken(s(s({},t),{state:p,prompt:t.prompt||R.NONE})).finally(function(){f.browserStorage.cleanRequestByState(h)})]}return this.performanceClient.setPreQueueTime(i.HandleCodeResponseFromHash,t.correlationId),[2,o.handleCodeResponseFromHash(c,h,e.authority,this.networkClient)]}})})},t}(qo),ri=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.acquireToken=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,a,c=this;return l(this,function(u){switch(u.label){case 0:return this.performanceClient.addQueueMeasurement(i.SilentRefreshClientAcquireToken,e.correlationId),this.performanceClient.setPreQueueTime(i.InitializeBaseRequest,e.correlationId),r=[s({},e)],[4,this.initializeBaseRequest(e,e.account)];case 1:return t=s.apply(void 0,r.concat([u.sent()])),n=this.performanceClient.startMeasurement(i.SilentRefreshClientAcquireToken,t.correlationId),o=this.initializeServerTelemetryManager(gt.acquireTokenSilent_silentFlow),[4,this.createRefreshTokenClient(o,t.authority,t.azureCloudOptions)];case 2:return a=u.sent(),this.logger.verbose("Refresh token client created"),this.performanceClient.setPreQueueTime(i.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),[2,a.acquireTokenByRefreshToken(t).then(function(e){return n.endMeasurement({success:!0,fromCache:e.fromCache,requestId:e.requestId}),e}).catch(function(e){throw e instanceof ae&&e.setCorrelationId(c.correlationId),o.cacheFailedRequest(e),n.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e})]}})})},t.prototype.logout=function(){return Promise.reject(Dr.createSilentLogoutUnsupportedError())},t.prototype.createRefreshTokenClient=function(e,t,r){return u(this,void 0,void 0,function(){var n;return l(this,function(o){switch(o.label){case 0:return this.performanceClient.setPreQueueTime(i.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(e,t,r)];case 1:return n=o.sent(),[2,new Go(n,this.performanceClient)]}})})},t}(qo),ni=function(){function e(e,t,r,n){this.isBrowserEnvironment="undefined"!=typeof window,this.config=e,this.storage=t,this.logger=r,this.cryptoObj=n}return e.prototype.loadExternalTokens=function(e,t,r){if(this.logger.info("TokenCache - loadExternalTokens called"),!t.id_token)throw Dr.createUnableToLoadTokenError("Please ensure server response includes id token.");var n,o,i,a=new Ln(t.id_token,this.cryptoObj);if(e.account)i=yt.createFromAccountInfo(e.account),n=new Jn(i,this.loadIdToken(a,i.homeAccountId,e.account.environment,e.account.tenantId),this.loadAccessToken(e,t,i.homeAccountId,e.account.environment,e.account.tenantId,r),this.loadRefreshToken(e,t,i.homeAccountId,e.account.environment));else{if(!e.authority)throw Dr.createUnableToLoadTokenError("Please provide a request with an account or a request with authority.");var s=Uo.generateAuthority(e.authority,e.azureCloudOptions),c={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};if(o=new Uo(s,this.config.system.networkClient,this.storage,c,this.logger),r.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),i=this.loadAccount(a,o,r.clientInfo),n=new Jn(i,this.loadIdToken(a,i.homeAccountId,o.hostnameAndPort,o.tenant),this.loadAccessToken(e,t,i.homeAccountId,o.hostnameAndPort,o.tenant,r),this.loadRefreshToken(e,t,i.homeAccountId,o.hostnameAndPort));else{if(!t.client_info)throw Dr.createUnableToLoadTokenError("Please provide clientInfo in the response or options.");this.logger.trace("TokenCache - homeAccountId from response"),i=this.loadAccount(a,o,t.client_info),n=new Jn(i,this.loadIdToken(a,i.homeAccountId,o.hostnameAndPort,o.tenant),this.loadAccessToken(e,t,i.homeAccountId,o.hostnameAndPort,o.tenant,r),this.loadRefreshToken(e,t,i.homeAccountId,o.hostnameAndPort))}}return this.generateAuthenticationResult(e,a,n,i,o)},e.prototype.loadAccount=function(e,t,r,n){var o;if(n?o=n:void 0!==t.authorityType&&r&&(o=yt.generateHomeAccountId(r,t.authorityType,this.logger,this.cryptoObj,e.claims)),!o)throw Dr.createUnableToLoadTokenError("Unexpected missing homeAccountId");var i=yt.createAccount({homeAccountId:o,idTokenClaims:e.claims,clientInfo:r,environment:t.hostnameAndPort},t);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading account"),this.storage.setAccount(i),i;throw Dr.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.loadIdToken=function(e,t,r,n){var o=hn.createIdTokenEntity(t,r,e.rawToken,this.config.auth.clientId,n);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(o),o;throw Dr.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.loadAccessToken=function(e,t,r,n,o,i){if(!t.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!t.expires_in)throw Dr.createUnableToLoadTokenError("Please ensure server response includes expires_in value.");if(!i.extendedExpiresOn)throw Dr.createUnableToLoadTokenError("Please provide an extendedExpiresOn value in the options.");var a=new Un(e.scopes).printScopes(),s=i.expiresOn||t.expires_in+(new Date).getTime()/1e3,c=i.extendedExpiresOn,u=Kn.createAccessTokenEntity(r,n,t.access_token,this.config.auth.clientId,o,a,s,c,this.cryptoObj);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(u),u;throw Dr.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.loadRefreshToken=function(e,t,r,n){if(!t.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;var o=jn.createRefreshTokenEntity(r,n,t.refresh_token,this.config.auth.clientId);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(o),o;throw Dr.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.generateAuthenticationResult=function(e,t,r,n,o){var i,a,s=S.EMPTY_STRING,c=[],u=null;r.accessToken&&(s=r.accessToken.secret,c=Un.fromString(r.accessToken.target).asArray(),u=new Date(1e3*Number(r.accessToken.expiresOn)),a=new Date(1e3*Number(r.accessToken.extendedExpiresOn)));var l=(null==t?void 0:t.claims.oid)||(null==t?void 0:t.claims.sub)||S.EMPTY_STRING,h=(null==t?void 0:t.claims.tid)||S.EMPTY_STRING;return{authority:o?o.canonicalAuthority:S.EMPTY_STRING,uniqueId:l,tenantId:h,scopes:c,account:n?n.getAccountInfo():null,idToken:t?t.rawToken:S.EMPTY_STRING,idTokenClaims:t?t.claims:{},accessToken:s,fromCache:!0,expiresOn:u,correlationId:e.correlationId||S.EMPTY_STRING,requestId:S.EMPTY_STRING,extExpiresOn:a,familyId:S.EMPTY_STRING,tokenType:(null===(i=null==r?void 0:r.accessToken)||void 0===i?void 0:i.tokenType)||S.EMPTY_STRING,state:S.EMPTY_STRING,cloudGraphHostName:n.cloudGraphHostName||S.EMPTY_STRING,msGraphHost:n.msGraphHost||S.EMPTY_STRING,code:void 0,fromNativeBroker:!1}},e}(),oi=function(e){function t(t){var r=e.call(this,t)||this;return r.includeRedirectUri=!1,r}return o(t,e),t}(Oo),ii=function(e){function t(t,r,n,o,i,a,s,c,u,l){var h=e.call(this,t,r,n,o,i,a,c,u,l)||this;return h.apiId=s,h}return o(t,e),t.prototype.acquireToken=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,a,c;return l(this,function(u){switch(u.label){case 0:if(this.logger.trace("SilentAuthCodeClient.acquireToken called"),!e.code)throw Dr.createAuthCodeRequiredError();return this.performanceClient.setPreQueueTime(i.StandardInteractionClientInitializeAuthorizationRequest,e.correlationId),[4,this.initializeAuthorizationRequest(e,mt.Silent)];case 1:t=u.sent(),this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||S.EMPTY_STRING,t.account||null),r=this.initializeServerTelemetryManager(this.apiId),u.label=2;case 2:return u.trys.push([2,4,,5]),n=s(s({},t),{code:e.code}),this.performanceClient.setPreQueueTime(i.StandardInteractionClientGetClientConfiguration,e.correlationId),[4,this.getClientConfiguration(r,t.authority)];case 3:return o=u.sent(),a=new oi(o),this.logger.verbose("Auth code client created"),[2,new ei(a,this.browserStorage,n,this.logger,this.config.system,this.performanceClient).handleCodeResponseFromServer({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t.state,a.authority,this.networkClient,!1)];case 4:throw(c=u.sent())instanceof ae&&c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c),this.browserStorage.cleanRequestByState(t.state),c;case 5:return[2]}})})},t.prototype.logout=function(){return Promise.reject(Dr.createSilentLogoutUnsupportedError())},t}(qo),ai=function(){function e(t,r){this.correlationId=r,this.measureName=e.makeMeasureName(t,r),this.startMark=e.makeStartMark(t,r),this.endMark=e.makeEndMark(t,r)}return e.makeMeasureName=function(e,t){return"msal.measure."+e+"."+t},e.makeStartMark=function(e,t){return"msal.start."+e+"."+t},e.makeEndMark=function(e,t){return"msal.end."+e+"."+t},e.supportsBrowserPerformance=function(){return"undefined"!=typeof window&&void 0!==window.performance&&"function"==typeof window.performance.mark&&"function"==typeof window.performance.measure&&"function"==typeof window.performance.clearMarks&&"function"==typeof window.performance.clearMeasures&&"function"==typeof window.performance.getEntriesByName},e.flushMeasurements=function(t,r){if(e.supportsBrowserPerformance())try{r.forEach(function(r){var n=e.makeMeasureName(r.name,t);window.performance.getEntriesByName(n,"measure").length>0&&(window.performance.clearMeasures(n),window.performance.clearMarks(e.makeStartMark(n,t)),window.performance.clearMarks(e.makeEndMark(n,t)))})}catch(e){}},e.prototype.startMeasurement=function(){if(e.supportsBrowserPerformance())try{window.performance.mark(this.startMark)}catch(e){}},e.prototype.endMeasurement=function(){if(e.supportsBrowserPerformance())try{window.performance.mark(this.endMark),window.performance.measure(this.measureName,this.startMark,this.endMark)}catch(e){}},e.prototype.flushMeasurement=function(){if(e.supportsBrowserPerformance())try{var t=window.performance.getEntriesByName(this.measureName,"measure");if(t.length>0){var r=t[0].duration;return window.performance.clearMeasures(this.measureName),window.performance.clearMarks(this.startMark),window.performance.clearMarks(this.endMark),r}}catch(e){}return null},e}(),si=function(e){function t(t,r,n,o,i,a,s){var c=e.call(this,t,r,n,o,i,a)||this;return c.browserCrypto=new Xr(c.logger,s),c.guidGenerator=new qt(c.browserCrypto),c}return o(t,e),t.prototype.startPerformanceMeasuremeant=function(e,t){return new ai(e,t)},t.prototype.generateId=function(){return this.guidGenerator.generateGuid()},t.prototype.getPageVisibility=function(){var e;return(null===(e=document.visibilityState)||void 0===e?void 0:e.toString())||null},t.prototype.deleteIncompleteSubMeasurements=function(e){var t=this.eventsByCorrelationId.get(e.event.correlationId),r=t&&t.eventId===e.event.eventId,n=[];r&&(null==t?void 0:t.incompleteSubMeasurements)&&t.incompleteSubMeasurements.forEach(function(e){n.push(s({},e))}),n.length>0&&ai.flushMeasurements(e.event.correlationId,n)},t.prototype.supportsBrowserPerformanceNow=function(){return"undefined"!=typeof window&&void 0!==window.performance&&"function"==typeof window.performance.now},t.prototype.startMeasurement=function(t,r){var n=this,o=this.getPageVisibility(),i=e.prototype.startMeasurement.call(this,t,r);return s(s({},i),{endMeasurement:function(e){var t=i.endMeasurement(s({startPageVisibility:o,endPageVisibility:n.getPageVisibility()},e));return n.deleteIncompleteSubMeasurements(i),t},discardMeasurement:function(){i.discardMeasurement(),n.deleteIncompleteSubMeasurements(i),i.measurement.flushMeasurement()}})},t.prototype.setPreQueueTime=function(e,t){if(this.supportsBrowserPerformanceNow())if(t){var r=this.preQueueTimeByCorrelationId.get(t);r&&(this.logger.trace("BrowserPerformanceClient: Incomplete pre-queue "+r.name+" found",t),this.addQueueMeasurement(r.name,t,void 0,!0)),this.preQueueTimeByCorrelationId.set(t,{name:e,time:window.performance.now()})}else this.logger.trace("BrowserPerformanceClient: correlationId for "+e+" not provided, unable to set telemetry queue time");else this.logger.trace("BrowserPerformanceClient: window performance API not available, unable to set telemetry queue time for "+e)},t.prototype.addQueueMeasurement=function(t,r,n,o){if(this.supportsBrowserPerformanceNow())if(r){var i=e.prototype.getPreQueueTime.call(this,t,r);if(i){var a=window.performance.now(),s=n||e.prototype.calculateQueuedTime.call(this,i,a);return e.prototype.addQueueMeasurement.call(this,t,r,s,o)}}else this.logger.trace("BrowserPerformanceClient: correlationId for "+t+" not provided, unable to add queue measurement");else this.logger.trace("BrowserPerformanceClient: window performance API not available, unable to add queue measurement for "+t)},t}(an),ci=function(e){function t(t){var r=e.call(this,t)||this;return r.astsAsyncMeasurement=void 0,r.activeSilentTokenRequests=new Map,r.trackPageVisibility=r.trackPageVisibility.bind(r),r}return o(t,e),t.prototype.loginRedirect=function(e){return u(this,void 0,void 0,function(){var t;return l(this,function(r){return t=this.getRequestCorrelationId(e),this.logger.verbose("loginRedirect called",t),[2,this.acquireTokenRedirect(s({correlationId:t},e||Rt))]})})},t.prototype.loginPopup=function(e){var t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(s({correlationId:t},e||Rt))},t.prototype.acquireTokenSilent=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,a,c,u,h=this;return l(this,function(l){if(t=this.getRequestCorrelationId(e),(r=this.performanceClient.startMeasurement(i.AcquireTokenSilent,t)).addStaticFields({cacheLookupPolicy:e.cacheLookupPolicy}),this.preflightBrowserEnvironmentCheck(mt.Silent),this.logger.verbose("acquireTokenSilent called",t),!(n=e.account||this.getActiveAccount()))throw Dr.createNoAccountError();return o={clientId:this.config.auth.clientId,authority:e.authority||S.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:n.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},a=JSON.stringify(o),void 0===(c=this.activeSilentTokenRequests.get(a))?(this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t),this.performanceClient.setPreQueueTime(i.AcquireTokenSilentAsync,t),u=this.acquireTokenSilentAsync(s(s({},e),{correlationId:t}),n).then(function(t){return h.activeSilentTokenRequests.delete(a),r.addStaticFields({accessTokenSize:t.accessToken.length,idTokenSize:t.idToken.length}),r.endMeasurement({success:!0,fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:t.requestId}),t}).catch(function(e){throw h.activeSilentTokenRequests.delete(a),r.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e}),this.activeSilentTokenRequests.set(a,u),[2,u]):(this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),r.discardMeasurement(),[2,c])})})},t.prototype.trackPageVisibility=function(){this.astsAsyncMeasurement&&(this.logger.info("Perf: Visibility change detected"),this.astsAsyncMeasurement.increment({visibilityChangeCount:1}))},t.prototype.acquireTokenSilentAsync=function(e,t){var r;return u(this,void 0,void 0,function(){var n,o,a,c,h,d=this;return l(this,function(p){switch(p.label){case 0:return this.performanceClient.addQueueMeasurement(i.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_START,mt.Silent,e),this.astsAsyncMeasurement=this.performanceClient.startMeasurement(i.AcquireTokenSilentAsync,e.correlationId),null===(r=this.astsAsyncMeasurement)||void 0===r||r.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibility),Vo.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&t.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),o=s(s({},e),{account:t}),n=this.acquireTokenNative(o,gt.acquireTokenSilent_silentFlow).catch(function(t){return u(d,void 0,void 0,function(){return l(this,function(r){if(t instanceof jo&&t.isFatal())return this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,[2,this.createSilentIframeClient(e.correlationId).acquireToken(e)];throw t})})}),[3,3]):[3,1];case 1:return this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),a=this.createSilentCacheClient(e.correlationId),this.performanceClient.setPreQueueTime(i.InitializeSilentRequest,e.correlationId),[4,a.initializeSilentRequest(e,t)];case 2:c=p.sent(),h=s(s({},e),{cacheLookupPolicy:e.cacheLookupPolicy||Pt.Default}),this.performanceClient.setPreQueueTime(i.AcquireTokenFromCache,c.correlationId),n=this.acquireTokenFromCache(a,c,h).catch(function(t){if(h.cacheLookupPolicy===Pt.AccessToken)throw t;return fo.blockReloadInHiddenIframes(),d.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_NETWORK_START,mt.Silent,c),d.performanceClient.setPreQueueTime(i.AcquireTokenByRefreshToken,c.correlationId),d.acquireTokenByRefreshToken(c,h).catch(function(t){var r=t instanceof se,n=t instanceof de,o=t.errorCode===le.code,a=t.errorCode===wt;if((!r||!a||n||h.cacheLookupPolicy===Pt.AccessTokenAndRefreshToken||h.cacheLookupPolicy===Pt.RefreshToken)&&h.cacheLookupPolicy!==Pt.Skip&&!o)throw t;return d.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",e.correlationId),d.performanceClient.setPreQueueTime(i.AcquireTokenBySilentIframe,c.correlationId),d.acquireTokenBySilentIframe(c)})}),p.label=3;case 3:return[2,n.then(function(e){var t;return d.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_SUCCESS,mt.Silent,e),null===(t=d.astsAsyncMeasurement)||void 0===t||t.endMeasurement({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker,requestId:e.requestId}),e}).catch(function(e){var t;throw d.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_FAILURE,mt.Silent,null,e),null===(t=d.astsAsyncMeasurement)||void 0===t||t.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e}).finally(function(){document.removeEventListener("visibilitychange",d.trackPageVisibility)})]}})})},t.prototype.hydrateCache=function(e,t){return u(this,void 0,void 0,function(){var r;return l(this,function(n){return this.logger.verbose("hydrateCache called"),e.account?(r=yt.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost),this.browserStorage.setAccount(r),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),[2,this.nativeInternalStorage.hydrateCache(e,t)]):[2,this.browserStorage.hydrateCache(e,t)]):[2]})})},t}(function(){function e(e){var t,r,n,o,i,a,c,u,l,h,d,p,f,g,m;this.isBrowserEnvironment="undefined"!=typeof window,this.config=(t=e,r=this.isBrowserEnvironment,n=t.auth,o=t.cache,i=t.system,a=t.telemetry,c={clientId:S.EMPTY_STRING,authority:""+S.DEFAULT_AUTHORITY,knownAuthorities:[],cloudDiscoveryMetadata:S.EMPTY_STRING,authorityMetadata:S.EMPTY_STRING,redirectUri:S.EMPTY_STRING,postLogoutRedirectUri:S.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ne.AAD,azureCloudOptions:{azureCloudInstance:Xn.None,tenant:S.EMPTY_STRING},skipAuthorityMetadataCache:!1},u={cacheLocation:lt.SessionStorage,temporaryCacheLocation:lt.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!o||o.cacheLocation!==lt.LocalStorage),claimsBasedCachingEnabled:!0},l={loggerCallback:function(){},logLevel:en.Info,piiLoggingEnabled:!1},h=s(s({},ro),{loggerOptions:l,networkClient:r?fo.getBrowserNetworkClient():lo,navigationClient:new go,loadFrameTimeout:0,windowHashTimeout:(null==i?void 0:i.loadFrameTimeout)||6e4,iframeHashTimeout:(null==i?void 0:i.loadFrameTimeout)||mo,navigateFrameWait:r&&fo.detectIEOrEdge()?500:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(null==i?void 0:i.nativeBrokerHandshakeTimeout)||2e3,pollIntervalMilliseconds:Et,cryptoOptions:{useMsrCrypto:!1,entropy:void 0}}),d=s(s({},i),{loggerOptions:(null==i?void 0:i.loggerOptions)||l}),p={application:{appName:S.EMPTY_STRING,appVersion:S.EMPTY_STRING}},{auth:s(s({},c),n),cache:s(s({},u),o),system:s(s({},h),d),telemetry:s(s({},p),a)}),this.initialized=!1,this.logger=new on(this.config.system.loggerOptions,yo,wo),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.isBrowserEnvironment?new si(this.config.auth.clientId,this.config.auth.authority,this.logger,yo,wo,this.config.telemetry.application,this.config.system.cryptoOptions):new cn(this.config.auth.clientId,this.config.auth.authority,this.logger,yo,wo,this.config.telemetry.application),this.browserCrypto=this.isBrowserEnvironment?new rn(this.logger,this.performanceClient,this.config.system.cryptoOptions):un,this.eventHandler=new bo(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new to(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger):(f=this.config.auth.clientId,g=this.logger,m={cacheLocation:lt.MemoryStorage,temporaryCacheLocation:lt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!0},new to(f,m,un,g));var v={cacheLocation:lt.MemoryStorage,temporaryCacheLocation:lt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!0};this.nativeInternalStorage=new to(this.config.auth.clientId,v,this.browserCrypto,this.logger),this.tokenCache=new ni(this.config,this.browserStorage,this.logger,this.browserCrypto),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}return e.prototype.initialize=function(){return u(this,void 0,void 0,function(){var e,t,r,n,o;return l(this,function(a){switch(a.label){case 0:if(this.logger.trace("initialize called"),this.initialized)return this.logger.info("initialize has already been called, exiting early."),[2];if(e=this.config.system.allowNativeBroker,t=this.performanceClient.startMeasurement(i.InitializeClientApplication),this.eventHandler.emitEvent(vo.INITIALIZE_START),!e)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),r=this,[4,Vo.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)];case 2:return r.nativeExtensionProvider=a.sent(),[3,4];case 3:return n=a.sent(),this.logger.verbose(n),[3,4];case 4:return this.config.cache.claimsBasedCachingEnabled?[3,6]:(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),o=this.performanceClient.startMeasurement(i.ClearTokensAndKeysWithClaims),[4,this.browserStorage.clearTokensAndKeysWithClaims()]);case 5:a.sent(),o.endMeasurement({success:!0}),a.label=6;case 6:return this.initialized=!0,this.eventHandler.emitEvent(vo.INITIALIZE_END),t.endMeasurement({allowNativeBroker:e,success:!0}),[2]}})})},e.prototype.handleRedirectPromise=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,i,a,s,c,u=this;return l(this,function(l){return this.logger.verbose("handleRedirectPromise called"),fo.blockNativeBrokerCalledBeforeInitialized(this.config.system.allowNativeBroker,this.initialized),t=this.getAllAccounts(),this.isBrowserEnvironment?(r=e||S.EMPTY_STRING,void 0===(n=this.redirectResponse.get(r))?(this.eventHandler.emitEvent(vo.HANDLE_REDIRECT_START,mt.Redirect),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise"),o=this.browserStorage.getCachedNativeRequest(),i=void 0,o&&Vo.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e?(this.logger.trace("handleRedirectPromise - acquiring token from native platform"),a=new Qo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,gt.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,o.accountId,this.nativeInternalStorage,o.correlationId),i=a.handleRedirectPromise()):(this.logger.trace("handleRedirectPromise - acquiring token from web flow"),s=this.browserStorage.getTemporaryCache(dt.CORRELATION_ID,!0)||S.EMPTY_STRING,c=this.createRedirectClient(s),i=c.handleRedirectPromise(e)),n=i.then(function(e){e&&(t.length<u.getAllAccounts().length?(u.eventHandler.emitEvent(vo.LOGIN_SUCCESS,mt.Redirect,e),u.logger.verbose("handleRedirectResponse returned result, login success")):(u.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_SUCCESS,mt.Redirect,e),u.logger.verbose("handleRedirectResponse returned result, acquire token success")));return u.eventHandler.emitEvent(vo.HANDLE_REDIRECT_END,mt.Redirect),e}).catch(function(e){throw t.length>0?u.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_FAILURE,mt.Redirect,null,e):u.eventHandler.emitEvent(vo.LOGIN_FAILURE,mt.Redirect,null,e),u.eventHandler.emitEvent(vo.HANDLE_REDIRECT_END,mt.Redirect),e}),this.redirectResponse.set(r,n)):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),[2,n]):(this.logger.verbose("handleRedirectPromise returns null, not browser environment"),[2,null])})})},e.prototype.acquireTokenRedirect=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,i,a=this;return l(this,function(s){return t=this.getRequestCorrelationId(e),this.logger.verbose("acquireTokenRedirect called",t),this.preflightBrowserEnvironmentCheck(mt.Redirect),(r=this.getAllAccounts().length>0)?this.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_START,mt.Redirect,e):this.eventHandler.emitEvent(vo.LOGIN_START,mt.Redirect,e),this.nativeExtensionProvider&&this.canUseNative(e)?(o=new Qo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,gt.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId),n=o.acquireTokenRedirect(e).catch(function(t){if(t instanceof jo&&t.isFatal())return a.nativeExtensionProvider=void 0,a.createRedirectClient(e.correlationId).acquireToken(e);if(t instanceof de)return a.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),a.createRedirectClient(e.correlationId).acquireToken(e);throw a.browserStorage.setInteractionInProgress(!1),t})):(i=this.createRedirectClient(e.correlationId),n=i.acquireToken(e)),[2,n.catch(function(e){throw r?a.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_FAILURE,mt.Redirect,null,e):a.eventHandler.emitEvent(vo.LOGIN_FAILURE,mt.Redirect,null,e),e})]})})},e.prototype.acquireTokenPopup=function(e){var t=this,r=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(i.AcquireTokenPopup,r);try{this.logger.verbose("acquireTokenPopup called",r),this.preflightBrowserEnvironmentCheck(mt.Popup)}catch(e){return Promise.reject(e)}var o,a=this.getAllAccounts();(a.length>0?this.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_START,mt.Popup,e):this.eventHandler.emitEvent(vo.LOGIN_START,mt.Popup,e),this.canUseNative(e))?o=this.acquireTokenNative(e,gt.acquireTokenPopup).then(function(e){return t.browserStorage.setInteractionInProgress(!1),n.endMeasurement({success:!0,isNativeBroker:!0,requestId:e.requestId}),e}).catch(function(r){if(r instanceof jo&&r.isFatal())return t.nativeExtensionProvider=void 0,t.createPopupClient(e.correlationId).acquireToken(e);if(r instanceof de)return t.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),t.createPopupClient(e.correlationId).acquireToken(e);throw t.browserStorage.setInteractionInProgress(!1),r}):o=this.createPopupClient(e.correlationId).acquireToken(e);return o.then(function(e){return a.length<t.getAllAccounts().length?t.eventHandler.emitEvent(vo.LOGIN_SUCCESS,mt.Popup,e):t.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_SUCCESS,mt.Popup,e),n.addStaticFields({accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length}),n.endMeasurement({success:!0,requestId:e.requestId}),e}).catch(function(e){return a.length>0?t.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_FAILURE,mt.Popup,null,e):t.eventHandler.emitEvent(vo.LOGIN_FAILURE,mt.Popup,null,e),n.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),Promise.reject(e)})},e.prototype.trackPageVisibilityWithMeasurement=function(){var e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))},e.prototype.ssoSilent=function(e){var t;return u(this,void 0,void 0,function(){var r,n,o,a,c=this;return l(this,function(u){return r=this.getRequestCorrelationId(e),n=s(s({},e),{prompt:e.prompt,correlationId:r}),this.preflightBrowserEnvironmentCheck(mt.Silent),this.ssoSilentMeasurement=this.performanceClient.startMeasurement(i.SsoSilent,r),null===(t=this.ssoSilentMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",r),this.eventHandler.emitEvent(vo.SSO_SILENT_START,mt.Silent,n),this.canUseNative(n)?o=this.acquireTokenNative(n,gt.ssoSilent).catch(function(e){if(e instanceof jo&&e.isFatal())return c.nativeExtensionProvider=void 0,c.createSilentIframeClient(n.correlationId).acquireToken(n);throw e}):(a=this.createSilentIframeClient(n.correlationId),o=a.acquireToken(n)),[2,o.then(function(e){var t,r;return c.eventHandler.emitEvent(vo.SSO_SILENT_SUCCESS,mt.Silent,e),null===(t=c.ssoSilentMeasurement)||void 0===t||t.addStaticFields({accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length}),null===(r=c.ssoSilentMeasurement)||void 0===r||r.endMeasurement({success:!0,isNativeBroker:e.fromNativeBroker,requestId:e.requestId}),e}).catch(function(e){var t;throw c.eventHandler.emitEvent(vo.SSO_SILENT_FAILURE,mt.Silent,null,e),null===(t=c.ssoSilentMeasurement)||void 0===t||t.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e}).finally(function(){document.removeEventListener("visibilitychange",c.trackPageVisibilityWithMeasurement)})]})})},e.prototype.acquireTokenByCode=function(e){return u(this,void 0,void 0,function(){var t,r,n,o,a=this;return l(this,function(c){t=this.getRequestCorrelationId(e),this.preflightBrowserEnvironmentCheck(mt.Silent),this.logger.trace("acquireTokenByCode called",t),this.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_BY_CODE_START,mt.Silent,e),r=this.performanceClient.startMeasurement(i.AcquireTokenByCode,e.correlationId);try{if(e.code&&e.nativeAccountId)throw Dr.createSpaCodeAndNativeAccountIdPresentError();if(e.code)return n=e.code,(o=this.hybridAuthCodeResponses.get(n))?(this.logger.verbose("Existing acquireTokenByCode request found",e.correlationId),r.discardMeasurement()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync(s(s({},e),{correlationId:t})).then(function(e){return a.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_BY_CODE_SUCCESS,mt.Silent,e),a.hybridAuthCodeResponses.delete(n),r.addStaticFields({accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length}),r.endMeasurement({success:!0,isNativeBroker:e.fromNativeBroker,requestId:e.requestId}),e}).catch(function(e){throw a.hybridAuthCodeResponses.delete(n),a.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_BY_CODE_FAILURE,mt.Silent,null,e),r.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e}),this.hybridAuthCodeResponses.set(n,o)),[2,o];if(e.nativeAccountId){if(this.canUseNative(e,e.nativeAccountId))return[2,this.acquireTokenNative(e,gt.acquireTokenByCode,e.nativeAccountId).catch(function(e){throw e instanceof jo&&e.isFatal()&&(a.nativeExtensionProvider=void 0),e})];throw Dr.createUnableToAcquireTokenFromNativePlatformError()}throw Dr.createAuthCodeOrNativeAccountIdRequiredError()}catch(e){throw this.eventHandler.emitEvent(vo.ACQUIRE_TOKEN_BY_CODE_FAILURE,mt.Silent,null,e),r.endMeasurement({errorCode:e instanceof ae&&e.errorCode||void 0,subErrorCode:e instanceof ae&&e.subError||void 0,success:!1}),e}return[2]})})},e.prototype.acquireTokenByCodeAsync=function(e){var t;return u(this,void 0,void 0,function(){var r=this;return l(this,function(n){switch(n.label){case 0:return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(i.AcquireTokenByCodeAsync,e.correlationId),null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),[4,this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(function(e){var t;return null===(t=r.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.endMeasurement({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker,requestId:e.requestId}),e}).catch(function(e){var t;throw null===(t=r.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.endMeasurement({errorCode:e.errorCode,subErrorCode:e.subError,success:!1}),e}).finally(function(){document.removeEventListener("visibilitychange",r.trackPageVisibilityWithMeasurement)})];case 1:return[2,n.sent()]}})})},e.prototype.acquireTokenFromCache=function(e,t,r){return u(this,void 0,void 0,function(){return l(this,function(n){switch(this.performanceClient.addQueueMeasurement(i.AcquireTokenFromCache,t.correlationId),r.cacheLookupPolicy){case Pt.Default:case Pt.AccessToken:case Pt.AccessTokenAndRefreshToken:return[2,e.acquireToken(t)];default:throw it.createRefreshRequiredError()}return[2]})})},e.prototype.acquireTokenByRefreshToken=function(e,t){return u(this,void 0,void 0,function(){var r;return l(this,function(n){switch(this.performanceClient.addQueueMeasurement(i.AcquireTokenByRefreshToken,e.correlationId),t.cacheLookupPolicy){case Pt.Default:case Pt.AccessTokenAndRefreshToken:case Pt.RefreshToken:case Pt.RefreshTokenAndNetwork:return r=this.createSilentRefreshClient(e.correlationId),this.performanceClient.setPreQueueTime(i.SilentRefreshClientAcquireToken,e.correlationId),[2,r.acquireToken(e)];default:throw it.createRefreshRequiredError()}return[2]})})},e.prototype.acquireTokenBySilentIframe=function(e){return u(this,void 0,void 0,function(){var t;return l(this,function(r){return this.performanceClient.addQueueMeasurement(i.AcquireTokenBySilentIframe,e.correlationId),t=this.createSilentIframeClient(e.correlationId),this.performanceClient.setPreQueueTime(i.SilentIframeClientAcquireToken,e.correlationId),[2,t.acquireToken(e)]})})},e.prototype.logout=function(e){return u(this,void 0,void 0,function(){var t;return l(this,function(r){return t=this.getRequestCorrelationId(e),this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),[2,this.logoutRedirect(s({correlationId:t},e))]})})},e.prototype.logoutRedirect=function(e){return u(this,void 0,void 0,function(){var t;return l(this,function(r){return t=this.getRequestCorrelationId(e),this.preflightBrowserEnvironmentCheck(mt.Redirect),[2,this.createRedirectClient(t).logout(e)]})})},e.prototype.logoutPopup=function(e){try{var t=this.getRequestCorrelationId(e);return this.preflightBrowserEnvironmentCheck(mt.Popup),this.createPopupClient(t).logout(e)}catch(e){return Promise.reject(e)}},e.prototype.getAllAccounts=function(){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts():[]},e.prototype.getAccountByUsername=function(e){if(this.logger.trace("getAccountByUsername called"),!e)return this.logger.warning("getAccountByUsername: No username provided"),null;var t=this.browserStorage.getAccountInfoFilteredBy({username:e});return t?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: "+e),t):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null)},e.prototype.getAccountByHomeId=function(e){if(this.logger.trace("getAccountByHomeId called"),!e)return this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null;var t=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:e});return t?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: "+e),t):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null)},e.prototype.getAccountByLocalId=function(e){if(this.logger.trace("getAccountByLocalId called"),!e)return this.logger.warning("getAccountByLocalId: No localAccountId provided"),null;var t=this.browserStorage.getAccountInfoFilteredBy({localAccountId:e});return t?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: "+e),t):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null)},e.prototype.setActiveAccount=function(e){this.browserStorage.setActiveAccount(e)},e.prototype.getActiveAccount=function(){return this.browserStorage.getActiveAccount()},e.prototype.preflightBrowserEnvironmentCheck=function(e,t){if(void 0===t&&(t=!0),this.logger.verbose("preflightBrowserEnvironmentCheck started"),fo.blockNonBrowserEnvironment(this.isBrowserEnvironment),fo.blockRedirectInIframe(e,this.config.system.allowRedirectInIframe),fo.blockReloadInHiddenIframes(),fo.blockAcquireTokenInPopups(),fo.blockNativeBrokerCalledBeforeInitialized(this.config.system.allowNativeBroker,this.initialized),e===mt.Redirect&&this.config.cache.cacheLocation===lt.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw Wr.createInMemoryRedirectUnavailableError();e!==mt.Redirect&&e!==mt.Popup||this.preflightInteractiveRequest(t)},e.prototype.preflightInteractiveRequest=function(e){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),fo.blockReloadInHiddenIframes(),e&&this.browserStorage.setInteractionInProgress(!0)},e.prototype.acquireTokenNative=function(e,t,r){return u(this,void 0,void 0,function(){return l(this,function(n){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw Dr.createNativeConnectionNotEstablishedError();return[2,new Qo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)]})})},e.prototype.canUseNative=function(e,t){if(this.logger.trace("canUseNative called"),!Vo.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case R.NONE:case R.CONSENT:case R.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace("canUseNative: prompt = "+e.prompt+" is not compatible with native flow, returning false"),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1)},e.prototype.getNativeAccountId=function(e){var t=e.account||this.browserStorage.getAccountInfoByHints(e.loginHint,e.sid)||this.getActiveAccount();return t&&t.nativeAccountId||""},e.prototype.createPopupClient=function(e){return new Jo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)},e.prototype.createRedirectClient=function(e){return new $o(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)},e.prototype.createSilentIframeClient=function(e){return new ti(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,gt.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)},e.prototype.createSilentCacheClient=function(e){return new Wo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.createSilentRefreshClient=function(e){return new ri(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.createSilentAuthCodeClient=function(e){return new ii(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,gt.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)},e.prototype.addEventCallback=function(e){return this.eventHandler.addEventCallback(e)},e.prototype.removeEventCallback=function(e){this.eventHandler.removeEventCallback(e)},e.prototype.addPerformanceCallback=function(e){return this.performanceClient.addPerformanceCallback(e)},e.prototype.removePerformanceCallback=function(e){return this.performanceClient.removePerformanceCallback(e)},e.prototype.enableAccountStorageEvents=function(){this.eventHandler.enableAccountStorageEvents()},e.prototype.disableAccountStorageEvents=function(){this.eventHandler.disableAccountStorageEvents()},e.prototype.getTokenCache=function(){return this.tokenCache},e.prototype.getLogger=function(){return this.logger},e.prototype.setLogger=function(e){this.logger=e},e.prototype.initializeWrapperLibrary=function(e,t){this.browserStorage.setWrapperMetadata(e,t)},e.prototype.setNavigationClient=function(e){this.navigationClient=e},e.prototype.getConfiguration=function(){return this.config},e.prototype.getRequestCorrelationId=function(e){return(null==e?void 0:e.correlationId)?e.correlationId:this.isBrowserEnvironment?this.browserCrypto.createNewGuid():S.EMPTY_STRING},e}())}}]);